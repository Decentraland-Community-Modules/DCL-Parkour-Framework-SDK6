!function(e,t){for(var r in t)e[r]=t[r]}(this,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=61)}([function(e,t,r){"use strict";e.exports=r(33)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerService=t.loadService=t.serverProcedureStream=t.serverProcedureUnary=t.clientProcedureStream=t.clientProcedureUnary=void 0;const n=new Uint8Array;function o(e,t){return async r=>{const o=await e;if(!(t.name in o))throw new Error("Method "+t.name+" not implemented in server port");const s=await o[t.name](t.requestType.encode(r).finish());return t.responseType.decode(null!=s?s:n)}}function s(e,t){return function(r){let o=void 0;function s(){return o||(o=async function(){const n=await e;if(!(t.name in n))throw new Error("Method "+t.name+" not implemented in server port");return(await n[t.name](t.requestType.encode(r).finish()))[Symbol.asyncIterator]()}()),o}const i={[Symbol.asyncIterator]:()=>i,async next(){var e;const r=await(await s()).next();return{value:t.responseType.decode(null!==(e=r.value)&&void 0!==e?e:n),done:r.done}},async return(e){const r=await(await s()).return(e);return{value:r.value?t.responseType.decode(r.value):r.value,done:r.done}},async throw(e){const r=await(await s()).throw(e);return{value:r.value?t.responseType.decode(r.value):r.value,done:r.done}}};return i}}function i(e,t){return async function(r,n){const o=t.requestType.decode(r),s=await e(o,n);if(!s)throw new Error("Empty or null responses are not allowed. Procedure: "+t.name);return t.responseType.encode(s).finish()}}function a(e,t){return function(r,n){let o=void 0;const s=t.requestType.decode(r);function i(){return o||(o=async function(){const r=await e(s,n);if(!r)throw new Error("Empty or null responses are not allowed. Procedure: "+t.name);return r[Symbol.asyncIterator]()}()),o}const a={[Symbol.asyncIterator]:()=>a,async next(){const e=await(await i()).next();return{value:e.value?t.responseType.encode(e.value).finish():e.value,done:e.done}},async return(e){const r=await(await i()).return(e);return{value:r.value?t.responseType.encode(r.value).finish():r.value,done:r.done}},async throw(e){const r=await(await i()).throw(e);return{value:r.value?t.responseType.encode(r.value).finish():r.value,done:r.done}}};return a}}t.clientProcedureUnary=o,t.clientProcedureStream=s,t.serverProcedureUnary=i,t.serverProcedureStream=a,t.loadService=function(e,t){const r=e.loadModule(t.name),n={};for(const[e,i]of Object.entries(t.methods))i.responseStream?n[e]=s(r,i):n[e]=o(r,i);return n},t.registerService=function(e,t,r){e.registerModule(t.name,async(e,n)=>{const o=await r(e,n),s={};for(const[e,r]of Object.entries(t.methods))r.responseStream?s[r.name]=a(o[e].bind(o),r):s[r.name]=i(o[e].bind(o),r);return s})}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(4),t),o(r(10),t),o(r(21),t),o(r(22),t),o(r(52),t),o(r(53),t),o(r(54),t),o(r(23),t),o(r(55),t),o(r(56),t),o(r(14),t),o(r(57),t),o(r(58),t),o(r(24),t),o(r(13),t),o(r(7),t),o(r(59),t),o(r(16),t),o(r(6),t),o(r(20),t),o(r(2),t)},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(0),o=r.n(n);const s={encode:(e,t=o.a.Writer.create())=>t,decode(e,t){const r=e instanceof o.a.Reader?e:new o.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return s},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RAD2DEG=t.DEG2RAD=t.Epsilon=t.ToLinearSpace=t.ToGammaSpace=t.Space=t.Orientation=void 0,function(e){e[e.CW=0]="CW",e[e.CCW=1]="CCW"}(t.Orientation||(t.Orientation={})),function(e){e[e.LOCAL=0]="LOCAL",e[e.WORLD=1]="WORLD",e[e.BONE=2]="BONE"}(t.Space||(t.Space={})),t.ToGammaSpace=1/2.2,t.ToLinearSpace=2.2,t.Epsilon=1e-6,t.DEG2RAD=Math.PI/180,t.RAD2DEG=360/(2*Math.PI)},function(e,t,r){"use strict";e.exports={ropsten:{PrivateNodeWallet:"0x62ba62ff92917edf8ac0386fa10e3b27950bce8d",MANAToken:"0x2a8fd99c19271f4f04b1b7b9c4f7cf264b626edb",LANDRegistry:"0x255baf4096cb1723c00c4b4390a4b3028ecaa8ba",LANDProxy:"0x7a73483784ab79257bb11b96fd62a2c3ae4fb75b",TerraformReserve:"0x4bc79175f1f6fded07f04aa1b4b0465ecff6f1b3",ReturnVesting:"0x58c7e6e382c1c19c132b0361c12cbc33e2b13076",LegacyMarketplace:"0x80faa2b517b84a5aec1078d3600eab4c0b3aff56",Marketplace:"0x3d2f10c76b115db93a418ed286ca0c5abfdbf5d0",MarketplaceProxy:"0x5424912699dabaa5f2998750c1c66e73d67ad219",ServiceLocator:"0xb240b30c12d2a9ea6ba3abbf663d9ae265fbebeb",MortgageHelper:"0x0e4c24f71c8679b8af8e5a22aac3816e2b23f1cc",MortgageManager:"0x31ebb4ffd5e34acfc87ea21a0c56157188f3f0e1",RCNEngine:"0xbeE217bfe06C6FAaa2d5f2e06eBB84C5fb70d9bF",RCNToken:"0x2f45b6fb2f28a73f110400386da31044b2e953d4",KyberOracle:"0x4931d0621360187199de494a1469165079b31bfc",DecentralandInvite:"0x7557dfa02f3bd7d274851e3f627de2ed2ff390e8",EstateRegistry:"0x60e315992d5e62457215dd1e6a49d1ceb7983dfc",EstateProxy:"0x124bf28a423b2ca80b3846c3aa0eb944fe7ebb95",ERC721Bid:"0x250fa138c0a994799c7a49df3097dc71e37b3d6f",BidMANABurner:"0x01f43c3133b83086d4776027fbd152fa8a685fb4",AvatarNameRegistry:"0xd127F8d9C736d91Acdee34645e0b4C9db7178160",AvatarNameRegistryProxy:"0x2d794a7c956624fb93Eb3ff6E48D5b5d6dBA127b",ExclusiveMasksCollection:"0x30ae57840b0e9b8ea55334083d53d80b2cfe80e0",DCLRegistrar:"0xeb6f5d94d79f0750781cc962908b161b95192f53",DCLController:"0xd4e92f6ea18412dbae8b2d2b69e498a2d1064fa2",Catalyst:"0xadd085f2318e9678bbb18b3e0711328f902b374b",BuyAdapter:"0xd1e4e2880ff56cd0d5c68da9bed58bfbf0150948",AdapterFeeCollector:"0x5DC888024cB599CfDdb9E6483ED6bAe1fA9e9D18",AdapterConverter:"0x2782eb28Dcb1eF4E7632273cd4e347e130Ce4646",POIAllowlist:"0x5DC4a5C214f2161F0D5595a6dDd9352409aE3Ab4",NAMEDenylist:"0x20c6f1e86eba703a14414a0cbc1b55c89dba7a0f",CollectionsV2Factory:"0x16d8bac5b67a6b782a9081377bec413bc5bb56a6",VestingImpl:"0xc243b243a2033348730420ea55239767802a19d0",VestingFactory:"0xcbfa36f59246ae43cb827a77f6ca955b93dd6042",BatchVesting:"0xedbea1174b892f88a836f61de395f5f155d4d2a9"},mainnet:{MANAToken:"0x0f5d2fb29fb7d3cfee444a200298f468908cc942",LANDRegistry:"0x554bb6488ba955377359bed16b84ed0822679cdc",LANDProxy:"0xf87e31492faf9a91b02ee0deaad50d51d56d5d4d",TerraformReserve:"0xcca95e580bbbd04851ebfb85f77fd46c9b91f11c",ReturnVesting:"0x79c1fdaba012b9a094c495a86ce5c6199cf86368",LegacyMarketplace:"0xb3bca6f5052c7e24726b44da7403b56a8a1b98f8",Marketplace:"0x19a8ed4860007a66805782ed7e0bed4e44fc6717",MarketplaceProxy:"0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539",ServiceLocator:"0x151b11892dd6ab1f91055dcd01d23d03a2c47570",MortgageHelper:"0x90263ea5c57dc6603ca7202920735a6e31235bb9",MortgageManager:"0x9abf1295086afa0e49c60e95c437aa400c5333b8",RCNEngine:"0xba5a17f8ad40dc2c955d95c0547f3e6318bd72e7",RCNToken:"0xf970b8e36e23f7fc3fd752eea86f8be8d83375a6",KyberOracle:"0x2aaf69a2df2828b55fa4a5e30ee8c3c7cd9e5d5b",DecentralandInvite:"0xf886313f213c198458eba7ae9329525e64eb763a",EstateRegistry:"0x1784ef41af86e97f8d28afe95b573a24aeda966e",EstateProxy:"0x959e104e1a4db6317fa58f8295f586e1a978c297",LANDAuction:"0x54b7a124b44054da3692dbc56b116a35c6a3e561",MANABurner:"0xadfeb1de7876fcabeaf87df5a6c566b70f970018",MultiSigWallet:"0x4eac6325e1dbf1ac90434d39766e164dca71139e",Nobody:"0xDf861993Edbe95BAFbfA7760838f8ebbd5Afda9F",ERC721Bid:"0xe479dfd9664c693b2e2992300930b00bfde08233",BidMANABurner:"0x0fcf114c63a5387878e0da051c81cb6febd93b6c",MultisigContractOwner:"0xefc549434a03756f6e37a43757a2927605d8839b",AvatarNameRegistry:"0x894b883905bfEe2CC448880F1b59f4A762E67566",AvatarNameRegistryProxy:"0xcd816354450015A5644857FEd507afEeaE7263af",ExclusiveMasksCollection:"0xc04528c14c8ffd84c7c1fb6719b4a89853035cdd",Halloween2019Collection:"0xc1f4b0eea2bd6690930e6c66efd3e197d620b9c2",Halloween2019CollectionFactory:"0x07ccfd0fbada4ac3c22ecd38037ca5e5c0ad8cfa",Xmas2019Collection:"0xc3af02c0fd486c8e9da5788b915d6fff3f049866",DCLRegistrar:"0x2a187453064356c898cae034eaed119e1663acb8",DCLController:"0x6843291bd86857d97f0d269e698939fb10d60772",Catalyst:"0xcc054fab08127c19f621ab83ade5962cd10584ec",CatalystProxy:"0x4a2f10076101650f40342885b99b6b101d83c486",MCHCollection:"0xf64dc33a192e056bb5f0e5049356a0498b502d50",CommunityContestCollection:"0x32b7495895264ac9d0b12d32afd435453458b1c6",DCLLaunchCollection:"0xd35147be6401dcb20811f2104c33de8e97ed6818",DCGCollection:"0x3163d2cfee3183f9874e2869942cc62649eeb004",StaySafeCollection:"0x201c3af8c471e5842428b74d1e7c0249adda2a92",StaySafeDonation:"0x56505a0313ba2b4bc0be23dbb7eb71b7885fca9e",ClaimWearableForFree:"0x8dd61d1a67bce13a87e20a76c6f164c388a726d6",Moonshot2020Collection:"0x6a99abebb48819d2abe92c5e4dc4f48dc09a3ee8",DAOAgent:"0x9A6ebE7E2a7722F8200d0ffB63a1F6406A0d7dce",DAOEstateForwarder:"0x34ed9e73930290cec0cfe601809255ec1313ea18",LANDMiniMeToken:"0x20dfe381ca71ade2582094cf569a8cb020af5ab1",EstateMiniMeToken:"0x8568f23f343694650370fe5e254b55bfb704a6c7",BuyAdapter:"0xf4fbd84193f9aaf9779dedbb415a806933eb1c95",AdapterFeeCollector:"0x0d58aaae9f0c4d020486f534363f3fca7a6aecb6",AdapterConverter:"0x2859581da59bd4e16a866dd06b461b76d8e489a4",DappcraftMoonminerCollection:"0x1e1d4e6262787c8a8783a37fee698bd42aa42bec",DGSummer2020Collection:"0xbf53c33235cbfc22cef5a61a83484b86342679c5",PMOuttathisworldCollection:"0x75a3752579dc2d63ca229eebbe3537fbabf85a12",DgtbleHeadspaceCollection:"0x574f64ac2e7215cba9752b85fc73030f35166bc0",WonderzoneMeteorchaserCollection:"0x34ed0aa248f60f54dd32fbc9883d6137a491f4f3",BurningStore:"0x0822d44c2e2f96d4cccad80610134861802b2cca",BaseList:"0x21b6EFf834d7cc8c12A5Ec924939aa521F0FE83F",POIAllowListProxy:"0x0ef15a1c7a49429a36cb46d4da8c53119242b54e",NameDenyListProxy:"0x0c4c90a4f29872a2e9ef4c4be3d419792bca9a36",BinanceUsCollection:"0xa8ee490e4c4da48cc1653502c1a77479d4d818de",PMDreamverseEminence:"0x09305998a531fade369ebe30adf868c96a34e813",CybermikeCyberSoldier:"0x24d538a6265b006d4b53c45ba91af5ef60dca6cb",DCMeta:"0xe7a64f6a239ed7f5bf18caa1ce2920d0c1278129",WZWonderbot:"0x5df4602e7f38a91ea7724fc167f0c67f61604b1e",DGFall2020:"0x7038e9d2c6f5f84469a84cf9bc5f4909bb6ac5e0",MFSammichgamer:"0x30d3387ff3de2a21bef7032f82d00ff7739e403c",SugarclubYumi:"0xb5d14052d1e2bce2a2d7459d0379256e632b855d",EtheremonWearables:"0x54266bcf2ffa841af934f003d144957d5934f3ab",MLPekingopera:"0x60d8271c501501c4b8cd9ed5343ac59d1b79d993",ChinaFlying:"0x90958d4531258ca11d18396d4174a007edbc2b42",TechTribalMarc0matic:"0x480a0f4e360e8964e68858dd231c2922f1df45ef",DigitalAlchemy:"0x5cf39e64392c615fd8086838883958752a11b486",CZMercenaryMTZ:"0xc3ca6c364b854fd0a653a43f8344f8c22ddfdd26",WonderzoneSteampunk:"0xb96697fa4a3361ba35b774a42c58daccaad1b8e1",DCNiftyblocksmith:"0x102daabd1e9d294d4436ec4c521dce7b1f15499e",Halloween2020Collection:"0xfeb52cbf71b9adac957c6f948a6cf9980ac8c907",Xmas2020Collection:"0xecf073f91101ce5628669c487aee8f5822a101b1",MemeDontBuyThis:"0x1a57f6afc902d25792c53b8f19b7e17ef84222d5",ReleaseTheKraken:"0xffc5043d9a00865d089d5eefa5b3d1625aec6763","3LAUBasics":"0xe1ecb4e5130f493551c7d6df96ad19e5b431a0a9",XmashUp2020:"0xdd9c7bc159dacb19c9f6b9d7e23948c87aa2397f",MLLiondance:"0x0b1c6c75d511fae05e7dc696f4cf14129a9c43c9",AtariLaunch:"0x4c290f486bae507719c562b6b524bdb71a2570c9",ERC20Predicate:"0x40ec5B33f54e0E8A33A975908C5BA1c14e5BbbDf",RootChainManagerProxy:"0xA0c68C638235ee32657e8f720a23ceC1bFc77C77",RootChainProxy:"0x86E4Dc95c7FBdBf52e33D563BbDB00823894C287",RTFKTXAtari:"0x6b47e7066c7db71aa04a1d5872496fe05c4c331f",RACBasics:"0x68e139552c4077ce5c9ab929c7e18ca721ffff00",WinklevossCapital:"0xc82a864a94db3550bc71fcb4ce07228bcec21f1a",DGAtariDillonFrancis:"0x51e0b1afe5da0c038fc93a3fc8e11cf7a238b40b",DAOVotingPower:"0xcf9b305b4cd210079f5648f17ede69e666c0c8d4",TheGraphMultisig:"0x89FDdaB2F93417182CdCdb0B8B3322B93AB3A192",VestingImpl:"0x42f32e19365d8045661a006408cc6d1064039fbf",VestingFactory:"0xe357273545c152f07afe2c38257b7b653fd3f6d0",BatchVesting:"0xc57185366bcda81cde363380e2099758712038d0"},kovan:{MANAToken:"0x230fc362413d9e862326c2c7084610a5a2fdf78a",LANDRegistry:"0x2059291430b9aa2F79547f657816eFb816b36614",LANDProxy:"0x537263c440943f6a6808bCb8CcB3fe03EE838aD1",Marketplace:"0x6f44f195999f06aeb5872db96cdc517f1e839f13"},rinkeby:{MANAToken:"0x28bce5263f5d7f4eb7e8c6d5d78275ca455bac63",LANDProxy:"0x28bef22df3e2040a4be64a9ca0e8b5ae2b91462d",LANDRegistry:"0xbeea8bfb0e582be1c3fb464824e61c218ba0c1b1",EstateRegistry:"0x3f0b58ad7a8b27d0e5573cd1ca7d456e2f6d4884",Multisig:"0x0de35b8b47b129877e0efca24e294b61d7e7eee3",MANAMiniMeToken:"0xfb2712a1246f712b889692c7ce55fec25c06bc33",LANDMiniMeToken:"0x576c4577aAd561EA79acbd49215a0cC1473BfCCA",EstateMiniMeToken:"0x2b98C125733035cDE09d311F988845808EE270E6",DAOVotingPower:"0xe65835cd7c9311866ae5d260a1eb7b963899ca14",VestingImpl:"0x8493bb6ae17e12c062b0eb1fe780cc0b2df16bb2",VestingFactory:"0x64c9f713a743458ab22ec49d88dd00621f528786"},goerli:{MANAToken:"0xe7fDae84ACaba2A5Ba817B6E6D8A2d415DBFEdbe",ERC20Predicate:"0xdD6596F2029e6233DEFfaCa316e6A95217d4Dc34",RootChainManagerProxy:"0xbbd7cbfa79faee899eaf900f13c9065bf03b1a74",RootChainProxy:"0x2890ba17efe978480615e330ecb65333b880928e",LANDRegistry:"0x0cfF059845c6Abee7De396d00091016ad72FD324",LANDProxy:"0x25b6B4bac4aDB582a0ABd475439dA6730777Fbf7",EstateRegistry:"0x5309aE874FC4eB21adCd63f8b6C3f766Cc3B1849",EstateProxy:"0xC9A46712E6913c24d15b46fF12221a79c4e251DC",RentalsProxyAdmin:"0x6ad9fb3f07a6013e6db2327e27ad0a38e858d88d",RentalsProxy:"0xbb2a03bf5f525734cb0536be4be61ba788d7ee01",RentalsImplementation:"0xe70db6319e9cee3f604909bdade58d1f5c1cf702",MarketplaceProxy:"0x5d01fbD3E22892be40F69bdAE7Ad921C8cdA2085",MarketplaceImplementation:"0x09B389B3523870798f46555fef26B4476A973E6E",MarketplaceLegacyNFT:"0x0fFc7E6D72eE2F287B877533454210621b1B7822",DCLRegistrar:"0x6b8da2752827cf926215b43bb8E46Fd7b9dDac35",DCLController:"0x6fF05B6271BBEd8F16a46e6073d27aD94224E0Ac",ERC721Bid:"0xd7dC1C183B8fFaED6b7f30fFC616Ff81B66812e5",ExclusiveMasksCollection:"0x1f0880E0b4514DC58e68B9BE91693bFA8C067ac1",NAMEDenylist:"0x71c84760df0537f7db286274817462dc2e6c1366",Catalyst:"0x380e46851c47b73b6aa9bea50cf3b50e2cf637cf",POIAllowlist:"0xb8c7a7afd42675ab61f0a3732f8d0491825a933b"},matic:{MetaTxForwarder:"0x0baBda04f62C549A09EF3313Fe187f29c099FF3C",MANAToken:"0xA1c57f48F0Deb89f569dFbE6E2B7f46D33606fD4",ChildChainManagerProxy:"0xA6FA4fB5f76172d178d61B04b0ecd319C5d1C0aa",SABMultisig:"0x0E659A116e161d8e502F9036bAbDA51334F2667E",CommitteeMultisig:"0xB08E3e7cc815213304d884C88cA476ebC50EaAB2",CollectionImplementation:"0x006080C6061C4aF79b39Da0842a3a22A7b3f185e",Rarities:"0x17113b44fdd661A156cc01b5031E3aCF72c32EB3",RaritiesWithOracle:"0xA9158E22F89Bb3F69c5600338895Cb5FB81e5090",OldCommittee:"0x71d9350Ef44E1e451F00e447C0DfF2d1FB75510a",Committee:"0xaeec95a8aa671a6d3fec56594827d7804964fa70","CollectionManager ":"0x9D32AaC179153A991e832550d9F96441Ea27763A",Forwarder:"0xBF6755A83C0dCDBB2933A96EA778E00b717d7004",CollectionFactory:"0xB549B2442b2BD0a53795BC5cDcBFE0cAF7ACA9f8",CollectionFactoryV3:"0x3195e88aE10704b359764CB38e429D24f1c2f781",CollectionStore:"0x214ffC0f0103735728dc66b61A22e4F163e275ae",Marketplace:"0x02080031b45A3c67d338Dd4A2CC309D28756A160",TPRAdmin:"0xF44063d872C88eEBab2EFC0318194e75a5218C1E",TPRProxy:"0x1C436C1EFb4608dFfDC8bace99d2B03c314f3348",TPR:"0x1f8063CC04398Be214a7d8dD25B6b6e2b870d99e",ChainlinkOracle:"0x1a91dd8d4eeddc2fac31f36818604b7093dc95e0",RoyaltiesManager:"0x90958D4531258ca11D18396d4174a007edBc2b42",MarketplaceV2:"0x480a0f4e360E8964e68858Dd231c2922f1df45Ef",ERC721Bid:"0xb96697FA4A3361Ba35B774a42c58dACcaAd1B8E1",FoundationEOACreator1:"0x6ADf75e49bAC21abab9AdB9266d2cC6d90AbD31a",UpgradeableBeacon:"0xDDb3781Fff645325C8896AA1F067bAa381607ecc"},mumbai:{dAppsAdmin:"0xb919da06d5f81777B13Fc5CBd48635E19500Fbf5",MetaTxForwarder:"0xBF6755A83C0dCDBB2933A96EA778E00b717d7004",MANAToken:"0x882Da5967c435eA5cC6b09150d55E8304B838f45",ChildChainManagerProxy:"0xb5505a6d998549090530911180f38aC5130101c6",CollectionImplementation:"0x89c4Ad77066d9EE8aD281D5Fd995690D91436644",Rarities:"0x8eabF06f6cf667915bfF30138be70543bCE2901A",RaritiesWithOracle:"0xb9957735bbe6D42585058Af11AA72da8eAD9043a",OldCommittee:"0x4bb5ACe5ceB3Dd51ea35fa01a8f9B5507c234270",Committee:"0xe18B1361d41afC44658216F3Dc27e48c2336e3c2","CollectionManager ":"0xe539E0AED3C1971560517D58277f8dd9aC296281",Forwarder:"0x71e56Ad57eca3fAAe5077b7F9ea731a25785fF92",CollectionFactory:"0x2A72Ec4241Ac4fBc915ae98aC5a5b01AdE721f4B",CollectionFactoryV3:"0xDDb3781Fff645325C8896AA1F067bAa381607ecc",CollectionStore:"0x6ddF1b1924DAD850AdBc1C02026535464Be06B0c",Marketplace:"0x2a09a000224f5dbe0E17214cA95CDe506DA7CB74",TPRAdmin:"0xa1Ee2a8bDAEF0AB178D1088Cb3Ae0537c8eB4B8e",TPRProxy:"0xEDf516F2D42A47F9cE0B145Fe0dbB76975379889",TPR:"0x3CFe76fbf8E2868075c10161667ab3Fea19cA8D2",ChainlinkOracle:"0x05b0a8195aa4c21944d68f71a263f836670e3605",DummyDataFeed:"0x5521ade5494225e0936c74f97e474107d73c406e",ThirdPartyTiers:"0xdC899B9c1Fa80292606C3cfbA88bbBf0935c2e48",RoyaltiesManager:"0x68838E6068a3a925a78546E475dE73C75e4F2651",MarketplaceV2:"0x5A467398dfa9d5C663a656423A2D055f538198A4",ERC721Bid:"0x78Dd92c8941dBC7BE54E2a9390D58aD28AD97afD",UpgradeableBeacon:"0x0c8ad1f6aadf89d2eb19f01a100a6143108fe2b0"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector3=void 0;const n=r(10),o=r(4),s=r(13),i=r(7);class a{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}get isNonUniform(){const e=Math.abs(this.x),t=Math.abs(this.y);if(e!==t)return!0;const r=Math.abs(this.z);return e!==r||t!==r}static Add(e,t){return new a(e.x,e.y,e.z).addInPlace(t)}static GetClipFactor(e,t,r,n){const o=a.Dot(e,r)-n;return o/(o-(a.Dot(t,r)-n))}static GetAngleBetweenVectors(e,t,r){const o=e.normalizeToRef(n.MathTmp.Vector3[1]),s=t.normalizeToRef(n.MathTmp.Vector3[2]),i=a.Dot(o,s),c=n.MathTmp.Vector3[3];return a.CrossToRef(o,s,c),a.Dot(c,r)>0?Math.acos(i):-Math.acos(i)}static FromArray(e,t=0){return new a(e[t],e[t+1],e[t+2])}static FromFloatArray(e,t){return a.FromArray(e,t)}static FromArrayToRef(e,t,r){r.x=e[t],r.y=e[t+1],r.z=e[t+2]}static FromFloatArrayToRef(e,t,r){return a.FromArrayToRef(e,t,r)}static FromFloatsToRef(e,t,r,n){n.copyFromFloats(e,t,r)}static Zero(){return new a(0,0,0)}static One(){return new a(1,1,1)}static Up(){return new a(0,1,0)}static Down(){return new a(0,-1,0)}static Forward(){return new a(0,0,1)}static Backward(){return new a(0,0,-1)}static Right(){return new a(1,0,0)}static Left(){return new a(-1,0,0)}static TransformCoordinates(e,t){const r=a.Zero();return a.TransformCoordinatesToRef(e,t,r),r}static TransformCoordinatesToRef(e,t,r){return a.TransformCoordinatesFromFloatsToRef(e.x,e.y,e.z,t,r)}static TransformCoordinatesFromFloatsToRef(e,t,r,n,o){const s=n.m,i=e*s[0]+t*s[4]+r*s[8]+s[12],a=e*s[1]+t*s[5]+r*s[9]+s[13],c=e*s[2]+t*s[6]+r*s[10]+s[14],d=1/(e*s[3]+t*s[7]+r*s[11]+s[15]);o.x=i*d,o.y=a*d,o.z=c*d}static TransformNormal(e,t){const r=a.Zero();return a.TransformNormalToRef(e,t,r),r}static TransformNormalToRef(e,t,r){this.TransformNormalFromFloatsToRef(e.x,e.y,e.z,t,r)}static TransformNormalFromFloatsToRef(e,t,r,n,o){const s=n.m;o.x=e*s[0]+t*s[4]+r*s[8],o.y=e*s[1]+t*s[5]+r*s[9],o.z=e*s[2]+t*s[6]+r*s[10]}static CatmullRom(e,t,r,n,o){const s=o*o,i=o*s,c=.5*(2*t.x+(-e.x+r.x)*o+(2*e.x-5*t.x+4*r.x-n.x)*s+(-e.x+3*t.x-3*r.x+n.x)*i),d=.5*(2*t.y+(-e.y+r.y)*o+(2*e.y-5*t.y+4*r.y-n.y)*s+(-e.y+3*t.y-3*r.y+n.y)*i),u=.5*(2*t.z+(-e.z+r.z)*o+(2*e.z-5*t.z+4*r.z-n.z)*s+(-e.z+3*t.z-3*r.z+n.z)*i);return new a(c,d,u)}static Clamp(e,t,r){const n=new a;return a.ClampToRef(e,t,r,n),n}static ClampToRef(e,t,r,n){let o=e.x;o=o>r.x?r.x:o,o=o<t.x?t.x:o;let s=e.y;s=s>r.y?r.y:s,s=s<t.y?t.y:s;let i=e.z;i=i>r.z?r.z:i,i=i<t.z?t.z:i,n.copyFromFloats(o,s,i)}static Hermite(e,t,r,n,o){const s=o*o,i=o*s,c=2*i-3*s+1,d=-2*i+3*s,u=i-2*s+o,l=i-s,p=e.x*c+r.x*d+t.x*u+n.x*l,h=e.y*c+r.y*d+t.y*u+n.y*l,f=e.z*c+r.z*d+t.z*u+n.z*l;return new a(p,h,f)}static Lerp(e,t,r){const n=new a(0,0,0);return a.LerpToRef(e,t,r,n),n}static LerpToRef(e,t,r,n){n.x=e.x+(t.x-e.x)*r,n.y=e.y+(t.y-e.y)*r,n.z=e.z+(t.z-e.z)*r}static Dot(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}static Cross(e,t){const r=a.Zero();return a.CrossToRef(e,t,r),r}static CrossToRef(e,t,r){const n=e.y*t.z-e.z*t.y,o=e.z*t.x-e.x*t.z,s=e.x*t.y-e.y*t.x;r.copyFromFloats(n,o,s)}static Normalize(e){const t=a.Zero();return a.NormalizeToRef(e,t),t}static NormalizeToRef(e,t){e.normalizeToRef(t)}static Minimize(e,t){const r=new a(e.x,e.y,e.z);return r.minimizeInPlace(t),r}static Maximize(e,t){const r=new a(e.x,e.y,e.z);return r.maximizeInPlace(t),r}static Distance(e,t){return Math.sqrt(a.DistanceSquared(e,t))}static DistanceSquared(e,t){const r=e.x-t.x,n=e.y-t.y,o=e.z-t.z;return r*r+n*n+o*o}static Center(e,t){const r=a.Add(e,t);return r.scaleInPlace(.5),r}static RotationFromAxis(e,t,r){const n=a.Zero();return a.RotationFromAxisToRef(e,t,r,n),n}static RotationFromAxisToRef(e,t,r,o){const i=n.MathTmp.Quaternion[0];s.Quaternion.RotationQuaternionFromAxisToRef(e,t,r,i),o.copyFrom(i.eulerAngles)}toString(){return`(${this.x}, ${this.y}, ${this.z})`}getClassName(){return"Vector3"}getHashCode(){let e=this.x||0;return e=397*e^(this.y||0),e=397*e^(this.z||0),e}asArray(){const e=[];return this.toArray(e,0),e}toArray(e,t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,this}toQuaternion(){return s.Quaternion.Identity.setEuler(this.y,this.x,this.z)}addInPlace(e){return this.addInPlaceFromFloats(e.x,e.y,e.z)}addInPlaceFromFloats(e,t,r){return this.x+=e,this.y+=t,this.z+=r,this}add(e){return new a(this.x+e.x,this.y+e.y,this.z+e.z)}addToRef(e,t){return t.copyFromFloats(this.x+e.x,this.y+e.y,this.z+e.z)}subtractInPlace(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subtract(e){return new a(this.x-e.x,this.y-e.y,this.z-e.z)}subtractToRef(e,t){return this.subtractFromFloatsToRef(e.x,e.y,e.z,t)}subtractFromFloats(e,t,r){return new a(this.x-e,this.y-t,this.z-r)}subtractFromFloatsToRef(e,t,r,n){return n.copyFromFloats(this.x-e,this.y-t,this.z-r)}applyMatrix4(e){this.applyMatrix4ToRef(e,this)}applyMatrix4ToRef(e,t){const{x:r,y:n,z:o}=this,{m:s}=e,i=1/(s[3]*r+s[7]*n+s[11]*o+s[15]);return t.x=(s[0]*r+s[4]*n+s[8]*o+s[12])*i,t.y=(s[1]*r+s[5]*n+s[9]*o+s[13])*i,t.z=(s[2]*r+s[6]*n+s[10]*o+s[14])*i,t}rotate(e){return this.rotateToRef(e,this)}rotateToRef(e,t){const{x:r,y:n,z:o}=this,{x:s,y:i,z:a,w:c}=e,d=c*r+i*o-a*n,u=c*n+a*r-s*o,l=c*o+s*n-i*r,p=-s*r-i*n-a*o;return t.x=d*c+p*-s+u*-a-l*-i,t.y=u*c+p*-i+l*-s-d*-a,t.z=l*c+p*-a+d*-i-u*-s,t}negate(){return new a(-this.x,-this.y,-this.z)}scaleInPlace(e){return this.x*=e,this.y*=e,this.z*=e,this}scale(e){return new a(this.x*e,this.y*e,this.z*e)}scaleToRef(e,t){return t.copyFromFloats(this.x*e,this.y*e,this.z*e)}scaleAndAddToRef(e,t){return t.addInPlaceFromFloats(this.x*e,this.y*e,this.z*e)}equals(e){return e&&this.x===e.x&&this.y===e.y&&this.z===e.z}equalsWithEpsilon(e,t=o.Epsilon){return e&&i.Scalar.WithinEpsilon(this.x,e.x,t)&&i.Scalar.WithinEpsilon(this.y,e.y,t)&&i.Scalar.WithinEpsilon(this.z,e.z,t)}equalsToFloats(e,t,r){return this.x===e&&this.y===t&&this.z===r}multiplyInPlace(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiply(e){return this.multiplyByFloats(e.x,e.y,e.z)}multiplyToRef(e,t){return t.copyFromFloats(this.x*e.x,this.y*e.y,this.z*e.z)}multiplyByFloats(e,t,r){return new a(this.x*e,this.y*t,this.z*r)}divide(e){return new a(this.x/e.x,this.y/e.y,this.z/e.z)}divideToRef(e,t){return t.copyFromFloats(this.x/e.x,this.y/e.y,this.z/e.z)}divideInPlace(e){return this.divideToRef(e,this)}minimizeInPlace(e){return this.minimizeInPlaceFromFloats(e.x,e.y,e.z)}maximizeInPlace(e){return this.maximizeInPlaceFromFloats(e.x,e.y,e.z)}minimizeInPlaceFromFloats(e,t,r){return e<this.x&&(this.x=e),t<this.y&&(this.y=t),r<this.z&&(this.z=r),this}maximizeInPlaceFromFloats(e,t,r){return e>this.x&&(this.x=e),t>this.y&&(this.y=t),r>this.z&&(this.z=r),this}floor(){return new a(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))}fract(){return new a(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(e){return 0===e||1===e?this:this.scaleInPlace(1/e)}normalizeToNew(){const e=new a(0,0,0);return this.normalizeToRef(e),e}normalizeToRef(e){const t=this.length();return 0===t||1===t?e.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/t,e)}clone(){return new a(this.x,this.y,this.z)}copyFrom(e){return this.copyFromFloats(e.x,e.y,e.z)}copyFromFloats(e,t,r){return this.x=e,this.y=t,this.z=r,this}set(e,t,r){return this.copyFromFloats(e,t,r)}setAll(e){return this.x=this.y=this.z=e,this}}t.Vector3=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scalar=void 0;class n{static WithinEpsilon(e,t,r=1401298e-51){const n=e-t;return-r<=n&&n<=r}static ToHex(e){const t=e.toString(16);return e<=15?("0"+t).toUpperCase():t.toUpperCase()}static Sign(e){const t=+e;return 0===t||isNaN(t)?t:t>0?1:-1}static Clamp(e,t=0,r=1){return Math.min(r,Math.max(t,e))}static Log2(e){return Math.log(e)*Math.LOG2E}static Repeat(e,t){return e-Math.floor(e/t)*t}static Normalize(e,t,r){return(e-t)/(r-t)}static Denormalize(e,t,r){return e*(r-t)+t}static DeltaAngle(e,t){let r=n.Repeat(t-e,360);return r>180&&(r-=360),r}static PingPong(e,t){const r=n.Repeat(e,2*t);return t-Math.abs(r-t)}static SmoothStep(e,t,r){let o=n.Clamp(r);return o=-2*o*o*o+3*o*o,t*o+e*(1-o)}static MoveTowards(e,t,r){let o=0;return o=Math.abs(t-e)<=r?t:e+n.Sign(t-e)*r,o}static MoveTowardsAngle(e,t,r){const o=n.DeltaAngle(e,t);let s=0;return s=-r<o&&o<r?t:n.MoveTowards(e,e+o,r),s}static Lerp(e,t,r){return e+(t-e)*r}static LerpAngle(e,t,r){let o=n.Repeat(t-e,360);return o>180&&(o-=360),e+o*n.Clamp(r)}static InverseLerp(e,t,r){let o=0;return o=e!==t?n.Clamp((r-e)/(t-e)):0,o}static Hermite(e,t,r,n,o){const s=o*o,i=o*s;return e*(2*i-3*s+1)+r*(-2*i+3*s)+t*(i-2*s+o)+n*(i-s)}static RandomRange(e,t){return e===t?e:Math.random()*(t-e)+e}static RangeToPercent(e,t,r){return(e-t)/(r-t)}static PercentToRange(e,t,r){return(r-t)*e+t}static NormalizeRadians(e){return e-n.TwoPi*Math.floor((e+Math.PI)/n.TwoPi)}}t.Scalar=n,n.TwoPi=2*Math.PI},function(e,t,r){"use strict";(function(e){var n=t;function o(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&o(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(34),n.base64=r(35),n.EventEmitter=r(36),n.float=r(37),n.inquire=r(38),n.utf8=r(39),n.pool=r(40),n.LongBits=r(41),n.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),n.global=n.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=o,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}).call(this,r(11))},function(e,t,r){"use strict";(function(e){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamMessage=t.Response=t.RemoteError=t.Request=t.ModuleProcedure=t.DestroyPort=t.RequestModuleResponse=t.RequestModule=t.CreatePortResponse=t.CreatePort=t.RpcMessageHeader=t.rpcMessageTypesToJSON=t.rpcMessageTypesFromJSON=t.RpcMessageTypes=t.protobufPackage=void 0;const o=n(r(0));var s;function i(){return{messageIdentifier:0,portId:0,procedureId:0,payload:new Uint8Array}}function a(){return{messageIdentifier:0,payload:new Uint8Array}}function c(){return{messageIdentifier:0,portId:0,sequenceId:0,payload:new Uint8Array,closed:!1,ack:!1}}t.protobufPackage="",function(e){e[e.RpcMessageTypes_EMPTY=0]="RpcMessageTypes_EMPTY",e[e.RpcMessageTypes_REQUEST=1]="RpcMessageTypes_REQUEST",e[e.RpcMessageTypes_RESPONSE=2]="RpcMessageTypes_RESPONSE",e[e.RpcMessageTypes_STREAM_MESSAGE=3]="RpcMessageTypes_STREAM_MESSAGE",e[e.RpcMessageTypes_STREAM_ACK=4]="RpcMessageTypes_STREAM_ACK",e[e.RpcMessageTypes_CREATE_PORT=5]="RpcMessageTypes_CREATE_PORT",e[e.RpcMessageTypes_CREATE_PORT_RESPONSE=6]="RpcMessageTypes_CREATE_PORT_RESPONSE",e[e.RpcMessageTypes_REQUEST_MODULE=7]="RpcMessageTypes_REQUEST_MODULE",e[e.RpcMessageTypes_REQUEST_MODULE_RESPONSE=8]="RpcMessageTypes_REQUEST_MODULE_RESPONSE",e[e.RpcMessageTypes_REMOTE_ERROR_RESPONSE=9]="RpcMessageTypes_REMOTE_ERROR_RESPONSE",e[e.RpcMessageTypes_DESTROY_PORT=10]="RpcMessageTypes_DESTROY_PORT",e[e.RpcMessageTypes_SERVER_READY=11]="RpcMessageTypes_SERVER_READY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(s=t.RpcMessageTypes||(t.RpcMessageTypes={})),t.rpcMessageTypesFromJSON=function(e){switch(e){case 0:case"RpcMessageTypes_EMPTY":return s.RpcMessageTypes_EMPTY;case 1:case"RpcMessageTypes_REQUEST":return s.RpcMessageTypes_REQUEST;case 2:case"RpcMessageTypes_RESPONSE":return s.RpcMessageTypes_RESPONSE;case 3:case"RpcMessageTypes_STREAM_MESSAGE":return s.RpcMessageTypes_STREAM_MESSAGE;case 4:case"RpcMessageTypes_STREAM_ACK":return s.RpcMessageTypes_STREAM_ACK;case 5:case"RpcMessageTypes_CREATE_PORT":return s.RpcMessageTypes_CREATE_PORT;case 6:case"RpcMessageTypes_CREATE_PORT_RESPONSE":return s.RpcMessageTypes_CREATE_PORT_RESPONSE;case 7:case"RpcMessageTypes_REQUEST_MODULE":return s.RpcMessageTypes_REQUEST_MODULE;case 8:case"RpcMessageTypes_REQUEST_MODULE_RESPONSE":return s.RpcMessageTypes_REQUEST_MODULE_RESPONSE;case 9:case"RpcMessageTypes_REMOTE_ERROR_RESPONSE":return s.RpcMessageTypes_REMOTE_ERROR_RESPONSE;case 10:case"RpcMessageTypes_DESTROY_PORT":return s.RpcMessageTypes_DESTROY_PORT;case 11:case"RpcMessageTypes_SERVER_READY":return s.RpcMessageTypes_SERVER_READY;case-1:case"UNRECOGNIZED":default:return s.UNRECOGNIZED}},t.rpcMessageTypesToJSON=function(e){switch(e){case s.RpcMessageTypes_EMPTY:return"RpcMessageTypes_EMPTY";case s.RpcMessageTypes_REQUEST:return"RpcMessageTypes_REQUEST";case s.RpcMessageTypes_RESPONSE:return"RpcMessageTypes_RESPONSE";case s.RpcMessageTypes_STREAM_MESSAGE:return"RpcMessageTypes_STREAM_MESSAGE";case s.RpcMessageTypes_STREAM_ACK:return"RpcMessageTypes_STREAM_ACK";case s.RpcMessageTypes_CREATE_PORT:return"RpcMessageTypes_CREATE_PORT";case s.RpcMessageTypes_CREATE_PORT_RESPONSE:return"RpcMessageTypes_CREATE_PORT_RESPONSE";case s.RpcMessageTypes_REQUEST_MODULE:return"RpcMessageTypes_REQUEST_MODULE";case s.RpcMessageTypes_REQUEST_MODULE_RESPONSE:return"RpcMessageTypes_REQUEST_MODULE_RESPONSE";case s.RpcMessageTypes_REMOTE_ERROR_RESPONSE:return"RpcMessageTypes_REMOTE_ERROR_RESPONSE";case s.RpcMessageTypes_DESTROY_PORT:return"RpcMessageTypes_DESTROY_PORT";case s.RpcMessageTypes_SERVER_READY:return"RpcMessageTypes_SERVER_READY";case s.UNRECOGNIZED:default:return"UNRECOGNIZED"}},t.RpcMessageHeader={encode:(e,t=o.default.Writer.create())=>(0!==e.messageIdentifier&&t.uint32(13).fixed32(e.messageIdentifier),t),decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={messageIdentifier:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.messageIdentifier=r.fixed32();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({messageIdentifier:p(e.messageIdentifier)?Number(e.messageIdentifier):0}),toJSON(e){const t={};return void 0!==e.messageIdentifier&&(t.messageIdentifier=Math.round(e.messageIdentifier)),t},fromPartial(e){var t;const r={messageIdentifier:0};return r.messageIdentifier=null!==(t=e.messageIdentifier)&&void 0!==t?t:0,r}},t.CreatePort={encode:(e,t=o.default.Writer.create())=>(0!==e.messageIdentifier&&t.uint32(13).fixed32(e.messageIdentifier),""!==e.portName&&t.uint32(34).string(e.portName),t),decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={messageIdentifier:0,portName:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.messageIdentifier=r.fixed32();break;case 4:s.portName=r.string();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({messageIdentifier:p(e.messageIdentifier)?Number(e.messageIdentifier):0,portName:p(e.portName)?String(e.portName):""}),toJSON(e){const t={};return void 0!==e.messageIdentifier&&(t.messageIdentifier=Math.round(e.messageIdentifier)),void 0!==e.portName&&(t.portName=e.portName),t},fromPartial(e){var t,r;const n={messageIdentifier:0,portName:""};return n.messageIdentifier=null!==(t=e.messageIdentifier)&&void 0!==t?t:0,n.portName=null!==(r=e.portName)&&void 0!==r?r:"",n}},t.CreatePortResponse={encode:(e,t=o.default.Writer.create())=>(0!==e.messageIdentifier&&t.uint32(13).fixed32(e.messageIdentifier),0!==e.portId&&t.uint32(21).fixed32(e.portId),t),decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={messageIdentifier:0,portId:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.messageIdentifier=r.fixed32();break;case 2:s.portId=r.fixed32();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({messageIdentifier:p(e.messageIdentifier)?Number(e.messageIdentifier):0,portId:p(e.portId)?Number(e.portId):0}),toJSON(e){const t={};return void 0!==e.messageIdentifier&&(t.messageIdentifier=Math.round(e.messageIdentifier)),void 0!==e.portId&&(t.portId=Math.round(e.portId)),t},fromPartial(e){var t,r;const n={messageIdentifier:0,portId:0};return n.messageIdentifier=null!==(t=e.messageIdentifier)&&void 0!==t?t:0,n.portId=null!==(r=e.portId)&&void 0!==r?r:0,n}},t.RequestModule={encode:(e,t=o.default.Writer.create())=>(0!==e.messageIdentifier&&t.uint32(13).fixed32(e.messageIdentifier),0!==e.portId&&t.uint32(21).fixed32(e.portId),""!==e.moduleName&&t.uint32(34).string(e.moduleName),t),decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={messageIdentifier:0,portId:0,moduleName:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.messageIdentifier=r.fixed32();break;case 2:s.portId=r.fixed32();break;case 4:s.moduleName=r.string();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({messageIdentifier:p(e.messageIdentifier)?Number(e.messageIdentifier):0,portId:p(e.portId)?Number(e.portId):0,moduleName:p(e.moduleName)?String(e.moduleName):""}),toJSON(e){const t={};return void 0!==e.messageIdentifier&&(t.messageIdentifier=Math.round(e.messageIdentifier)),void 0!==e.portId&&(t.portId=Math.round(e.portId)),void 0!==e.moduleName&&(t.moduleName=e.moduleName),t},fromPartial(e){var t,r,n;const o={messageIdentifier:0,portId:0,moduleName:""};return o.messageIdentifier=null!==(t=e.messageIdentifier)&&void 0!==t?t:0,o.portId=null!==(r=e.portId)&&void 0!==r?r:0,o.moduleName=null!==(n=e.moduleName)&&void 0!==n?n:"",o}},t.RequestModuleResponse={encode(e,r=o.default.Writer.create()){0!==e.messageIdentifier&&r.uint32(13).fixed32(e.messageIdentifier),0!==e.portId&&r.uint32(21).fixed32(e.portId);for(const n of e.procedures)t.ModuleProcedure.encode(n,r.uint32(42).fork()).ldelim();return r},decode(e,r){const n=e instanceof o.default.Reader?e:new o.default.Reader(e);let s=void 0===r?n.len:n.pos+r;const i={messageIdentifier:0,portId:0,procedures:[]};for(;n.pos<s;){const e=n.uint32();switch(e>>>3){case 1:i.messageIdentifier=n.fixed32();break;case 2:i.portId=n.fixed32();break;case 5:i.procedures.push(t.ModuleProcedure.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromJSON:e=>({messageIdentifier:p(e.messageIdentifier)?Number(e.messageIdentifier):0,portId:p(e.portId)?Number(e.portId):0,procedures:Array.isArray(null==e?void 0:e.procedures)?e.procedures.map(e=>t.ModuleProcedure.fromJSON(e)):[]}),toJSON(e){const r={};return void 0!==e.messageIdentifier&&(r.messageIdentifier=Math.round(e.messageIdentifier)),void 0!==e.portId&&(r.portId=Math.round(e.portId)),e.procedures?r.procedures=e.procedures.map(e=>e?t.ModuleProcedure.toJSON(e):void 0):r.procedures=[],r},fromPartial(e){var r,n,o;const s={messageIdentifier:0,portId:0,procedures:[]};return s.messageIdentifier=null!==(r=e.messageIdentifier)&&void 0!==r?r:0,s.portId=null!==(n=e.portId)&&void 0!==n?n:0,s.procedures=(null===(o=e.procedures)||void 0===o?void 0:o.map(e=>t.ModuleProcedure.fromPartial(e)))||[],s}},t.DestroyPort={encode:(e,t=o.default.Writer.create())=>(0!==e.messageIdentifier&&t.uint32(13).fixed32(e.messageIdentifier),0!==e.portId&&t.uint32(21).fixed32(e.portId),t),decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={messageIdentifier:0,portId:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.messageIdentifier=r.fixed32();break;case 2:s.portId=r.fixed32();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({messageIdentifier:p(e.messageIdentifier)?Number(e.messageIdentifier):0,portId:p(e.portId)?Number(e.portId):0}),toJSON(e){const t={};return void 0!==e.messageIdentifier&&(t.messageIdentifier=Math.round(e.messageIdentifier)),void 0!==e.portId&&(t.portId=Math.round(e.portId)),t},fromPartial(e){var t,r;const n={messageIdentifier:0,portId:0};return n.messageIdentifier=null!==(t=e.messageIdentifier)&&void 0!==t?t:0,n.portId=null!==(r=e.portId)&&void 0!==r?r:0,n}},t.ModuleProcedure={encode:(e,t=o.default.Writer.create())=>(0!==e.procedureId&&t.uint32(13).fixed32(e.procedureId),""!==e.procedureName&&t.uint32(18).string(e.procedureName),t),decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={procedureId:0,procedureName:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.procedureId=r.fixed32();break;case 2:s.procedureName=r.string();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({procedureId:p(e.procedureId)?Number(e.procedureId):0,procedureName:p(e.procedureName)?String(e.procedureName):""}),toJSON(e){const t={};return void 0!==e.procedureId&&(t.procedureId=Math.round(e.procedureId)),void 0!==e.procedureName&&(t.procedureName=e.procedureName),t},fromPartial(e){var t,r;const n={procedureId:0,procedureName:""};return n.procedureId=null!==(t=e.procedureId)&&void 0!==t?t:0,n.procedureName=null!==(r=e.procedureName)&&void 0!==r?r:"",n}},t.Request={encode:(e,t=o.default.Writer.create())=>(0!==e.messageIdentifier&&t.uint32(13).fixed32(e.messageIdentifier),0!==e.portId&&t.uint32(21).fixed32(e.portId),0!==e.procedureId&&t.uint32(37).fixed32(e.procedureId),0!==e.payload.length&&t.uint32(50).bytes(e.payload),t),decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s=i();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.messageIdentifier=r.fixed32();break;case 2:s.portId=r.fixed32();break;case 4:s.procedureId=r.fixed32();break;case 6:s.payload=r.bytes();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({messageIdentifier:p(e.messageIdentifier)?Number(e.messageIdentifier):0,portId:p(e.portId)?Number(e.portId):0,procedureId:p(e.procedureId)?Number(e.procedureId):0,payload:p(e.payload)?u(e.payload):new Uint8Array}),toJSON(e){const t={};return void 0!==e.messageIdentifier&&(t.messageIdentifier=Math.round(e.messageIdentifier)),void 0!==e.portId&&(t.portId=Math.round(e.portId)),void 0!==e.procedureId&&(t.procedureId=Math.round(e.procedureId)),void 0!==e.payload&&(t.payload=l(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t,r,n,o;const s=i();return s.messageIdentifier=null!==(t=e.messageIdentifier)&&void 0!==t?t:0,s.portId=null!==(r=e.portId)&&void 0!==r?r:0,s.procedureId=null!==(n=e.procedureId)&&void 0!==n?n:0,s.payload=null!==(o=e.payload)&&void 0!==o?o:new Uint8Array,s}},t.RemoteError={encode:(e,t=o.default.Writer.create())=>(0!==e.messageIdentifier&&t.uint32(13).fixed32(e.messageIdentifier),0!==e.errorCode&&t.uint32(21).fixed32(e.errorCode),""!==e.errorMessage&&t.uint32(26).string(e.errorMessage),t),decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={messageIdentifier:0,errorCode:0,errorMessage:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.messageIdentifier=r.fixed32();break;case 2:s.errorCode=r.fixed32();break;case 3:s.errorMessage=r.string();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({messageIdentifier:p(e.messageIdentifier)?Number(e.messageIdentifier):0,errorCode:p(e.errorCode)?Number(e.errorCode):0,errorMessage:p(e.errorMessage)?String(e.errorMessage):""}),toJSON(e){const t={};return void 0!==e.messageIdentifier&&(t.messageIdentifier=Math.round(e.messageIdentifier)),void 0!==e.errorCode&&(t.errorCode=Math.round(e.errorCode)),void 0!==e.errorMessage&&(t.errorMessage=e.errorMessage),t},fromPartial(e){var t,r,n;const o={messageIdentifier:0,errorCode:0,errorMessage:""};return o.messageIdentifier=null!==(t=e.messageIdentifier)&&void 0!==t?t:0,o.errorCode=null!==(r=e.errorCode)&&void 0!==r?r:0,o.errorMessage=null!==(n=e.errorMessage)&&void 0!==n?n:"",o}},t.Response={encode:(e,t=o.default.Writer.create())=>(0!==e.messageIdentifier&&t.uint32(13).fixed32(e.messageIdentifier),0!==e.payload.length&&t.uint32(50).bytes(e.payload),t),decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s=a();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.messageIdentifier=r.fixed32();break;case 6:s.payload=r.bytes();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({messageIdentifier:p(e.messageIdentifier)?Number(e.messageIdentifier):0,payload:p(e.payload)?u(e.payload):new Uint8Array}),toJSON(e){const t={};return void 0!==e.messageIdentifier&&(t.messageIdentifier=Math.round(e.messageIdentifier)),void 0!==e.payload&&(t.payload=l(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t,r;const n=a();return n.messageIdentifier=null!==(t=e.messageIdentifier)&&void 0!==t?t:0,n.payload=null!==(r=e.payload)&&void 0!==r?r:new Uint8Array,n}},t.StreamMessage={encode:(e,t=o.default.Writer.create())=>(0!==e.messageIdentifier&&t.uint32(13).fixed32(e.messageIdentifier),0!==e.portId&&t.uint32(21).fixed32(e.portId),0!==e.sequenceId&&t.uint32(37).fixed32(e.sequenceId),0!==e.payload.length&&t.uint32(50).bytes(e.payload),!0===e.closed&&t.uint32(56).bool(e.closed),!0===e.ack&&t.uint32(64).bool(e.ack),t),decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s=c();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.messageIdentifier=r.fixed32();break;case 2:s.portId=r.fixed32();break;case 4:s.sequenceId=r.fixed32();break;case 6:s.payload=r.bytes();break;case 7:s.closed=r.bool();break;case 8:s.ack=r.bool();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({messageIdentifier:p(e.messageIdentifier)?Number(e.messageIdentifier):0,portId:p(e.portId)?Number(e.portId):0,sequenceId:p(e.sequenceId)?Number(e.sequenceId):0,payload:p(e.payload)?u(e.payload):new Uint8Array,closed:!!p(e.closed)&&Boolean(e.closed),ack:!!p(e.ack)&&Boolean(e.ack)}),toJSON(e){const t={};return void 0!==e.messageIdentifier&&(t.messageIdentifier=Math.round(e.messageIdentifier)),void 0!==e.portId&&(t.portId=Math.round(e.portId)),void 0!==e.sequenceId&&(t.sequenceId=Math.round(e.sequenceId)),void 0!==e.payload&&(t.payload=l(void 0!==e.payload?e.payload:new Uint8Array)),void 0!==e.closed&&(t.closed=e.closed),void 0!==e.ack&&(t.ack=e.ack),t},fromPartial(e){var t,r,n,o,s,i;const a=c();return a.messageIdentifier=null!==(t=e.messageIdentifier)&&void 0!==t?t:0,a.portId=null!==(r=e.portId)&&void 0!==r?r:0,a.sequenceId=null!==(n=e.sequenceId)&&void 0!==n?n:0,a.payload=null!==(o=e.payload)&&void 0!==o?o:new Uint8Array,a.closed=null!==(s=e.closed)&&void 0!==s&&s,a.ack=null!==(i=e.ack)&&void 0!==i&&i,a}};var d=(()=>{if(void 0!==d)return d;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw"Unable to locate global object"})();function u(e){if(d.Buffer)return Uint8Array.from(d.Buffer.from(e,"base64"));{const t=d.atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}}function l(e){if(d.Buffer)return d.Buffer.from(e).toString("base64");{const t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),d.btoa(t.join(""))}}function p(e){return null!=e}}).call(this,r(11))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathTmp=void 0;const n=r(51),o=r(6),s=r(13),i=r(14);t.MathTmp={Vector3:(0,n.buildArray)(6,o.Vector3.Zero),Matrix:(0,n.buildArray)(2,i.Matrix.Identity),Quaternion:(0,n.buildArray)(3,s.Quaternion.Zero),staticUp:o.Vector3.Up(),tmpMatrix:i.Matrix.Zero()}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseProtocolMessage=t.calculateMessageIdentifier=t.parseMessageIdentifier=t.streamAckMessage=t.streamMessage=t.closeStreamMessage=void 0;const n=r(0),o=r(9),s=new n.Writer,i=Uint8Array.of();function a(e){return[e>>27&15,134217727&e]}function c(e,t){return(15&e)<<27|134217727&t}t.closeStreamMessage=function(e,t,r){return s.reset(),o.StreamMessage.encode({messageIdentifier:c(o.RpcMessageTypes.RpcMessageTypes_STREAM_MESSAGE,e),sequenceId:t,portId:r,ack:!1,closed:!0,payload:i},s),s.finish()},t.streamMessage=function(e,t,r,n){return s.reset(),o.StreamMessage.encode({messageIdentifier:c(o.RpcMessageTypes.RpcMessageTypes_STREAM_MESSAGE,e),sequenceId:t,portId:r,ack:!1,closed:!1,payload:n},s),s.finish()},t.streamAckMessage=function(e,t,r){return s.reset(),o.StreamMessage.encode({messageIdentifier:c(o.RpcMessageTypes.RpcMessageTypes_STREAM_ACK,e),sequenceId:t,portId:r,ack:!0,closed:!1,payload:i},s),s.finish()},t.parseMessageIdentifier=a,t.calculateMessageIdentifier=c,t.parseProtocolMessage=function(e){const t=e.pos,[r,n]=a(o.RpcMessageHeader.decode(e).messageIdentifier);switch(e.pos=t,r){case o.RpcMessageTypes.RpcMessageTypes_CREATE_PORT_RESPONSE:return[r,o.CreatePortResponse.decode(e),n];case o.RpcMessageTypes.RpcMessageTypes_RESPONSE:return[r,o.Response.decode(e),n];case o.RpcMessageTypes.RpcMessageTypes_REQUEST_MODULE_RESPONSE:return[r,o.RequestModuleResponse.decode(e),n];case o.RpcMessageTypes.RpcMessageTypes_STREAM_MESSAGE:return[r,o.StreamMessage.decode(e),n];case o.RpcMessageTypes.RpcMessageTypes_SERVER_READY:return null;case o.RpcMessageTypes.RpcMessageTypes_REMOTE_ERROR_RESPONSE:return[r,o.RemoteError.decode(e),n];case o.RpcMessageTypes.RpcMessageTypes_REQUEST:return[r,o.Request.decode(e),n];case o.RpcMessageTypes.RpcMessageTypes_CREATE_PORT:return[r,o.CreatePort.decode(e),n];case o.RpcMessageTypes.RpcMessageTypes_STREAM_ACK:return[r,o.StreamMessage.decode(e),n];case o.RpcMessageTypes.RpcMessageTypes_REQUEST_MODULE:return[r,o.RequestModule.decode(e),n];case o.RpcMessageTypes.RpcMessageTypes_DESTROY_PORT:return[r,o.DestroyPort.decode(e),n]}return null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Quaternion=void 0;const n=r(14),o=r(6),s=r(10),i=r(4),a=r(7);class c{constructor(e=0,t=0,r=0,n=1){this.x=e,this.y=t,this.z=r,this.w=n}static FromRotationMatrix(e){const t=new c;return c.FromRotationMatrixToRef(e,t),t}static FromRotationMatrixToRef(e,t){const r=e.m,n=r[0],o=r[4],s=r[8],i=r[1],a=r[5],c=r[9],d=r[2],u=r[6],l=r[10],p=n+a+l;let h;p>0?(h=.5/Math.sqrt(p+1),t.w=.25/h,t.x=(u-c)*h,t.y=(s-d)*h,t.z=(i-o)*h):n>a&&n>l?(h=2*Math.sqrt(1+n-a-l),t.w=(u-c)/h,t.x=.25*h,t.y=(o+i)/h,t.z=(s+d)/h):a>l?(h=2*Math.sqrt(1+a-n-l),t.w=(s-d)/h,t.x=(o+i)/h,t.y=.25*h,t.z=(c+u)/h):(h=2*Math.sqrt(1+l-n-a),t.w=(i-o)/h,t.x=(s+d)/h,t.y=(c+u)/h,t.z=.25*h)}static Dot(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w}static AreClose(e,t){return c.Dot(e,t)>=0}static Zero(){return new c(0,0,0,0)}static Inverse(e){return new c(-e.x,-e.y,-e.z,e.w)}static IsIdentity(e){return e&&0===e.x&&0===e.y&&0===e.z&&1===e.w}static RotationAxis(e,t){const r=t*i.DEG2RAD;return c.RotationAxisToRef(e,r,new c)}static RotationAxisToRef(e,t,r){const n=t*i.DEG2RAD,o=Math.sin(n/2);return e.normalize(),r.w=Math.cos(n/2),r.x=e.x*o,r.y=e.y*o,r.z=e.z*o,r}static FromArray(e,t=0){return new c(e[t],e[t+1],e[t+2],e[t+3])}static FromEulerAnglesRef(e,t,r,n){return c.RotationYawPitchRollToRef(t*i.DEG2RAD,e*i.DEG2RAD,r*i.DEG2RAD,n)}static RotationYawPitchRoll(e,t,r){const n=new c;return c.RotationYawPitchRollToRef(e,t,r,n),n}static RotationYawPitchRollToRef(e,t,r,n){const o=.5*t,s=.5*e,i=.5*r,a=Math.cos(o),c=Math.cos(s),d=Math.cos(i),u=Math.sin(o),l=Math.sin(s),p=Math.sin(i);n.x=c*u*d+l*a*p,n.y=l*a*d-c*u*p,n.z=c*a*p-l*u*d,n.w=c*a*d+l*u*p}static RotationAlphaBetaGamma(e,t,r){const n=new c;return c.RotationAlphaBetaGammaToRef(e,t,r,n),n}static RotationAlphaBetaGammaToRef(e,t,r,n){const o=.5*(r+e),s=.5*(r-e),i=.5*t;n.x=Math.cos(s)*Math.sin(i),n.y=Math.sin(s)*Math.sin(i),n.z=Math.sin(o)*Math.cos(i),n.w=Math.cos(o)*Math.cos(i)}static RotationQuaternionFromAxis(e,t,r){const n=new c(0,0,0,0);return c.RotationQuaternionFromAxisToRef(e,t,r,n),n}static RotationQuaternionFromAxisToRef(e,t,r,o){const i=s.MathTmp.Matrix[0];n.Matrix.FromXYZAxesToRef(e.normalize(),t.normalize(),r.normalize(),i),c.FromRotationMatrixToRef(i,o)}static Slerp(e,t,r){const n=c.Identity;return c.SlerpToRef(e,t,r,n),n}static SlerpToRef(e,t,r,n){let o,s,i=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w,a=!1;if(i<0&&(a=!0,i=-i),i>.999999)s=1-r,o=a?-r:r;else{const e=Math.acos(i),t=1/Math.sin(e);s=Math.sin((1-r)*e)*t,o=a?-Math.sin(r*e)*t:Math.sin(r*e)*t}n.x=s*e.x+o*t.x,n.y=s*e.y+o*t.y,n.z=s*e.z+o*t.z,n.w=s*e.w+o*t.w}static Hermite(e,t,r,n,o){const s=o*o,i=o*s,a=2*i-3*s+1,d=-2*i+3*s,u=i-2*s+o,l=i-s,p=e.x*a+r.x*d+t.x*u+n.x*l,h=e.y*a+r.y*d+t.y*u+n.y*l,f=e.z*a+r.z*d+t.z*u+n.z*l,m=e.w*a+r.w*d+t.w*u+n.w*l;return new c(p,h,f,m)}static get Identity(){return new c(0,0,0,1)}static Angle(e,t){const r=c.Dot(e,t);return 2*Math.acos(Math.min(Math.abs(r),1))*i.RAD2DEG}static Euler(e,t,r){return c.RotationYawPitchRoll(t*i.DEG2RAD,e*i.DEG2RAD,r*i.DEG2RAD)}static LookRotation(e,t=s.MathTmp.staticUp){const r=o.Vector3.Normalize(e),n=o.Vector3.Normalize(o.Vector3.Cross(t,r)),i=o.Vector3.Cross(r,n),a=n.x,d=n.y,u=n.z,l=i.x,p=i.y,h=i.z,f=r.x,m=r.y,y=r.z,g=a+p+y,v=new c;if(g>0){let e=Math.sqrt(g+1);return v.w=.5*e,e=.5/e,v.x=(h-m)*e,v.y=(f-u)*e,v.z=(d-l)*e,v}if(a>=p&&a>=y){const e=Math.sqrt(1+a-p-y),t=.5/e;return v.x=.5*e,v.y=(d+l)*t,v.z=(u+f)*t,v.w=(h-m)*t,v}if(p>y){const e=Math.sqrt(1+p-a-y),t=.5/e;return v.x=(l+d)*t,v.y=.5*e,v.z=(m+h)*t,v.w=(f-u)*t,v}const b=Math.sqrt(1+y-a-p),T=.5/b;return v.x=(f+u)*T,v.y=(m+h)*T,v.z=.5*b,v.w=(d-l)*T,v}static RotateTowards(e,t,r){const n=c.Angle(e,t);if(0===n)return t;const o=Math.min(1,r/n);return c.Slerp(e,t,o)}static FromToRotation(e,t,r=s.MathTmp.staticUp){const n=e.normalize(),i=t.normalize(),a=o.Vector3.Cross(n,i),d=Math.sqrt(n.lengthSquared()*i.lengthSquared())+o.Vector3.Dot(n,i);return a.lengthSquared()<1e-4?Math.abs(d)<1e-4?new c(r.x,r.y,r.z,0).normalized:c.Identity:new c(a.x,a.y,a.z,d).normalized}get normalized(){return this.normalize()}setFromToRotation(e,t,r=s.MathTmp.staticUp){const n=c.FromToRotation(e,t,r);this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w}set eulerAngles(e){this.setEuler(e.x,e.y,e.z)}get eulerAngles(){const e=new o.Vector3,t=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w,r=this.x*this.w-this.y*this.z;return r>.4995*t?(e.x=Math.PI/2,e.y=2*Math.atan2(this.y,this.x),e.z=0):r<-.4995*t?(e.x=-Math.PI/2,e.y=-2*Math.atan2(this.y,this.x),e.z=0):(e.x=Math.asin(2*(this.w*this.x-this.y*this.z)),e.y=Math.atan2(2*this.w*this.y+2*this.z*this.x,1-2*(this.x*this.x+this.y*this.y)),e.z=Math.atan2(2*this.w*this.z+2*this.x*this.y,1-2*(this.z*this.z+this.x*this.x))),e.x*=i.RAD2DEG,e.y*=i.RAD2DEG,e.z*=i.RAD2DEG,e.x=a.Scalar.Repeat(e.x,360),e.y=a.Scalar.Repeat(e.y,360),e.z=a.Scalar.Repeat(e.z,360),e}toString(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`}get length(){return Math.sqrt(this.lengthSquared)}get lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}getClassName(){return"Quaternion"}getHashCode(){let e=this.x||0;return e=397*e^(this.y||0),e=397*e^(this.z||0),e=397*e^(this.w||0),e}asArray(){return[this.x,this.y,this.z,this.w]}equals(e){return e&&this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w}clone(){return new c(this.x,this.y,this.z,this.w)}copyFrom(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}copyFromFloats(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this}set(e,t,r,n){return this.copyFromFloats(e,t,r,n)}setEuler(e,t,r){return c.RotationYawPitchRollToRef(t*i.DEG2RAD,e*i.DEG2RAD,r*i.DEG2RAD,this),this}add(e){return new c(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}addInPlace(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}subtract(e){return new c(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}scale(e){return new c(this.x*e,this.y*e,this.z*e,this.w*e)}scaleToRef(e,t){return t.x=this.x*e,t.y=this.y*e,t.z=this.z*e,t.w=this.w*e,this}scaleInPlace(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}scaleAndAddToRef(e,t){return t.x+=this.x*e,t.y+=this.y*e,t.z+=this.z*e,t.w+=this.w*e,this}multiply(e){const t=new c(0,0,0,1);return this.multiplyToRef(e,t),t}multiplyToRef(e,t){const r=this.x*e.w+this.y*e.z-this.z*e.y+this.w*e.x,n=-this.x*e.z+this.y*e.w+this.z*e.x+this.w*e.y,o=this.x*e.y-this.y*e.x+this.z*e.w+this.w*e.z,s=-this.x*e.x-this.y*e.y-this.z*e.z+this.w*e.w;return t.copyFromFloats(r,n,o,s),this}multiplyInPlace(e){return this.multiplyToRef(e,this),this}conjugateToRef(e){return e.copyFromFloats(-this.x,-this.y,-this.z,this.w),this}conjugateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this}conjugate(){return new c(-this.x,-this.y,-this.z,this.w)}normalize(){const e=1/this.length;return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}angleAxis(e,t){if(0===t.lengthSquared())return c.Identity;const r=c.Identity;let n=e*i.DEG2RAD;n*=.5;let o=t.normalize();return o=t.scaleInPlace(Math.sin(n)),r.x=o.x,r.y=o.y,r.z=o.z,r.w=Math.cos(n),r.normalize()}toRotationMatrix(e){return n.Matrix.FromQuaternionToRef(this,e),this}fromRotationMatrix(e){return c.FromRotationMatrixToRef(e,this),this}}t.Quaternion=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix=void 0;const n=r(6),o=r(13),s=r(10),i=r(20);class a{constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}get m(){return this._m}static get IdentityReadOnly(){return a._identityReadOnly}static FromArray(e,t=0){const r=new a;return a.FromArrayToRef(e,t,r),r}static FromArrayToRef(e,t,r){for(let n=0;n<16;n++)r._m[n]=e[n+t];r._markAsUpdated()}static FromFloatArrayToRefScaled(e,t,r,n){for(let o=0;o<16;o++)n._m[o]=e[o+t]*r;n._markAsUpdated()}static FromValuesToRef(e,t,r,n,o,s,i,a,c,d,u,l,p,h,f,m,y){const g=y._m;g[0]=e,g[1]=t,g[2]=r,g[3]=n,g[4]=o,g[5]=s,g[6]=i,g[7]=a,g[8]=c,g[9]=d,g[10]=u,g[11]=l,g[12]=p,g[13]=h,g[14]=f,g[15]=m,y._markAsUpdated()}static FromValues(e,t,r,n,o,s,i,c,d,u,l,p,h,f,m,y){const g=new a,v=g._m;return v[0]=e,v[1]=t,v[2]=r,v[3]=n,v[4]=o,v[5]=s,v[6]=i,v[7]=c,v[8]=d,v[9]=u,v[10]=l,v[11]=p,v[12]=h,v[13]=f,v[14]=m,v[15]=y,g._markAsUpdated(),g}static Compose(e,t,r){const n=new a;return a.ComposeToRef(e,t,r,n),n}static ComposeToRef(e,t,r,n){a.ScalingToRef(e.x,e.y,e.z,s.MathTmp.Matrix[1]),t.toRotationMatrix(s.MathTmp.Matrix[0]),s.MathTmp.Matrix[1].multiplyToRef(s.MathTmp.Matrix[0],n),n.setTranslation(r)}static Identity(){const e=a.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return e._updateIdentityStatus(!0),e}static IdentityToRef(e){a.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(!0)}static Zero(){const e=a.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return e._updateIdentityStatus(!1),e}static RotationX(e){const t=new a;return a.RotationXToRef(e,t),t}static Invert(e){const t=new a;return e.invertToRef(t),t}static RotationXToRef(e,t){const r=Math.sin(e),n=Math.cos(e);a.FromValuesToRef(1,0,0,0,0,n,r,0,0,-r,n,0,0,0,0,1,t),t._updateIdentityStatus(1===n&&0===r)}static RotationY(e){const t=new a;return a.RotationYToRef(e,t),t}static RotationYToRef(e,t){const r=Math.sin(e),n=Math.cos(e);a.FromValuesToRef(n,0,-r,0,0,1,0,0,r,0,n,0,0,0,0,1,t),t._updateIdentityStatus(1===n&&0===r)}static RotationZ(e){const t=new a;return a.RotationZToRef(e,t),t}static RotationZToRef(e,t){const r=Math.sin(e),n=Math.cos(e);a.FromValuesToRef(n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(1===n&&0===r)}static RotationAxis(e,t){const r=new a;return a.RotationAxisToRef(e,t,r),r}static RotationAxisToRef(e,t,r){const n=Math.sin(-t),o=Math.cos(-t),s=1-o;e.normalize();const i=r._m;i[0]=e.x*e.x*s+o,i[1]=e.x*e.y*s-e.z*n,i[2]=e.x*e.z*s+e.y*n,i[3]=0,i[4]=e.y*e.x*s+e.z*n,i[5]=e.y*e.y*s+o,i[6]=e.y*e.z*s-e.x*n,i[7]=0,i[8]=e.z*e.x*s-e.y*n,i[9]=e.z*e.y*s+e.x*n,i[10]=e.z*e.z*s+o,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,r._markAsUpdated()}static RotationYawPitchRoll(e,t,r){const n=new a;return a.RotationYawPitchRollToRef(e,t,r,n),n}static RotationYawPitchRollToRef(e,t,r,n){o.Quaternion.RotationYawPitchRollToRef(e,t,r,s.MathTmp.Quaternion[0]),s.MathTmp.Quaternion[0].toRotationMatrix(n)}static Scaling(e,t,r){const n=new a;return a.ScalingToRef(e,t,r,n),n}static ScalingToRef(e,t,r,n){a.FromValuesToRef(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1,n),n._updateIdentityStatus(1===e&&1===t&&1===r)}static Translation(e,t,r){const n=new a;return a.TranslationToRef(e,t,r,n),n}static TranslationToRef(e,t,r,n){a.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1,n),n._updateIdentityStatus(0===e&&0===t&&0===r)}static Lerp(e,t,r){const n=new a;return a.LerpToRef(e,t,r,n),n}static LerpToRef(e,t,r,n){for(let o=0;o<16;o++)n._m[o]=e._m[o]*(1-r)+t._m[o]*r;n._markAsUpdated()}static DecomposeLerp(e,t,r){const n=new a;return a.DecomposeLerpToRef(e,t,r,n),n}static DecomposeLerpToRef(e,t,r,i){const c=s.MathTmp.Vector3[0],d=s.MathTmp.Quaternion[0],u=s.MathTmp.Vector3[1];e.decompose(c,d,u);const l=s.MathTmp.Vector3[2],p=s.MathTmp.Quaternion[1],h=s.MathTmp.Vector3[3];t.decompose(l,p,h);const f=s.MathTmp.Vector3[4];n.Vector3.LerpToRef(c,l,r,f);const m=s.MathTmp.Quaternion[2];o.Quaternion.SlerpToRef(d,p,r,m);const y=s.MathTmp.Vector3[5];n.Vector3.LerpToRef(u,h,r,y),a.ComposeToRef(f,m,y,i)}static LookAtLH(e,t,r){const n=new a;return a.LookAtLHToRef(e,t,r,n),n}static LookAtLHToRef(e,t,r,o){const i=s.MathTmp.Vector3[0],c=s.MathTmp.Vector3[1],d=s.MathTmp.Vector3[2];t.subtractToRef(e,d),d.normalize(),n.Vector3.CrossToRef(r,d,i);const u=i.lengthSquared();0===u?i.x=1:i.normalizeFromLength(Math.sqrt(u)),n.Vector3.CrossToRef(d,i,c),c.normalize();const l=-n.Vector3.Dot(i,e),p=-n.Vector3.Dot(c,e),h=-n.Vector3.Dot(d,e);a.FromValuesToRef(i.x,c.x,d.x,0,i.y,c.y,d.y,0,i.z,c.z,d.z,0,l,p,h,1,o)}static LookAtRH(e,t,r){const n=new a;return a.LookAtRHToRef(e,t,r,n),n}static LookAtRHToRef(e,t,r,o){const i=s.MathTmp.Vector3[0],c=s.MathTmp.Vector3[1],d=s.MathTmp.Vector3[2];e.subtractToRef(t,d),d.normalize(),n.Vector3.CrossToRef(r,d,i);const u=i.lengthSquared();0===u?i.x=1:i.normalizeFromLength(Math.sqrt(u)),n.Vector3.CrossToRef(d,i,c),c.normalize();const l=-n.Vector3.Dot(i,e),p=-n.Vector3.Dot(c,e),h=-n.Vector3.Dot(d,e);a.FromValuesToRef(i.x,c.x,d.x,0,i.y,c.y,d.y,0,i.z,c.z,d.z,0,l,p,h,1,o)}static OrthoLH(e,t,r,n){const o=new a;return a.OrthoLHToRef(e,t,r,n,o),o}static OrthoLHToRef(e,t,r,n,o){const s=2/e,i=2/t,c=2/(n-r),d=-(n+r)/(n-r);a.FromValuesToRef(s,0,0,0,0,i,0,0,0,0,c,0,0,0,d,1,o),o._updateIdentityStatus(1===s&&1===i&&1===c&&0===d)}static OrthoOffCenterLH(e,t,r,n,o,s){const i=new a;return a.OrthoOffCenterLHToRef(e,t,r,n,o,s,i),i}static OrthoOffCenterLHToRef(e,t,r,n,o,s,i){const c=2/(t-e),d=2/(n-r),u=2/(s-o),l=-(s+o)/(s-o),p=(e+t)/(e-t),h=(n+r)/(r-n);a.FromValuesToRef(c,0,0,0,0,d,0,0,0,0,u,0,p,h,l,1,i),i._markAsUpdated()}static OrthoOffCenterRH(e,t,r,n,o,s){const i=new a;return a.OrthoOffCenterRHToRef(e,t,r,n,o,s,i),i}static OrthoOffCenterRHToRef(e,t,r,n,o,s,i){a.OrthoOffCenterLHToRef(e,t,r,n,o,s,i),i._m[10]*=-1}static PerspectiveLH(e,t,r,n){const o=new a,s=2*r/e,i=2*r/t,c=(n+r)/(n-r),d=-2*n*r/(n-r);return a.FromValuesToRef(s,0,0,0,0,i,0,0,0,0,c,1,0,0,d,0,o),o._updateIdentityStatus(!1),o}static PerspectiveFovLH(e,t,r,n){const o=new a;return a.PerspectiveFovLHToRef(e,t,r,n,o),o}static PerspectiveFovLHToRef(e,t,r,n,o,s=!0){const i=r,c=n,d=1/Math.tan(.5*e),u=s?d/t:d,l=s?d:d*t,p=(c+i)/(c-i),h=-2*c*i/(c-i);a.FromValuesToRef(u,0,0,0,0,l,0,0,0,0,p,1,0,0,h,0,o),o._updateIdentityStatus(!1)}static PerspectiveFovRH(e,t,r,n){const o=new a;return a.PerspectiveFovRHToRef(e,t,r,n,o),o}static PerspectiveFovRHToRef(e,t,r,n,o,s=!0){const i=r,c=n,d=1/Math.tan(.5*e),u=s?d/t:d,l=s?d:d*t,p=-(c+i)/(c-i),h=-2*c*i/(c-i);a.FromValuesToRef(u,0,0,0,0,l,0,0,0,0,p,-1,0,0,h,0,o),o._updateIdentityStatus(!1)}static PerspectiveFovWebVRToRef(e,t,r,n,o=!1){const s=o?-1:1,i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),c=Math.tan(e.leftDegrees*Math.PI/180),d=Math.tan(e.rightDegrees*Math.PI/180),u=2/(c+d),l=2/(i+a),p=n._m;p[0]=u,p[1]=p[2]=p[3]=p[4]=0,p[5]=l,p[6]=p[7]=0,p[8]=(c-d)*u*.5,p[9]=-(i-a)*l*.5,p[10]=-r/(t-r),p[11]=1*s,p[12]=p[13]=p[15]=0,p[14]=-2*r*t/(r-t),n._markAsUpdated()}static GetAsMatrix2x2(e){return[e._m[0],e._m[1],e._m[4],e._m[5]]}static GetAsMatrix3x3(e){return[e._m[0],e._m[1],e._m[2],e._m[4],e._m[5],e._m[6],e._m[8],e._m[9],e._m[10]]}static Transpose(e){const t=new a;return a.TransposeToRef(e,t),t}static TransposeToRef(e,t){const r=t._m,n=e._m;r[0]=n[0],r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=n[1],r[5]=n[5],r[6]=n[9],r[7]=n[13],r[8]=n[2],r[9]=n[6],r[10]=n[10],r[11]=n[14],r[12]=n[3],r[13]=n[7],r[14]=n[11],r[15]=n[15],t._updateIdentityStatus(e._isIdentity,e._isIdentityDirty)}static Reflection(e){const t=new a;return a.ReflectionToRef(e,t),t}static ReflectionToRef(e,t){e.normalize();const r=e.normal.x,n=e.normal.y,o=e.normal.z,s=-2*r,i=-2*n,c=-2*o;a.FromValuesToRef(s*r+1,i*r,c*r,0,s*n,i*n+1,c*n,0,s*o,i*o,c*o+1,0,s*e.d,i*e.d,c*e.d,1,t)}static FromXYZAxesToRef(e,t,r,n){a.FromValuesToRef(e.x,e.y,e.z,0,t.x,t.y,t.z,0,r.x,r.y,r.z,0,0,0,0,1,n)}static FromQuaternionToRef(e,t){const r=e.x*e.x,n=e.y*e.y,o=e.z*e.z,s=e.x*e.y,i=e.z*e.w,a=e.z*e.x,c=e.y*e.w,d=e.y*e.z,u=e.x*e.w;t._m[0]=1-2*(n+o),t._m[1]=2*(s+i),t._m[2]=2*(a-c),t._m[3]=0,t._m[4]=2*(s-i),t._m[5]=1-2*(o+r),t._m[6]=2*(d+u),t._m[7]=0,t._m[8]=2*(a+c),t._m[9]=2*(d-u),t._m[10]=1-2*(n+r),t._m[11]=0,t._m[12]=0,t._m[13]=0,t._m[14]=0,t._m[15]=1,t._markAsUpdated()}_markAsUpdated(){this.updateFlag=a._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const e=this._m;this._isIdentity=1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const e=this._m,t=e[0],r=e[1],n=e[2],o=e[3],s=e[4],i=e[5],a=e[6],c=e[7],d=e[8],u=e[9],l=e[10],p=e[11],h=e[12],f=e[13],m=e[14],y=e[15],g=l*y-m*p,v=u*y-f*p,b=u*m-f*l,T=d*y-h*p,E=d*m-l*h,R=d*f-h*u;return t*+(i*g-a*v+c*b)+r*-(s*g-a*T+c*E)+n*+(s*v-i*T+c*R)+o*-(s*b-i*E+a*R)}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return a.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(e){const t=new a;return this.addToRef(e,t),t}addToRef(e,t){for(let r=0;r<16;r++)t._m[r]=this._m[r]+e._m[r];return t._markAsUpdated(),this}addToSelf(e){for(let t=0;t<16;t++)this._m[t]+=e._m[t];return this._markAsUpdated(),this}invertToRef(e){if(!0===this._isIdentity)return a.IdentityToRef(e),this;const t=this._m,r=t[0],n=t[1],o=t[2],s=t[3],i=t[4],c=t[5],d=t[6],u=t[7],l=t[8],p=t[9],h=t[10],f=t[11],m=t[12],y=t[13],g=t[14],v=t[15],b=h*v-g*f,T=p*v-y*f,E=p*g-y*h,R=l*v-m*f,_=l*g-h*m,w=l*y-m*p,S=+(c*b-d*T+u*E),I=-(i*b-d*R+u*_),x=+(i*T-c*R+u*w),N=-(i*E-c*_+d*w),A=r*S+n*I+o*x+s*N;if(0===A)return e.copyFrom(this),this;const O=1/A,P=d*v-g*u,M=c*v-y*u,C=c*g-y*d,k=i*v-m*u,D=i*g-m*d,z=i*y-m*c,F=d*f-h*u,U=c*f-p*u,J=c*h-p*d,L=i*f-l*u,q=i*h-l*d,B=i*p-l*c,j=-(n*b-o*T+s*E),W=+(r*b-o*R+s*_),V=-(r*T-n*R+s*w),G=+(r*E-n*_+o*w),H=+(n*P-o*M+s*C),Y=-(r*P-o*k+s*D),Q=+(r*M-n*k+s*z),Z=-(r*C-n*D+o*z),K=-(n*F-o*U+s*J),$=+(r*F-o*L+s*q),X=-(r*U-n*L+s*B),ee=+(r*J-n*q+o*B);return a.FromValuesToRef(S*O,j*O,H*O,K*O,I*O,W*O,Y*O,$*O,x*O,V*O,Q*O,X*O,N*O,G*O,Z*O,ee*O,e),this}addAtIndex(e,t){return this._m[e]+=t,this._markAsUpdated(),this}multiplyAtIndex(e,t){return this._m[e]*=t,this._markAsUpdated(),this}setTranslationFromFloats(e,t,r){return this._m[12]=e,this._m[13]=t,this._m[14]=r,this._markAsUpdated(),this}setTranslation(e){return this.setTranslationFromFloats(e.x,e.y,e.z)}getTranslation(){return new n.Vector3(this._m[12],this._m[13],this._m[14])}getTranslationToRef(e){return e.x=this._m[12],e.y=this._m[13],e.z=this._m[14],this}removeRotationAndScaling(){const e=this.m;return a.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e[12],e[13],e[14],e[15],this),this._updateIdentityStatus(0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]),this}multiply(e){const t=new a;return this.multiplyToRef(e,t),t}copyFrom(e){e.copyToArray(this._m);const t=e;return this._updateIdentityStatus(t._isIdentity,t._isIdentityDirty,t._isIdentity3x2,t._isIdentity3x2Dirty),this}copyToArray(e,t=0){for(let r=0;r<16;r++)e[t+r]=this._m[r];return this}multiplyToRef(e,t){return this._isIdentity?(t.copyFrom(e),this):e._isIdentity?(t.copyFrom(this),this):(this.multiplyToArray(e,t._m,0),t._markAsUpdated(),this)}multiplyToArray(e,t,r){const n=this._m,o=e.m,s=n[0],i=n[1],a=n[2],c=n[3],d=n[4],u=n[5],l=n[6],p=n[7],h=n[8],f=n[9],m=n[10],y=n[11],g=n[12],v=n[13],b=n[14],T=n[15],E=o[0],R=o[1],_=o[2],w=o[3],S=o[4],I=o[5],x=o[6],N=o[7],A=o[8],O=o[9],P=o[10],M=o[11],C=o[12],k=o[13],D=o[14],z=o[15];return t[r]=s*E+i*S+a*A+c*C,t[r+1]=s*R+i*I+a*O+c*k,t[r+2]=s*_+i*x+a*P+c*D,t[r+3]=s*w+i*N+a*M+c*z,t[r+4]=d*E+u*S+l*A+p*C,t[r+5]=d*R+u*I+l*O+p*k,t[r+6]=d*_+u*x+l*P+p*D,t[r+7]=d*w+u*N+l*M+p*z,t[r+8]=h*E+f*S+m*A+y*C,t[r+9]=h*R+f*I+m*O+y*k,t[r+10]=h*_+f*x+m*P+y*D,t[r+11]=h*w+f*N+m*M+y*z,t[r+12]=g*E+v*S+b*A+T*C,t[r+13]=g*R+v*I+b*O+T*k,t[r+14]=g*_+v*x+b*P+T*D,t[r+15]=g*w+v*N+b*M+T*z,this}equals(e){const t=e;if(!t)return!1;if((this._isIdentity||t._isIdentity)&&!this._isIdentityDirty&&!t._isIdentityDirty)return this._isIdentity&&t._isIdentity;const r=this.m,n=t.m;return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]&&r[4]===n[4]&&r[5]===n[5]&&r[6]===n[6]&&r[7]===n[7]&&r[8]===n[8]&&r[9]===n[9]&&r[10]===n[10]&&r[11]===n[11]&&r[12]===n[12]&&r[13]===n[13]&&r[14]===n[14]&&r[15]===n[15]}clone(){const e=new a;return e.copyFrom(this),e}getClassName(){return"Matrix"}getHashCode(){let e=this._m[0]||0;for(let t=1;t<16;t++)e=397*e^(this._m[t]||0);return e}decompose(e,t,r){if(this._isIdentity)return r&&r.setAll(0),e&&e.setAll(1),t&&t.copyFromFloats(0,0,0,1),!0;const n=this._m;r&&r.copyFromFloats(n[12],n[13],n[14]);const i=e||s.MathTmp.Vector3[0];if(i.x=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),i.y=Math.sqrt(n[4]*n[4]+n[5]*n[5]+n[6]*n[6]),i.z=Math.sqrt(n[8]*n[8]+n[9]*n[9]+n[10]*n[10]),this.determinant()<=0&&(i.y*=-1),0===i.x||0===i.y||0===i.z)return t&&t.copyFromFloats(0,0,0,1),!1;if(t){const e=1/i.x,r=1/i.y,c=1/i.z;a.FromValuesToRef(n[0]*e,n[1]*e,n[2]*e,0,n[4]*r,n[5]*r,n[6]*r,0,n[8]*c,n[9]*c,n[10]*c,0,0,0,0,1,s.MathTmp.Matrix[0]),o.Quaternion.FromRotationMatrixToRef(s.MathTmp.Matrix[0],t)}return!0}getRow(e){if(e<0||e>3)return null;const t=4*e;return new i.Vector4(this._m[t+0],this._m[t+1],this._m[t+2],this._m[t+3])}setRow(e,t){return this.setRowFromFloats(e,t.x,t.y,t.z,t.w)}transpose(){return a.Transpose(this)}transposeToRef(e){return a.TransposeToRef(this,e),this}setRowFromFloats(e,t,r,n,o){if(e<0||e>3)return this;const s=4*e;return this._m[s+0]=t,this._m[s+1]=r,this._m[s+2]=n,this._m[s+3]=o,this._markAsUpdated(),this}scale(e){const t=new a;return this.scaleToRef(e,t),t}scaleToRef(e,t){for(let r=0;r<16;r++)t._m[r]=this._m[r]*e;return t._markAsUpdated(),this}scaleAndAddToRef(e,t){for(let r=0;r<16;r++)t._m[r]+=this._m[r]*e;return t._markAsUpdated(),this}toNormalMatrix(e){const t=s.MathTmp.Matrix[0];this.invertToRef(t),t.transposeToRef(e);const r=e._m;a.FromValuesToRef(r[0],r[1],r[2],0,r[4],r[5],r[6],0,r[8],r[9],r[10],0,0,0,0,1,e)}getRotationMatrix(){const e=new a;return this.getRotationMatrixToRef(e),e}getRotationMatrixToRef(e){const t=s.MathTmp.Vector3[0];if(!this.decompose(t))return a.IdentityToRef(e),this;const r=this._m,n=1/t.x,o=1/t.y,i=1/t.z;return a.FromValuesToRef(r[0]*n,r[1]*n,r[2]*n,0,r[4]*o,r[5]*o,r[6]*o,0,r[8]*i,r[9]*i,r[10]*i,0,0,0,0,1,e),this}toggleModelMatrixHandInPlace(){const e=this._m;e[2]*=-1,e[6]*=-1,e[8]*=-1,e[9]*=-1,e[14]*=-1,this._markAsUpdated()}toggleProjectionMatrixHandInPlace(){const e=this._m;e[8]*=-1,e[9]*=-1,e[10]*=-1,e[11]*=-1,this._markAsUpdated()}_updateIdentityStatus(e,t=!1,r=!1,n=!0){this.updateFlag=a._updateFlagSeed++,this._isIdentity=e,this._isIdentity3x2=e||r,this._isIdentityDirty=!this._isIdentity&&t,this._isIdentity3x2Dirty=!this._isIdentity3x2&&n}}t.Matrix=a,a._updateFlagSeed=0,a._identityReadOnly=a.Identity()},function(e,t,r){"use strict";r.r(t),t.default=function(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map((function(e){e(r)})),(n=e.get("*"))&&n.slice().map((function(e){e(t,r)}))}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;const n=r(4),o=r(7);class s{constructor(e=0,t=0){this.x=e,this.y=t}static Zero(){return new s(0,0)}static One(){return new s(1,1)}static Add(e,t){return new s(e.x,e.y).addInPlace(t)}static FromArray(e,t=0){return new s(e[t],e[t+1])}static FromArrayToRef(e,t,r){r.x=e[t],r.y=e[t+1]}static CatmullRom(e,t,r,n,o){const i=o*o,a=o*i,c=.5*(2*t.x+(-e.x+r.x)*o+(2*e.x-5*t.x+4*r.x-n.x)*i+(-e.x+3*t.x-3*r.x+n.x)*a),d=.5*(2*t.y+(-e.y+r.y)*o+(2*e.y-5*t.y+4*r.y-n.y)*i+(-e.y+3*t.y-3*r.y+n.y)*a);return new s(c,d)}static Clamp(e,t,r){let n=e.x;n=n>r.x?r.x:n,n=n<t.x?t.x:n;let o=e.y;return o=o>r.y?r.y:o,o=o<t.y?t.y:o,new s(n,o)}static Hermite(e,t,r,n,o){const i=o*o,a=o*i,c=2*a-3*i+1,d=-2*a+3*i,u=a-2*i+o,l=a-i,p=e.x*c+r.x*d+t.x*u+n.x*l,h=e.y*c+r.y*d+t.y*u+n.y*l;return new s(p,h)}static Lerp(e,t,r){const n=e.x+(t.x-e.x)*r,o=e.y+(t.y-e.y)*r;return new s(n,o)}static Dot(e,t){return e.x*t.x+e.y*t.y}static Normalize(e){const t=new s(e.x,e.y);return t.normalize(),t}static Minimize(e,t){const r=e.x<t.x?e.x:t.x,n=e.y<t.y?e.y:t.y;return new s(r,n)}static Maximize(e,t){const r=e.x>t.x?e.x:t.x,n=e.y>t.y?e.y:t.y;return new s(r,n)}static Transform(e,t){const r=s.Zero();return s.TransformToRef(e,t,r),r}static TransformToRef(e,t,r){const n=t.m,o=e.x*n[0]+e.y*n[4]+n[12],s=e.x*n[1]+e.y*n[5]+n[13];r.x=o,r.y=s}static PointInTriangle(e,t,r,n){const o=.5*(-r.y*n.x+t.y*(-r.x+n.x)+t.x*(r.y-n.y)+r.x*n.y),s=o<0?-1:1,i=(t.y*n.x-t.x*n.y+(n.y-t.y)*e.x+(t.x-n.x)*e.y)*s,a=(t.x*r.y-t.y*r.x+(t.y-r.y)*e.x+(r.x-t.x)*e.y)*s;return i>0&&a>0&&i+a<2*o*s}static Distance(e,t){return Math.sqrt(s.DistanceSquared(e,t))}static DistanceSquared(e,t){const r=e.x-t.x,n=e.y-t.y;return r*r+n*n}static Center(e,t){const r=s.Add(e,t);return r.scaleInPlace(.5),r}static DistanceOfPointFromSegment(e,t,r){const n=s.DistanceSquared(t,r);if(0===n)return s.Distance(e,t);const o=r.subtract(t),i=Math.max(0,Math.min(1,s.Dot(e.subtract(t),o)/n)),a=t.add(o.multiplyByFloats(i,i));return s.Distance(e,a)}toString(){return"{X: "+this.x+" Y:"+this.y+"}"}getClassName(){return"Vector2"}getHashCode(){let e=this.x||0;return e=397*e^(this.y||0),e}toArray(e,t=0){return e[t]=this.x,e[t+1]=this.y,this}asArray(){const e=new Array;return this.toArray(e,0),e}copyFrom(e){return this.x=e.x,this.y=e.y,this}copyFromFloats(e,t){return this.x=e,this.y=t,this}set(e,t){return this.copyFromFloats(e,t)}add(e){return new s(this.x+e.x,this.y+e.y)}addToRef(e,t){return t.x=this.x+e.x,t.y=this.y+e.y,this}addInPlace(e){return this.x+=e.x,this.y+=e.y,this}addVector3(e){return new s(this.x+e.x,this.y+e.y)}subtract(e){return new s(this.x-e.x,this.y-e.y)}subtractToRef(e,t){return t.x=this.x-e.x,t.y=this.y-e.y,this}subtractInPlace(e){return this.x-=e.x,this.y-=e.y,this}multiplyInPlace(e){return this.x*=e.x,this.y*=e.y,this}multiply(e){return new s(this.x*e.x,this.y*e.y)}multiplyToRef(e,t){return t.x=this.x*e.x,t.y=this.y*e.y,this}multiplyByFloats(e,t){return new s(this.x*e,this.y*t)}divide(e){return new s(this.x/e.x,this.y/e.y)}divideToRef(e,t){return t.x=this.x/e.x,t.y=this.y/e.y,this}divideInPlace(e){return this.divideToRef(e,this)}negate(){return new s(-this.x,-this.y)}scaleInPlace(e){return this.x*=e,this.y*=e,this}scale(e){const t=new s(0,0);return this.scaleToRef(e,t),t}scaleToRef(e,t){return t.x=this.x*e,t.y=this.y*e,this}scaleAndAddToRef(e,t){return t.x+=this.x*e,t.y+=this.y*e,this}equals(e){return e&&this.x===e.x&&this.y===e.y}equalsWithEpsilon(e,t=n.Epsilon){return e&&o.Scalar.WithinEpsilon(this.x,e.x,t)&&o.Scalar.WithinEpsilon(this.y,e.y,t)}floor(){return new s(Math.floor(this.x),Math.floor(this.y))}fract(){return new s(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){const e=this.length();if(0===e)return this;const t=1/e;return this.x*=t,this.y*=t,this}clone(){return new s(this.x,this.y)}}t.Vector2=s},function(e,t){e.exports=n;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function o(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=o;var s={},i={};function a(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=i[e])?n:(r=d(e,(0|e)<0?-1:0,!0),o&&(i[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=s[e])?n:(r=d(e,e<0?-1:0,!1),o&&(s[e]=r),r)}function c(e,t){if(isNaN(e))return t?v:g;if(t){if(e<0)return v;if(e>=f)return _}else{if(e<=-m)return w;if(e+1>=m)return R}return e<0?c(-e,t).neg():d(e%h|0,e/h|0,t)}function d(e,t,r){return new n(e,t,r)}n.fromInt=a,n.fromNumber=c,n.fromBits=d;var u=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var o=c(u(r,8)),s=g,i=0;i<e.length;i+=8){var a=Math.min(8,e.length-i),d=parseInt(e.substring(i,i+a),r);if(a<8){var p=c(u(r,a));s=s.mul(p).add(c(d))}else s=(s=s.mul(o)).add(c(d))}return s.unsigned=t,s}function p(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?l(e,t):d(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=p;var h=4294967296,f=h*h,m=f/2,y=a(1<<24),g=a(0);n.ZERO=g;var v=a(0,!0);n.UZERO=v;var b=a(1);n.ONE=b;var T=a(1,!0);n.UONE=T;var E=a(-1);n.NEG_ONE=E;var R=d(-1,2147483647,!1);n.MAX_VALUE=R;var _=d(-1,-1,!0);n.MAX_UNSIGNED_VALUE=_;var w=d(0,-2147483648,!1);n.MIN_VALUE=w;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var t=c(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=c(u(e,6),this.unsigned),s=this,i="";;){var a=s.div(o),d=(s.sub(a.mul(o)).toInt()>>>0).toString(e);if((s=a).isZero())return d+i;for(;d.length<6;)d="0"+d;i=""+d+i}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(e){return o(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(o(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(b)},S.neg=S.negate,S.add=function(e){o(e)||(e=p(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,s=65535&this.low,i=e.high>>>16,a=65535&e.high,c=e.low>>>16,u=0,l=0,h=0,f=0;return h+=(f+=s+(65535&e.low))>>>16,l+=(h+=n+c)>>>16,u+=(l+=r+a)>>>16,u+=t+i,d((h&=65535)<<16|(f&=65535),(u&=65535)<<16|(l&=65535),this.unsigned)},S.subtract=function(e){return o(e)||(e=p(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return g;if(o(e)||(e=p(e)),r)return d(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(w))return e.isOdd()?w:g;if(e.eq(w))return this.isOdd()?w:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,s=this.low>>>16,i=65535&this.low,a=e.high>>>16,u=65535&e.high,l=e.low>>>16,h=65535&e.low,f=0,m=0,v=0,b=0;return v+=(b+=i*h)>>>16,m+=(v+=s*h)>>>16,v&=65535,m+=(v+=i*l)>>>16,f+=(m+=n*h)>>>16,m&=65535,f+=(m+=s*l)>>>16,m&=65535,f+=(m+=i*u)>>>16,f+=t*h+n*l+s*u+i*a,d((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(o(e)||(e=p(e)),e.isZero())throw Error("division by zero");var t,n,s;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?d((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return T;s=v}else{if(this.eq(w))return e.eq(b)||e.eq(E)?w:e.eq(w)?b:(t=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?b:E:(n=this.sub(e.mul(t)),s=t.add(n.div(e)));if(e.eq(w))return this.unsigned?v:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=g}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),a=i<=48?1:u(2,i-48),l=c(t),h=l.mul(e);h.isNegative()||h.gt(n);)h=(l=c(t-=a,this.unsigned)).mul(e);l.isZero()&&(l=b),s=s.add(l),n=n.sub(h)}return s},S.div=S.divide,S.modulo=function(e){return o(e)||(e=p(e)),r?d((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return d(~this.low,~this.high,this.unsigned)},S.and=function(e){return o(e)||(e=p(e)),d(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return o(e)||(e=p(e)),d(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return o(e)||(e=p(e)),d(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?d(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):d(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?d(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):d(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(o(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?d(this.low>>>e|t<<32-e,t>>>e,this.unsigned):d(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?d(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:d(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,r){"use strict";e.exports=l;var n,o=r(8),s=o.LongBits,i=o.base64,a=o.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function d(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function l(){this.len=0,this.head=new c(d,0,0),this.tail=this.head,this.states=null}var p=function(){return o.Buffer?function(){return(l.create=function(){return new n})()}:function(){return new l}};function h(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}l.create=p(),l.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(l.alloc=o.pool(l.alloc,o.Array.prototype.subarray)),l.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},l.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},l.prototype.int32=function(e){return e<0?this._push(m,10,s.fromNumber(e)):this.uint32(e)},l.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},l.prototype.uint64=function(e){var t=s.from(e);return this._push(m,t.length(),t)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(m,t.length(),t)},l.prototype.bool=function(e){return this._push(h,1,e?1:0)},l.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(e){var t=s.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},l.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var g=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};l.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(o.isString(e)){var r=l.alloc(t=i.length(e));i.decode(e,r,0),e=r}return this.uint32(t)._push(g,t,e)},l.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(h,1,0)},l.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(d,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(d,0,0),this.len=0),this},l.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},l.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},l._configure=function(e){n=e,l.create=p(),n._configure()}},function(e,t,r){"use strict";e.exports=c;var n,o=r(8),s=o.LongBits,i=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var d,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},l=function(){return o.Buffer?function(e){return(c.create=function(e){return o.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function p(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new s(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=(d=4294967295,function(){if(d=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return d;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return d}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=l(),n._configure();var t=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector4=void 0;const n=r(4),o=r(7),s=r(6);class i{constructor(e,t,r,n){this.x=e,this.y=t,this.z=r,this.w=n}static Add(e,t){return new i(e.x,e.y,e.z,e.w).addInPlace(t)}static FromArray(e,t=0){return new i(e[t],e[t+1],e[t+2],e[t+3])}static FromArrayToRef(e,t,r){r.x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3]}static FromFloatArrayToRef(e,t,r){i.FromArrayToRef(e,t,r)}static FromFloatsToRef(e,t,r,n,o){o.x=e,o.y=t,o.z=r,o.w=n}static Zero(){return new i(0,0,0,0)}static One(){return new i(1,1,1,1)}static Normalize(e){const t=i.Zero();return i.NormalizeToRef(e,t),t}static NormalizeToRef(e,t){t.copyFrom(e),t.normalize()}static Minimize(e,t){const r=new i(e.x,e.y,e.z,e.w);return r.minimizeInPlace(t),r}static Maximize(e,t){const r=new i(e.x,e.y,e.z,e.w);return r.maximizeInPlace(t),r}static Distance(e,t){return Math.sqrt(i.DistanceSquared(e,t))}static DistanceSquared(e,t){const r=e.x-t.x,n=e.y-t.y,o=e.z-t.z,s=e.w-t.w;return r*r+n*n+o*o+s*s}static Center(e,t){const r=i.Add(e,t);return r.scaleInPlace(.5),r}static TransformNormal(e,t){const r=i.Zero();return i.TransformNormalToRef(e,t,r),r}static TransformNormalToRef(e,t,r){const n=t.m,o=e.x*n[0]+e.y*n[4]+e.z*n[8],s=e.x*n[1]+e.y*n[5]+e.z*n[9],i=e.x*n[2]+e.y*n[6]+e.z*n[10];r.x=o,r.y=s,r.z=i,r.w=e.w}static TransformNormalFromFloatsToRef(e,t,r,n,o,s){const i=o.m;s.x=e*i[0]+t*i[4]+r*i[8],s.y=e*i[1]+t*i[5]+r*i[9],s.z=e*i[2]+t*i[6]+r*i[10],s.w=n}toString(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"}getClassName(){return"Vector4"}getHashCode(){let e=this.x||0;return e=397*e^(this.y||0),e=397*e^(this.z||0),e=397*e^(this.w||0),e}asArray(){const e=new Array;return this.toArray(e,0),e}toArray(e,t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,this}addInPlace(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}add(e){return new i(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}addToRef(e,t){return t.x=this.x+e.x,t.y=this.y+e.y,t.z=this.z+e.z,t.w=this.w+e.w,this}subtractInPlace(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subtract(e){return new i(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}subtractToRef(e,t){return t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z,t.w=this.w-e.w,this}subtractFromFloats(e,t,r,n){return new i(this.x-e,this.y-t,this.z-r,this.w-n)}subtractFromFloatsToRef(e,t,r,n,o){return o.x=this.x-e,o.y=this.y-t,o.z=this.z-r,o.w=this.w-n,this}negate(){return new i(-this.x,-this.y,-this.z,-this.w)}scaleInPlace(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}scale(e){return new i(this.x*e,this.y*e,this.z*e,this.w*e)}scaleToRef(e,t){return t.x=this.x*e,t.y=this.y*e,t.z=this.z*e,t.w=this.w*e,this}scaleAndAddToRef(e,t){return t.x+=this.x*e,t.y+=this.y*e,t.z+=this.z*e,t.w+=this.w*e,this}equals(e){return e&&this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w}equalsWithEpsilon(e,t=n.Epsilon){return e&&o.Scalar.WithinEpsilon(this.x,e.x,t)&&o.Scalar.WithinEpsilon(this.y,e.y,t)&&o.Scalar.WithinEpsilon(this.z,e.z,t)&&o.Scalar.WithinEpsilon(this.w,e.w,t)}equalsToFloats(e,t,r,n){return this.x===e&&this.y===t&&this.z===r&&this.w===n}multiplyInPlace(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiply(e){return new i(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}multiplyToRef(e,t){return t.x=this.x*e.x,t.y=this.y*e.y,t.z=this.z*e.z,t.w=this.w*e.w,this}multiplyByFloats(e,t,r,n){return new i(this.x*e,this.y*t,this.z*r,this.w*n)}divide(e){return new i(this.x/e.x,this.y/e.y,this.z/e.z,this.w/e.w)}divideToRef(e,t){return t.x=this.x/e.x,t.y=this.y/e.y,t.z=this.z/e.z,t.w=this.w/e.w,this}divideInPlace(e){return this.divideToRef(e,this)}minimizeInPlace(e){return e.x<this.x&&(this.x=e.x),e.y<this.y&&(this.y=e.y),e.z<this.z&&(this.z=e.z),e.w<this.w&&(this.w=e.w),this}maximizeInPlace(e){return e.x>this.x&&(this.x=e.x),e.y>this.y&&(this.y=e.y),e.z>this.z&&(this.z=e.z),e.w>this.w&&(this.w=e.w),this}floor(){return new i(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new i(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){const e=this.length();return 0===e?this:this.scaleInPlace(1/e)}toVector3(){return new s.Vector3(this.x,this.y,this.z)}clone(){return new i(this.x,this.y,this.z,this.w)}copyFrom(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}copyFromFloats(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this}set(e,t,r,n){return this.copyFromFloats(e,t,r,n)}setAll(e){return this.x=this.y=this.z=this.w=e,this}}t.Vector4=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Angle=void 0;class n{constructor(e){this._radians=e,this._radians<0&&(this._radians+=2*Math.PI)}static BetweenTwoPoints(e,t){const r=t.subtract(e),o=Math.atan2(r.y,r.x);return new n(o)}static FromRadians(e){return new n(e)}static FromDegrees(e){return new n(e*Math.PI/180)}degrees(){return 180*this._radians/Math.PI}radians(){return this._radians}}t.Angle=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Arc2=void 0;const n=r(21),o=r(16),s=r(4);t.Arc2=class{constructor(e,t,r){this.startPoint=e,this.midPoint=t,this.endPoint=r;const i=Math.pow(t.x,2)+Math.pow(t.y,2),a=(Math.pow(e.x,2)+Math.pow(e.y,2)-i)/2,c=(i-Math.pow(r.x,2)-Math.pow(r.y,2))/2,d=(e.x-t.x)*(t.y-r.y)-(t.x-r.x)*(e.y-t.y);this.centerPoint=new o.Vector2((a*(t.y-r.y)-c*(e.y-t.y))/d,((e.x-t.x)*c-(t.x-r.x)*a)/d),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=n.Angle.BetweenTwoPoints(this.centerPoint,this.startPoint);const u=this.startAngle.degrees();let l=n.Angle.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),p=n.Angle.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();l-u>180&&(l-=360),l-u<-180&&(l+=360),p-l>180&&(p-=360),p-l<-180&&(p+=360),this.orientation=l-u<0?s.Orientation.CW:s.Orientation.CCW,this.angle=n.Angle.FromDegrees(this.orientation===s.Orientation.CW?u-p:p-u)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Color4=void 0;const n=r(7),o=r(4);class s{constructor(e=0,t=0,r=0,n=1){this.r=e,this.g=t,this.b=r,this.a=n}static FromHexString(e){if("#"!==e.substring(0,1)||9!==e.length)return new s(0,0,0,0);const t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16),o=parseInt(e.substring(7,9),16);return s.FromInts(t,r,n,o)}static Lerp(e,t,r){const n=new s(0,0,0,0);return s.LerpToRef(e,t,r,n),n}static LerpToRef(e,t,r,n){n.r=e.r+(t.r-e.r)*r,n.g=e.g+(t.g-e.g)*r,n.b=e.b+(t.b-e.b)*r,n.a=e.a+(t.a-e.a)*r}static Red(){return new s(1,0,0,1)}static Green(){return new s(0,1,0,1)}static Blue(){return new s(0,0,1,1)}static Black(){return new s(0,0,0,1)}static White(){return new s(1,1,1,1)}static Purple(){return new s(.5,0,.5,1)}static Magenta(){return new s(1,0,1,1)}static Yellow(){return new s(1,1,0,1)}static Gray(){return new s(.5,.5,.5,1)}static Teal(){return new s(0,1,1,1)}static Clear(){return new s(0,0,0,0)}static FromColor3(e,t=1){return new s(e.r,e.g,e.b,t)}static FromArray(e,t=0){return new s(e[t],e[t+1],e[t+2],e[t+3])}static FromInts(e,t,r,n){return new s(e/255,t/255,r/255,n/255)}static CheckColors4(e,t){if(e.length===3*t){const t=[];for(let r=0;r<e.length;r+=3){const n=r/3*4;t[n]=e[r],t[n+1]=e[r+1],t[n+2]=e[r+2],t[n+3]=1}return t}return e}addInPlace(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this.a+=e.a,this}asArray(){const e=new Array;return this.toArray(e,0),e}toArray(e,t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e[t+3]=this.a,this}add(e){return new s(this.r+e.r,this.g+e.g,this.b+e.b,this.a+e.a)}subtract(e){return new s(this.r-e.r,this.g-e.g,this.b-e.b,this.a-e.a)}subtractToRef(e,t){return t.r=this.r-e.r,t.g=this.g-e.g,t.b=this.b-e.b,t.a=this.a-e.a,this}scale(e){return new s(this.r*e,this.g*e,this.b*e,this.a*e)}scaleToRef(e,t){return t.r=this.r*e,t.g=this.g*e,t.b=this.b*e,t.a=this.a*e,this}scaleAndAddToRef(e,t){return t.r+=this.r*e,t.g+=this.g*e,t.b+=this.b*e,t.a+=this.a*e,this}clampToRef(e=0,t=1,r){return r.r=n.Scalar.Clamp(this.r,e,t),r.g=n.Scalar.Clamp(this.g,e,t),r.b=n.Scalar.Clamp(this.b,e,t),r.a=n.Scalar.Clamp(this.a,e,t),this}multiply(e){return new s(this.r*e.r,this.g*e.g,this.b*e.b,this.a*e.a)}multiplyToRef(e,t){return t.r=this.r*e.r,t.g=this.g*e.g,t.b=this.b*e.b,t.a=this.a*e.a,t}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"}getClassName(){return"Color4"}getHashCode(){let e=this.r||0;return e=397*e^(this.g||0),e=397*e^(this.b||0),e=397*e^(this.a||0),e}clone(){return new s(this.r,this.g,this.b,this.a)}copyFrom(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}copyFromFloats(e,t,r,n){return this.r=e,this.g=t,this.b=r,this.a=n,this}set(e,t,r,n){return this.copyFromFloats(e,t,r,n)}toHexString(){const e=255*this.r|0,t=255*this.g|0,r=255*this.b|0,o=255*this.a|0;return"#"+n.Scalar.ToHex(e)+n.Scalar.ToHex(t)+n.Scalar.ToHex(r)+n.Scalar.ToHex(o)}toLinearSpace(){const e=new s;return this.toLinearSpaceToRef(e),e}toLinearSpaceToRef(e){return e.r=Math.pow(this.r,o.ToLinearSpace),e.g=Math.pow(this.g,o.ToLinearSpace),e.b=Math.pow(this.b,o.ToLinearSpace),e.a=this.a,this}toGammaSpace(){const e=new s;return this.toGammaSpaceToRef(e),e}toGammaSpaceToRef(e){return e.r=Math.pow(this.r,o.ToGammaSpace),e.g=Math.pow(this.g,o.ToGammaSpace),e.b=Math.pow(this.b,o.ToGammaSpace),e.a=this.a,this}}t.Color4=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plane=void 0;const n=r(6),o=r(14),s=r(10);class i{constructor(e,t,r,o){this.normal=new n.Vector3(e,t,r),this.d=o}static FromArray(e){return new i(e[0],e[1],e[2],e[3])}static FromPoints(e,t,r){const n=new i(0,0,0,0);return n.copyFromPoints(e,t,r),n}static FromPositionAndNormal(e,t){const r=new i(0,0,0,0);return t.normalize(),r.normal=t,r.d=-(t.x*e.x+t.y*e.y+t.z*e.z),r}static SignedDistanceToPlaneFromPositionAndNormal(e,t,r){const o=-(t.x*e.x+t.y*e.y+t.z*e.z);return n.Vector3.Dot(r,t)+o}asArray(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new i(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let e=this.normal.getHashCode();return e=397*e^(this.d||0),e}normalize(){const e=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let t=0;return 0!==e&&(t=1/e),this.normal.x*=t,this.normal.y*=t,this.normal.z*=t,this.d*=t,this}transform(e){const t=s.MathTmp.Matrix[0];o.Matrix.TransposeToRef(e,t);const r=t.m,n=this.normal.x,a=this.normal.y,c=this.normal.z,d=this.d,u=n*r[0]+a*r[1]+c*r[2]+d*r[3],l=n*r[4]+a*r[5]+c*r[6]+d*r[7],p=n*r[8]+a*r[9]+c*r[10]+d*r[11],h=n*r[12]+a*r[13]+c*r[14]+d*r[15];return new i(u,l,p,h)}dotCoordinate(e){return this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z+this.d}copyFromPoints(e,t,r){const n=t.x-e.x,o=t.y-e.y,s=t.z-e.z,i=r.x-e.x,a=r.y-e.y,c=r.z-e.z,d=o*c-s*a,u=s*i-n*c,l=n*a-o*i,p=Math.sqrt(d*d+u*u+l*l);let h;return h=0!==p?1/p:0,this.normal.x=d*h,this.normal.y=u*h,this.normal.z=l*h,this.d=-(this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z),this}isFrontFacingTo(e,t){return n.Vector3.Dot(this.normal,e)<=t}signedDistanceTo(e){return n.Vector3.Dot(e,this.normal)+this.d}}t.Plane=i},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(31),t),o(r(32),t),o(r(48),t)},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebWorkerTransport=void 0;const o=n(r(15));t.WebWorkerTransport=function(e){const t=(0,o.default)();return e.addEventListener("message",()=>t.emit("connect",{}),{once:!0}),e.addEventListener("error",e=>{e.error?t.emit("error",e.error):e.message&&t.emit("error",Object.assign(new Error(e.message),{colno:e.colno,error:e.error,filename:e.filename,lineno:e.lineno,message:e.message}))}),e.addEventListener("message",e=>{if(!(e.data instanceof ArrayBuffer||e.data instanceof Uint8Array))throw new Error("WebWorkerTransport: Received unknown type of message, expecting Uint8Array");t.emit("message",e.data)}),{...t,sendMessage(t){if(!(t instanceof ArrayBuffer||t instanceof Uint8Array))throw new Error("WebWorkerTransport: Received unknown type of message, expecting Uint8Array");e.postMessage(t)},close(){"terminate"in e?e.terminate():"close"in e&&e.close(),t.emit("close",{})}}}},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return i}));var n=r(0),o=r.n(n);function s(){return{data:new Uint8Array}}const i={name:"ExperimentalApiService",fullName:"decentraland.kernel.apis.ExperimentalApiService",methods:{sendToRenderer:{name:"SendToRenderer",requestType:{encode:(e,t=o.a.Writer.create())=>(0!==e.data.length&&t.uint32(10).bytes(e.data),t),decode(e,t){const r=e instanceof o.a.Reader?e:new o.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const i=s();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.data=r.bytes();break;default:r.skipType(7&e)}}return i},fromJSON(e){return{data:(t=e.data,null!=t?c(e.data):new Uint8Array)};var t},toJSON(e){const t={};return void 0!==e.data&&(t.data=d(void 0!==e.data?e.data:new Uint8Array)),t},fromPartial(e){var t;const r=s();return r.data=null!==(t=e.data)&&void 0!==t?t:new Uint8Array,r}},requestStream:!1,responseType:{encode:(e,t=o.a.Writer.create())=>t,decode(e,t){const r=e instanceof o.a.Reader?e:new o.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return s},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},responseStream:!1,options:{}},messageFromRenderer:{name:"MessageFromRenderer",requestType:{encode:(e,t=o.a.Writer.create())=>t,decode(e,t){const r=e instanceof o.a.Reader?e:new o.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return s},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode(e,t=o.a.Writer.create()){for(const r of e.data)t.uint32(10).bytes(r);return t},decode(e,t){const r=e instanceof o.a.Reader?e:new o.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={data:[]};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.data.push(r.bytes());break;default:r.skipType(7&e)}}return s},fromJSON:e=>({data:Array.isArray(null==e?void 0:e.data)?e.data.map(e=>c(e)):[]}),toJSON(e){const t={};return e.data?t.data=e.data.map(e=>d(void 0!==e?e:new Uint8Array)):t.data=[],t},fromPartial(e){var t;const r={data:[]};return r.data=(null===(t=e.data)||void 0===t?void 0:t.map(e=>e))||[],r}},responseStream:!1,options:{}}}};var a=(()=>{if(void 0!==a)return a;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw"Unable to locate global object"})();function c(e){if(a.Buffer)return Uint8Array.from(a.Buffer.from(e,"base64"));{const t=a.atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}}function d(e){if(a.Buffer)return a.Buffer.from(e).toString("base64");{const t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),a.btoa(t.join(""))}}}).call(this,r(11))},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return u}));var n=r(17),o=r.n(n),s=r(0),i=r.n(s);r(3);var a;!function(e){e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(a||(a={}));const c={encode:(e,t=i.a.Writer.create())=>(0!==e.x&&t.uint32(13).float(e.x),0!==e.y&&t.uint32(21).float(e.y),0!==e.z&&t.uint32(29).float(e.z),t),decode(e,t){const r=e instanceof i.a.Reader?e:new i.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={x:0,y:0,z:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.x=r.float();break;case 2:o.y=r.float();break;case 3:o.z=r.float();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({x:p(e.x)?Number(e.x):0,y:p(e.y)?Number(e.y):0,z:p(e.z)?Number(e.z):0}),toJSON(e){const t={};return void 0!==e.x&&(t.x=e.x),void 0!==e.y&&(t.y=e.y),void 0!==e.z&&(t.z=e.z),t},fromPartial(e){var t,r,n;const o={x:0,y:0,z:0};return o.x=null!==(t=e.x)&&void 0!==t?t:0,o.y=null!==(r=e.y)&&void 0!==r?r:0,o.z=null!==(n=e.z)&&void 0!==n?n:0,o}};const d={encode:(e,t=i.a.Writer.create())=>(0!==e.x&&t.uint32(9).double(e.x),0!==e.y&&t.uint32(17).double(e.y),0!==e.z&&t.uint32(25).double(e.z),0!==e.w&&t.uint32(33).double(e.w),t),decode(e,t){const r=e instanceof i.a.Reader?e:new i.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={x:0,y:0,z:0,w:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.x=r.double();break;case 2:o.y=r.double();break;case 3:o.z=r.double();break;case 4:o.w=r.double();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({x:p(e.x)?Number(e.x):0,y:p(e.y)?Number(e.y):0,z:p(e.z)?Number(e.z):0,w:p(e.w)?Number(e.w):0}),toJSON(e){const t={};return void 0!==e.x&&(t.x=e.x),void 0!==e.y&&(t.y=e.y),void 0!==e.z&&(t.z=e.z),void 0!==e.w&&(t.w=e.w),t},fromPartial(e){var t,r,n,o;const s={x:0,y:0,z:0,w:0};return s.x=null!==(t=e.x)&&void 0!==t?t:0,s.y=null!==(r=e.y)&&void 0!==r?r:0,s.z=null!==(n=e.z)&&void 0!==n?n:0,s.w=null!==(o=e.w)&&void 0!==o?o:0,s}};const u={encode:(e,t=i.a.Writer.create())=>(void 0!==e.position&&c.encode(e.position,t.uint32(10).fork()).ldelim(),void 0!==e.rotation&&d.encode(e.rotation,t.uint32(18).fork()).ldelim(),void 0!==e.scale&&c.encode(e.scale,t.uint32(26).fork()).ldelim(),t),decode(e,t){const r=e instanceof i.a.Reader?e:new i.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={position:void 0,rotation:void 0,scale:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.position=c.decode(r,r.uint32());break;case 2:o.rotation=d.decode(r,r.uint32());break;case 3:o.scale=c.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({position:p(e.position)?c.fromJSON(e.position):void 0,rotation:p(e.rotation)?d.fromJSON(e.rotation):void 0,scale:p(e.scale)?c.fromJSON(e.scale):void 0}),toJSON(e){const t={};return void 0!==e.position&&(t.position=e.position?c.toJSON(e.position):void 0),void 0!==e.rotation&&(t.rotation=e.rotation?d.toJSON(e.rotation):void 0),void 0!==e.scale&&(t.scale=e.scale?c.toJSON(e.scale):void 0),t},fromPartial(e){const t={position:void 0,rotation:void 0,scale:void 0};return t.position=void 0!==e.position&&null!==e.position?c.fromPartial(e.position):void 0,t.rotation=void 0!==e.rotation&&null!==e.rotation?d.fromPartial(e.rotation):void 0,t.scale=void 0!==e.scale&&null!==e.scale?c.fromPartial(e.scale):void 0,t}};var l=(()=>{if(void 0!==l)return l;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw"Unable to locate global object"})();function p(e){return null!=e}i.a.util.Long!==o.a&&(i.a.util.Long=o.a,i.a.configure())}).call(this,r(11))},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o="~";function s(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,n||e,s),c=o?o+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function d(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(o=!1)),d.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},d.prototype.listeners=function(e){var t=o?o+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,i=new Array(s);n<s;n++)i[n]=r[n].fn;return i},d.prototype.listenerCount=function(e){var t=o?o+e:e,r=this._events[t];return r?r.fn?1:r.length:0},d.prototype.emit=function(e,t,r,n,s,i){var a=o?o+e:e;if(!this._events[a])return!1;var c,d,u=this._events[a],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,n),!0;case 5:return u.fn.call(u.context,t,r,n,s),!0;case 6:return u.fn.call(u.context,t,r,n,s,i),!0}for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];u.fn.apply(u.context,c)}else{var p,h=u.length;for(d=0;d<h;d++)switch(u[d].once&&this.removeListener(e,u[d].fn,void 0,!0),l){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,t);break;case 3:u[d].fn.call(u[d].context,t,r);break;case 4:u[d].fn.call(u[d].context,t,r,n);break;default:if(!c)for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];u[d].fn.apply(u[d].context,c)}}return!0},d.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},d.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},d.prototype.removeListener=function(e,t,r,n){var s=o?o+e:e;if(!this._events[s])return this;if(!t)return c(this,s),this;var i=this._events[s];if(i.fn)i.fn!==t||n&&!i.once||r&&i.context!==r||c(this,s);else{for(var a=0,d=[],u=i.length;a<u;a++)(i[a].fn!==t||n&&!i[a].once||r&&i[a].context!==r)&&d.push(i[a]);d.length?this._events[s]=1===d.length?d[0]:d:c(this,s)}return this},d.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&c(this,t)):(this._events=new s,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=o,d.EventEmitter=d,e.exports=d},function(e,t,r){"use strict";globalThis.WebAssembly.Instance=function(){throw new Error("Wasm is not allowed in scene runtimes")},globalThis.WebAssembly.Module=function(){throw new Error("Wasm is not allowed in scene runtimes")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createRpcServer=t.handleRequest=t.sendStream=t.handleDestroyPort=t.handleRequestModule=t.handleCreatePort=t.createServerPort=void 0;const o=n(r(15)),s=r(0),i=r(47),a=r(12),c=r(9);let d=0;const u=Uint8Array.from([]),l=new s.Writer;const p=(l.reset(),c.RpcMessageHeader.encode({messageIdentifier:(0,a.calculateMessageIdentifier)(c.RpcMessageTypes.RpcMessageTypes_SERVER_READY,0)},l),l.finish());function h(e,t,r){const n=(0,o.default)(),s=new Map,i=new Map,a=new Map,c={get portId(){return e},get portName(){return t},...n,registerModule:async function(r,n){if(a.has(r))throw new Error(`module ${r} is already registered for port ${t} (${e}))`);a.set(r,n)},loadModule:function(n){if(s.has(n))return s.get(n);const o=a.get(n);if(!o)throw new Error(`Module ${n} is not available for port ${t} (${e}))`);const d=async function(e){const t=await e,r={procedures:[]};for(const[e,n]of function(e){return Array.from(Object.entries(e)).filter(([e,t])=>"function"==typeof t)}(t)){const t=i.size+1;i.set(t,n),r.procedures.push({procedureName:e,callable:n,procedureId:t})}return r}(o(c,r));return s.set(n,d),d},close:async function(){s.clear(),i.clear(),a.clear(),n.emit("close",{})},callProcedure:function(r,n,o){const s=i.get(r);if(!s)throw new Error(`procedureId ${r} is missing in ${t} (${e}))`);return s(n,o)}};return c}function f(e,t,r){var n;return null===(n=r.portsByTransport.get(t))||void 0===n?void 0:n.get(e)}async function m(e,t,r,n,o,s,i){d++;const u=h(d,t.portName,i),p=s.portsByTransport.get(e)||new Map;return p.set(u.portId,u),s.ports.set(u.portId,u),s.portsByTransport.set(e,p),await o(u,e,i),l.reset(),c.CreatePortResponse.encode({messageIdentifier:(0,a.calculateMessageIdentifier)(c.RpcMessageTypes.RpcMessageTypes_CREATE_PORT_RESPONSE,r),portId:u.portId},l),e.sendMessage(l.finish()),u}async function y(e,t,r,n){const o=f(t.portId,e,n);if(!o)throw new Error("Cannot find port "+t.portId);const s=await o.loadModule(t.moduleName);l.reset(),c.RequestModuleResponse.encode({procedures:s.procedures,messageIdentifier:(0,a.calculateMessageIdentifier)(c.RpcMessageTypes.RpcMessageTypes_REQUEST_MODULE_RESPONSE,r),portId:o.portId},l),e.sendMessage(l.finish())}async function g(e,t,r,n){const o=f(t.portId,e,n);o&&o.emit("close",{})}async function v(e,t,r,n,o){let s=0;const i=c.StreamMessage.fromJSON({closed:!1,ack:!1,sequenceId:s,messageIdentifier:(0,a.calculateMessageIdentifier)(c.RpcMessageTypes.RpcMessageTypes_STREAM_MESSAGE,o),payload:u,portId:n}),d=await e.sendWithAck(i);if(!d.closed){if(!d.ack)throw new Error("Error in logic, ACK must be true");for await(const t of r){s++,i.sequenceId=s,i.payload=t;const r=await e.sendWithAck(i);if(!r.ack&&r.closed)return}t.sendMessage((0,a.closeStreamMessage)(o,s,n))}}async function b(e,t,r,n,o,s){const i=f(t.portId,o,n);if(!i)return l.reset(),c.RemoteError.encode({messageIdentifier:(0,a.calculateMessageIdentifier)(c.RpcMessageTypes.RpcMessageTypes_REMOTE_ERROR_RESPONSE,r),errorCode:0,errorMessage:"invalid portId"},l),void o.sendMessage(l.finish());const d=await i.callProcedure(t.procedureId,t.payload,s),p=c.Response.fromJSON({messageIdentifier:(0,a.calculateMessageIdentifier)(c.RpcMessageTypes.RpcMessageTypes_RESPONSE,r),payload:u});d instanceof Uint8Array?(p.payload=d,l.reset(),c.Response.encode(p,l),o.sendMessage(l.finish())):d&&Symbol.asyncIterator in d?await v(e,o,d,i.portId,r):(l.reset(),c.Response.encode(p,l),o.sendMessage(l.finish()))}t.createServerPort=h,t.handleCreatePort=m,t.handleRequestModule=y,t.handleDestroyPort=g,t.sendStream=v,t.handleRequest=b,t.createRpcServer=function(e){const t=(0,o.default)(),r={ports:new Map,portsByTransport:new Map,transports:new Set};function n(e){const n=r.portsByTransport.get(e);r.portsByTransport.delete(e),n&&n.size&&n.forEach(e=>e.close()),r.transports.delete(e)&&t.emit("transportClosed",{transport:e})}let d;return t.on("portClosed",e=>{const{port:t,transport:n}=e;r.ports.delete(t.portId);const o=r.portsByTransport.get(n);o&&o.delete(t.portId)}),{...t,setHandler(e){d=e},attachTransport(o,u){if(!d)throw new Error("A handler was not set for this RpcServer");r.transports.add(o);const h=(0,i.createAckHelper)(o);o.on("message",async n=>{var i;try{const p=s.Reader.create(n),f=(0,a.parseProtocolMessage)(p);if(f){const[n,s,p]=f;try{await async function(e,n,o,s,i,a){if(e==c.RpcMessageTypes.RpcMessageTypes_REQUEST)await b(i,n,o,r,s,a);else if(e==c.RpcMessageTypes.RpcMessageTypes_REQUEST_MODULE)await y(s,n,o,r);else if(e==c.RpcMessageTypes.RpcMessageTypes_CREATE_PORT){const e=await m(s,n,o,0,d,r,a);e.on("close",()=>t.emit("portClosed",{port:e,transport:s}))}else e==c.RpcMessageTypes.RpcMessageTypes_DESTROY_PORT?await g(s,n,0,r):e==c.RpcMessageTypes.RpcMessageTypes_STREAM_ACK||e==c.RpcMessageTypes.RpcMessageTypes_STREAM_MESSAGE?i.receiveAck(n,o):s.emit("error",new Error("Unknown message from client "+JSON.stringify([e,n,o])))}(n,s,p,o,h,u)}catch(t){null===(i=e.logger)||void 0===i||i.error("Error handling remote request",{message:t.message,name:t.name,stack:t.stack}),l.reset(),c.RemoteError.encode({messageIdentifier:(0,a.calculateMessageIdentifier)(c.RpcMessageTypes.RpcMessageTypes_REMOTE_ERROR_RESPONSE,p),errorMessage:t.message||"Error processing the request",errorCode:0},l),o.sendMessage(l.finish())}}else o.emit("error",new Error("Transport received unknown message: "+n))}catch(e){o.emit("error",e)}}),o.on("close",()=>{n(o)}),o.on("error",r=>{var s;null===(s=e.logger)||void 0===s||s.error("Error in transport",{message:r.message,name:r.name,stack:r.stack}),function(e,r){t.emit("transportError",{transport:e,error:r}),e.close(),n(e)}(o,r)}),o.sendMessage(p)}}}},function(e,t,r){"use strict";var n=t;function o(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(18),n.BufferWriter=r(42),n.Reader=r(19),n.BufferReader=r(43),n.util=r(8),n.rpc=r(44),n.roots=r(46),n.configure=o,o()},function(e,t,r){"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),n=0,o=2,s=!0;for(;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,i){r[n]=function(e){if(s)if(s=!1,e)i(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,i(e))}}))}},function(e,t,r){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var o=new Array(64),s=new Array(123),i=0;i<64;)s[o[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n.encode=function(e,t,r){for(var n,s=null,i=[],a=0,c=0;t<r;){var d=e[t++];switch(c){case 0:i[a++]=o[d>>2],n=(3&d)<<4,c=1;break;case 1:i[a++]=o[n|d>>4],n=(15&d)<<2,c=2;break;case 2:i[a++]=o[n|d>>6],i[a++]=o[63&d],c=0}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0)}return c&&(i[a++]=o[n],i[a++]=61,1===c&&(i[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))};n.decode=function(e,t,r){for(var n,o=r,i=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&i>1)break;if(void 0===(c=s[c]))throw Error("invalid encoding");switch(i){case 0:n=c,i=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,i=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,i=3;break;case 3:t[r++]=(3&n)<<6|c,i=0}}if(1===i)throw Error("invalid encoding");return r-o},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,r){"use strict";function n(){this._listeners={}}e.exports=n,n.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},n.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},function(e,t,r){"use strict";function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function s(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function i(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:s,e.writeFloatBE=n?s:o,e.readFloatLE=n?i:a,e.readFloatBE=n?a:i}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2);e((o<<31|s+127<<23|8388607&Math.round(t*Math.pow(2,-s)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),o=2*(n>>31)+1,s=n>>>23&255,i=8388607&n;return 255===s?i?NaN:o*(1/0):0===s?1401298464324817e-60*o*i:o*Math.pow(2,s-150)*(i+8388608)}e.writeFloatLE=t.bind(null,o),e.writeFloatBE=t.bind(null,s),e.readFloatLE=r.bind(null,i),e.readFloatBE=r.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function s(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function i(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:s,e.writeDoubleBE=n?s:o,e.readDoubleLE=n?i:a,e.readDoubleBE=n?a:i}():function(){function t(e,t,r,n,o,s){var i=n<0?1:0;if(i&&(n=-n),0===n)e(0,o,s+t),e(1/n>0?0:2147483648,o,s+r);else if(isNaN(n))e(0,o,s+t),e(2146959360,o,s+r);else if(n>17976931348623157e292)e(0,o,s+t),e((i<<31|2146435072)>>>0,o,s+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,o,s+t),e((i<<31|a/4294967296)>>>0,o,s+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=n*Math.pow(2,-c))>>>0,o,s+t),e((i<<31|c+1023<<20|1048576*a&1048575)>>>0,o,s+r)}}}function r(e,t,r,n,o){var s=e(n,o+t),i=e(n,o+r),a=2*(i>>31)+1,c=i>>>20&2047,d=4294967296*(1048575&i)+s;return 2047===c?d?NaN:a*(1/0):0===c?5e-324*a*d:a*Math.pow(2,c-1075)*(d+4503599627370496)}e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,s,4,0),e.readDoubleLE=r.bind(null,i,0,4),e.readDoubleBE=r.bind(null,a,4,0)}(),e}function o(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function s(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=n(n)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,r){"use strict";var n=t;n.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,s=[],i=0;t<r;)(n=e[t++])<128?s[i++]=n:n>191&&n<224?s[i++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[i++]=55296+(n>>10),s[i++]=56320+(1023&n)):s[i++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),i=0);return o?(i&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))},n.write=function(e,t,r){for(var n,o,s=r,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(i+1)))?(n=65536+((1023&n)<<10)+(1023&o),++i,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-s}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=r||8192,o=n>>>1,s=null,i=n;return function(r){if(r<1||r>o)return e(r);i+r>n&&(s=e(n),i=0);var a=t.call(s,i,i+=r);return 7&i&&(i=1+(7|i)),a}}},function(e,t,r){"use strict";e.exports=o;var n=r(8);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=o.zero=new o(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var i=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):s},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===i?s:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},function(e,t,r){"use strict";e.exports=s;var n=r(18);(s.prototype=Object.create(n.prototype)).constructor=s;var o=r(8);function s(){n.call(this)}function i(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=o._Buffer_allocUnsafe,s.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(i,t,e),this},s._configure()},function(e,t,r){"use strict";e.exports=s;var n=r(19);(s.prototype=Object.create(n.prototype)).constructor=s;var o=r(8);function s(e){n.call(this,e)}s._configure=function(){o.Buffer&&(s.prototype._slice=o.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},function(e,t,r){"use strict";t.Service=r(45)},function(e,t,r){"use strict";e.exports=o;var n=r(8);function o(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,r,o,s,i){if(!s)throw TypeError("request must be specified");var a=this;if(!i)return n.asPromise(e,a,t,r,o,s);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,r){if(e)return a.emit("error",e,t),i(e);if(null!==r){if(!(r instanceof o))try{r=o[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),i(e)}return a.emit("data",r,t),i(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){i(e)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,r){"use strict";e.exports={}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAckHelper=void 0;const n=r(0),o=r(12),s=r(9);t.createAckHelper=function(e){const t=new Map,r=new n.Writer;return e.on("close",(function(){t.forEach(([e])=>e({closed:!0,ack:!1})),t.clear()})),e.on("error",e=>{t.forEach(([,t])=>t(e)),t.clear()}),{receiveAck(e,r){const n=`${r},${e.sequenceId}`,o=t.get(n);if(!o)throw new Error("Received a message for an inexistent handler "+n);t.delete(n),o[0](e)},async sendWithAck(n){const[i,a]=(0,o.parseMessageIdentifier)(n.messageIdentifier),c=`${a},${n.sequenceId}`,d=new Promise((function(e,r){t.set(c,[e,r])}));return r.reset(),s.StreamMessage.encode(n,r),e.sendMessage(r.finish()),d}}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createRpcClient=t.streamFromDispatcher=t.createPort=void 0;const o=n(r(15)),s=r(0),i=r(9),a=r(49),c=r(50),d=r(12),u=new Uint8Array(0);function l(e,t,r){const n=(0,o.default)();let a="open";return n.on("close",()=>{a="closed"}),{...n,portName:t,portId:e,get state(){return a},close(){const t=new s.Writer;i.DestroyPort.encode({messageIdentifier:(0,d.calculateMessageIdentifier)(i.RpcMessageTypes.RpcMessageTypes_DESTROY_PORT,0),portId:e},t),r.transport.sendMessage(t.finish()),n.emit("close",{})},async loadModule(t){const n=await r.request((r,n)=>{i.RequestModule.encode({messageIdentifier:(0,d.calculateMessageIdentifier)(i.RpcMessageTypes.RpcMessageTypes_REQUEST_MODULE,n),moduleName:t,portId:e},r)}),o=(0,d.parseProtocolMessage)(n);if(o){const[t,n]=o;if(t==i.RpcMessageTypes.RpcMessageTypes_REQUEST_MODULE_RESPONSE){const t={};for(let o of n.procedures)t[o.procedureName]=f(e,o.procedureId,r);return t}t==i.RpcMessageTypes.RpcMessageTypes_REMOTE_ERROR_RESPONSE&&p(n)}throw new Error("Unknown response received from server.")}}}function p(e){throw new Error("RemoteError: "+e.errorMessage)}function h(e,t,r){let n=0,o=!1;const s=new c.AsyncQueue((function(s,i){"close"==i&&e.removeListener(r);o||("close"==i?e.transport.sendMessage((0,d.closeStreamMessage)(r,n,t.portId)):"next"==i&&e.transport.sendMessage((0,d.streamAckMessage)(r,n,t.portId)))}));return e.transport.on("close",()=>{s.close(new Error("RPC Transport closed"))}),e.transport.on("error",()=>{s.close(new Error("RPC Transport failed"))}),e.addListener(r,e=>{const t=(0,d.parseProtocolMessage)(e);if(t){const[e,r]=t;e==i.RpcMessageTypes.RpcMessageTypes_STREAM_MESSAGE?function(e){n=e.sequenceId,e.closed?(o=!0,s.close()):s.enqueue(e.payload)}(r):e==i.RpcMessageTypes.RpcMessageTypes_REMOTE_ERROR_RESPONSE?(o=!0,s.close(new Error("RemoteError: "+(r.errorMessage||"Unknown remote error")))):s.close(new Error("RemoteError: Protocol error"))}else s.close(new Error("RemoteError: Protocol error"))}),s}function f(e,t,r){const n={portId:e,messageIdentifier:0,payload:u,procedureId:t};return async function(e){n.payload=e||u;const t=(0,d.parseProtocolMessage)(await r.request((e,t)=>{n.messageIdentifier=(0,d.calculateMessageIdentifier)(i.RpcMessageTypes.RpcMessageTypes_REQUEST,t),i.Request.encode(n,e)}));if(t){const[e,n,o]=t;if(e==i.RpcMessageTypes.RpcMessageTypes_RESPONSE){const e=n.payload;return e.length?e:void 0}if(e==i.RpcMessageTypes.RpcMessageTypes_STREAM_MESSAGE)return h(r,n,o);e==i.RpcMessageTypes.RpcMessageTypes_REMOTE_ERROR_RESPONSE&&p(n)}}}t.createPort=l,t.streamFromDispatcher=h,t.createRpcClient=async function(e){const t=new Map,r=(0,a.messageNumberHandler)(e);return await new Promise((t,r)=>{e.on("connect",t),e.on("error",r)}),{async createPort(n){if(t.has(n))return t.get(n);const o=async function(e){const t=await r.request((t,r)=>{i.CreatePort.encode({messageIdentifier:(0,d.calculateMessageIdentifier)(i.RpcMessageTypes.RpcMessageTypes_CREATE_PORT,r),portName:e},t)}),n=(0,d.parseProtocolMessage)(t);if(n){const[t,o]=n;if(t==i.RpcMessageTypes.RpcMessageTypes_CREATE_PORT_RESPONSE){return l(o.portId,e,r)}t==i.RpcMessageTypes.RpcMessageTypes_REMOTE_ERROR_RESPONSE&&p(o)}throw new Error("Unknown response received from server.")}(n);t.set(n,o);const s=await o;return e.on("close",()=>{s.close()}),s.on("close",()=>{t.get(n)===o&&t.delete(n)}),s}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messageNumberHandler=void 0;const n=r(0),o=r(12),s=r(9);let i=0;t.messageNumberHandler=function(e){const t=new Map,r=new Map;return e.on("message",e=>{const i=n.Reader.create(e),a=s.RpcMessageHeader.decode(i),[c,d]=(0,o.parseMessageIdentifier)(a.messageIdentifier);if(d>0){const e=t.get(d);e&&(i.pos=0,e(i),t.delete(d));const n=r.get(d);n&&(i.pos=0,n(i))}}),{transport:e,addListener(e,t){if(r.has(e))throw new Error("There is already a handler for messageId "+e);r.set(e,t)},removeListener(e){if(!r.has(e))throw new Error("A handler is missing for messageId "+e);r.delete(e)},async request(r){const o=++i;return i>16777216&&(i=0),new Promise(s=>{t.set(o,s);const i=new n.Writer;r(i,o),e.sendMessage(i.finish())})}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncQueue=t.pushableChannel=t.linkedList=void 0;class n{constructor(e,t){this.value=e,this.prev=t,this.next=void 0}}function o(){let e=void 0,t=void 0;return{enqueue:function(r){const o=new n(r,t);t&&(t.next=o),e||(e=o),t=o},dequeue:function(){const r=e;if(r){!function(r){if(r.next){r.next.prev=r.prev}else t=r.prev;if(r.prev){r.prev.next=r.next}else e=r.next}(r),delete r.next,delete r.prev;const n=r.value;return delete r.value,n}},isEmpty:function(){return!e}}}t.linkedList=o,t.pushableChannel=function(e){let t=null;const r=o();let n=!1,s=null;function i(){if(!r.isEmpty()){const e=s||new Error("Channel was closed before deliverying the message");for(;!r.isEmpty();){const{resolve:t}=r.dequeue();t&&t(e)}}}function a(){if(t){const e=t;t=null,e()}}function c(e){s=e,u(),i()}function d(){if(s&&r.isEmpty())throw s;if(n&&r.isEmpty())return{done:!0,value:void 0};if(!r.isEmpty()){const e=r.dequeue();return e.resolve&&e.resolve(s||void 0),{done:!1,value:e.value}}}function u(){n||(n=!0,a(),e())}const l={async next(){for(;;)try{const e=d();if(e)return e;await new Promise(e=>t=e)}catch(e){throw c(e),e}},return:async e=>(u(),i(),{done:!0,value:e}),async throw(e){if(s)throw s;return c(e),{done:!0,value:void 0}},[Symbol.asyncIterator]:()=>l};return{iterable:l,push:function(e,t){n?t(new Error("Channel is closed")):s?t(s):(r.enqueue({value:e,resolve:t}),a())},close:u,failAndClose:c,isClosed:function(){return n},[Symbol.asyncIterator]:()=>l}};class s{constructor(e){this.requestingNext=e,this.values=o(),this.settlers=o(),this.closed=!1,this.error=void 0}[Symbol.asyncIterator](){return this}enqueue(e){if(this.closed)throw new Error("Channel is closed");if(this.settlers.isEmpty())this.values.enqueue({value:e});else{if(!this.values.isEmpty())throw new Error("Illegal internal state");const t=this.settlers.dequeue();e instanceof Error?t.reject(e):t.resolve({value:e})}}async next(){if(!this.values.isEmpty()){return this.values.dequeue()}if(this.error)throw this.error;if(this.closed){if(!this.settlers.isEmpty())throw new Error("Illegal internal state");return{done:!0,value:void 0}}return new Promise((e,t)=>{this.requestingNext(this,"next"),this.settlers.enqueue({resolve:e,reject:t})})}async return(e){return this.close(e),{done:!0,value:e}}async throw(e){return this.close(e),{done:!0,value:void 0}}close(e){if(e)for(;!this.settlers.isEmpty();)this.settlers.dequeue().reject(e);else for(;!this.settlers.isEmpty();)this.settlers.dequeue().resolve({done:!0,value:void 0});e&&(this.error=e),this.closed||(this.closed=!0,this.requestingNext(this,"close"))}}t.AsyncQueue=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildArray=void 0,t.buildArray=function(e,t){const r=[];for(let n=0;n<e;++n)r.push(t());return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Axis=void 0;const n=r(6);class o{}t.Axis=o,o.X=new n.Vector3(1,0,0),o.Y=new n.Vector3(0,1,0),o.Z=new n.Vector3(0,0,1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BezierCurve=void 0;t.BezierCurve=class{static Interpolate(e,t,r,n,o){const s=1-3*n+3*t,i=3*n-6*t,a=3*t;let c=e;for(let t=0;t<5;t++){const t=c*c;c-=(s*(t*c)+i*t+a*c-e)*(1/(3*s*t+2*i*c+a)),c=Math.min(1,Math.max(0,c))}return 3*Math.pow(1-c,2)*c*r+3*(1-c)*Math.pow(c,2)*o+Math.pow(c,3)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Color3=void 0;const n=r(4),o=r(23),s=r(7);class i{constructor(e=0,t=0,r=0){this.r=e,this.g=t,this.b=r}static FromHexString(e){if("#"!==e.substring(0,1)||7!==e.length)return new i(0,0,0);const t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return i.FromInts(t,r,n)}static FromArray(e,t=0){return new i(e[t],e[t+1],e[t+2])}static FromInts(e,t,r){return new i(e/255,t/255,r/255)}static Lerp(e,t,r){const n=new i(0,0,0);return i.LerpToRef(e,t,r,n),n}static LerpToRef(e,t,r,n){n.r=e.r+(t.r-e.r)*r,n.g=e.g+(t.g-e.g)*r,n.b=e.b+(t.b-e.b)*r}static Red(){return new i(1,0,0)}static Green(){return new i(0,1,0)}static Blue(){return new i(0,0,1)}static Black(){return new i(0,0,0)}static White(){return new i(1,1,1)}static Purple(){return new i(.5,0,.5)}static Magenta(){return new i(1,0,1)}static Yellow(){return new i(1,1,0)}static Gray(){return new i(.5,.5,.5)}static Teal(){return new i(0,1,1)}static Random(){return new i(Math.random(),Math.random(),Math.random())}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"}getClassName(){return"Color3"}getHashCode(){let e=this.r||0;return e=397*e^(this.g||0),e=397*e^(this.b||0),e}toArray(e,t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,this}toColor4(e=1){return new o.Color4(this.r,this.g,this.b,e)}asArray(){const e=new Array;return this.toArray(e,0),e}toLuminance(){return.3*this.r+.59*this.g+.11*this.b}multiply(e){return new i(this.r*e.r,this.g*e.g,this.b*e.b)}multiplyToRef(e,t){return t.r=this.r*e.r,t.g=this.g*e.g,t.b=this.b*e.b,this}equals(e){return e&&this.r===e.r&&this.g===e.g&&this.b===e.b}equalsFloats(e,t,r){return this.r===e&&this.g===t&&this.b===r}scale(e){return new i(this.r*e,this.g*e,this.b*e)}scaleToRef(e,t){return t.r=this.r*e,t.g=this.g*e,t.b=this.b*e,this}scaleAndAddToRef(e,t){return t.r+=this.r*e,t.g+=this.g*e,t.b+=this.b*e,this}clampToRef(e=0,t=1,r){return r.r=s.Scalar.Clamp(this.r,e,t),r.g=s.Scalar.Clamp(this.g,e,t),r.b=s.Scalar.Clamp(this.b,e,t),this}add(e){return new i(this.r+e.r,this.g+e.g,this.b+e.b)}addToRef(e,t){return t.r=this.r+e.r,t.g=this.g+e.g,t.b=this.b+e.b,this}subtract(e){return new i(this.r-e.r,this.g-e.g,this.b-e.b)}subtractToRef(e,t){return t.r=this.r-e.r,t.g=this.g-e.g,t.b=this.b-e.b,this}clone(){return new i(this.r,this.g,this.b)}copyFrom(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyFromFloats(e,t,r){return this.r=e,this.g=t,this.b=r,this}set(e,t,r){return this.copyFromFloats(e,t,r)}toHexString(){const e=255*this.r|0,t=255*this.g|0,r=255*this.b|0;return"#"+s.Scalar.ToHex(e)+s.Scalar.ToHex(t)+s.Scalar.ToHex(r)}toLinearSpace(){const e=new i;return this.toLinearSpaceToRef(e),e}toLinearSpaceToRef(e){return e.r=Math.pow(this.r,n.ToLinearSpace),e.g=Math.pow(this.g,n.ToLinearSpace),e.b=Math.pow(this.b,n.ToLinearSpace),this}toGammaSpace(){const e=new i;return this.toGammaSpaceToRef(e),e}toGammaSpaceToRef(e){return e.r=Math.pow(this.r,n.ToGammaSpace),e.g=Math.pow(this.g,n.ToGammaSpace),e.b=Math.pow(this.b,n.ToGammaSpace),this}toJSON(){return{r:this.r,g:this.g,b:this.b}}}t.Color3=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Curve3=void 0;const n=r(6);class o{constructor(e){this._length=0,this._points=e,this._length=this._computeLength(e)}static CreateQuadraticBezier(e,t,r,s){s=s>2?s:3;const i=new Array,a=(e,t,r,n)=>(1-e)*(1-e)*t+2*e*(1-e)*r+e*e*n;for(let o=0;o<=s;o++)i.push(new n.Vector3(a(o/s,e.x,t.x,r.x),a(o/s,e.y,t.y,r.y),a(o/s,e.z,t.z,r.z)));return new o(i)}static CreateCubicBezier(e,t,r,s,i){i=i>3?i:4;const a=new Array,c=(e,t,r,n,o)=>(1-e)*(1-e)*(1-e)*t+3*e*(1-e)*(1-e)*r+3*e*e*(1-e)*n+e*e*e*o;for(let o=0;o<=i;o++)a.push(new n.Vector3(c(o/i,e.x,t.x,r.x,s.x),c(o/i,e.y,t.y,r.y,s.y),c(o/i,e.z,t.z,r.z,s.z)));return new o(a)}static CreateHermiteSpline(e,t,r,s,i){const a=new Array,c=1/i;for(let o=0;o<=i;o++)a.push(n.Vector3.Hermite(e,t,r,s,o*c));return new o(a)}static CreateCatmullRomSpline(e,t,r){const s=new Array,i=1/t;let a=0;if(r){const r=e.length;for(let o=0;o<r;o++){a=0;for(let c=0;c<t;c++)s.push(n.Vector3.CatmullRom(e[o%r],e[(o+1)%r],e[(o+2)%r],e[(o+3)%r],a)),a+=i}s.push(s[0])}else{const r=new Array;r.push(e[0].clone()),Array.prototype.push.apply(r,e),r.push(e[e.length-1].clone());let o=0;for(o=0;o<r.length-3;o++){a=0;for(let e=0;e<t;e++)s.push(n.Vector3.CatmullRom(r[o],r[o+1],r[o+2],r[o+3],a)),a+=i}o--,s.push(n.Vector3.CatmullRom(r[o],r[o+1],r[o+2],r[o+3],a))}return new o(s)}getPoints(){return this._points}length(){return this._length}continue(e){const t=this._points[this._points.length-1],r=this._points.slice(),n=e.getPoints();for(let e=1;e<n.length;e++)r.push(n[e].subtract(n[0]).add(t));return new o(r)}_computeLength(e){let t=0;for(let r=1;r<e.length;r++)t+=e[r].subtract(e[r-1]).length();return t}}t.Curve3=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Frustum=void 0;const n=r(24);class o{static GetPlanes(e){const t=[];for(let e=0;e<6;e++)t.push(new n.Plane(0,0,0,0));return o.GetPlanesToRef(e,t),t}static GetNearPlaneToRef(e,t){const r=e.m;t.normal.x=r[3]+r[2],t.normal.y=r[7]+r[6],t.normal.z=r[11]+r[10],t.d=r[15]+r[14],t.normalize()}static GetFarPlaneToRef(e,t){const r=e.m;t.normal.x=r[3]-r[2],t.normal.y=r[7]-r[6],t.normal.z=r[11]-r[10],t.d=r[15]-r[14],t.normalize()}static GetLeftPlaneToRef(e,t){const r=e.m;t.normal.x=r[3]+r[0],t.normal.y=r[7]+r[4],t.normal.z=r[11]+r[8],t.d=r[15]+r[12],t.normalize()}static GetRightPlaneToRef(e,t){const r=e.m;t.normal.x=r[3]-r[0],t.normal.y=r[7]-r[4],t.normal.z=r[11]-r[8],t.d=r[15]-r[12],t.normalize()}static GetTopPlaneToRef(e,t){const r=e.m;t.normal.x=r[3]-r[1],t.normal.y=r[7]-r[5],t.normal.z=r[11]-r[9],t.d=r[15]-r[13],t.normalize()}static GetBottomPlaneToRef(e,t){const r=e.m;t.normal.x=r[3]+r[1],t.normal.y=r[7]+r[5],t.normal.z=r[11]+r[9],t.d=r[15]+r[13],t.normalize()}static GetPlanesToRef(e,t){o.GetNearPlaneToRef(e,t[0]),o.GetFarPlaneToRef(e,t[1]),o.GetLeftPlaneToRef(e,t[2]),o.GetRightPlaneToRef(e,t[3]),o.GetTopPlaneToRef(e,t[4]),o.GetBottomPlaneToRef(e,t[5])}}t.Frustum=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Path2=void 0;const n=r(16),o=r(22),s=r(4);class i{constructor(e,t){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new n.Vector2(e,t))}static StartingAt(e,t){return new i(e,t)}addLineTo(e,t){if(this.closed)return this;const r=new n.Vector2(e,t),o=this._points[this._points.length-1];return this._points.push(r),this._length+=r.subtract(o).length(),this}addArcTo(e,t,r,i,a=36){if(this.closed)return this;const c=this._points[this._points.length-1],d=new n.Vector2(e,t),u=new n.Vector2(r,i),l=new o.Arc2(c,d,u);let p=l.angle.radians()/a;l.orientation===s.Orientation.CW&&(p*=-1);let h=l.startAngle.radians()+p;for(let e=0;e<a;e++){const e=Math.cos(h)*l.radius+l.centerPoint.x,t=Math.sin(h)*l.radius+l.centerPoint.y;this.addLineTo(e,t),h+=p}return this}close(){return this.closed=!0,this}length(){let e=this._length;if(!this.closed){const t=this._points[this._points.length-1];e+=this._points[0].subtract(t).length()}return e}getPoints(){return this._points}getPointAtLengthPosition(e){if(e<0||e>1)return n.Vector2.Zero();const t=e*this.length();let r=0;for(let e=0;e<this._points.length;e++){const o=(e+1)%this._points.length,s=this._points[e],i=this._points[o].subtract(s),a=i.length()+r;if(t>=r&&t<=a){const e=i.normalize(),o=t-r;return new n.Vector2(s.x+e.x*o,s.y+e.y*o)}r=a}return n.Vector2.Zero()}}t.Path2=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Path3D=void 0;const n=r(6),o=r(4),s=r(7);t.Path3D=class{constructor(e,t=null,r){this.path=e,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(let t=0;t<e.length;t++)this._curve[t]=e[t].clone();this._raw=r||!1,this._compute(t)}getCurve(){return this._curve}getTangents(){return this._tangents}getNormals(){return this._normals}getBinormals(){return this._binormals}getDistances(){return this._distances}update(e,t=null){for(let t=0;t<e.length;t++)this._curve[t].x=e[t].x,this._curve[t].y=e[t].y,this._curve[t].z=e[t].z;return this._compute(t),this}_compute(e){const t=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[t-1]=this._curve[t-1].subtract(this._curve[t-2]),this._raw||this._tangents[t-1].normalize();const r=this._tangents[0],o=this._normalVector(this._curve[0],r,e);let s,i,a,c;this._normals[0]=o,this._raw||this._normals[0].normalize(),this._binormals[0]=n.Vector3.Cross(r,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(let e=1;e<t;e++)s=this._getLastNonNullVector(e),e<t-1&&(i=this._getFirstNonNullVector(e),this._tangents[e]=s.add(i),this._tangents[e].normalize()),this._distances[e]=this._distances[e-1]+s.length(),a=this._tangents[e],c=this._binormals[e-1],this._normals[e]=n.Vector3.Cross(c,a),this._raw||this._normals[e].normalize(),this._binormals[e]=n.Vector3.Cross(a,this._normals[e]),this._raw||this._binormals[e].normalize()}_getFirstNonNullVector(e){let t=1,r=this._curve[e+t].subtract(this._curve[e]);for(;0===r.length()&&e+t+1<this._curve.length;)t++,r=this._curve[e+t].subtract(this._curve[e]);return r}_getLastNonNullVector(e){let t=1,r=this._curve[e].subtract(this._curve[e-t]);for(;0===r.length()&&e>t+1;)t++,r=this._curve[e].subtract(this._curve[e-t]);return r}_normalVector(e,t,r){let i,a=t.length();if(0===a&&(a=1),null==r){let e;e=s.Scalar.WithinEpsilon(Math.abs(t.y)/a,1,o.Epsilon)?s.Scalar.WithinEpsilon(Math.abs(t.x)/a,1,o.Epsilon)?s.Scalar.WithinEpsilon(Math.abs(t.z)/a,1,o.Epsilon)?n.Vector3.Zero():new n.Vector3(0,0,1):new n.Vector3(1,0,0):new n.Vector3(0,-1,0),i=n.Vector3.Cross(t,e)}else i=n.Vector3.Cross(t,r),n.Vector3.CrossToRef(i,t,i);return i.normalize(),i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Size=void 0;class n{constructor(e,t){this.width=e,this.height=t}get surface(){return this.width*this.height}static Zero(){return new n(0,0)}static Lerp(e,t,r){const o=e.width+(t.width-e.width)*r,s=e.height+(t.height-e.height)*r;return new n(o,s)}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let e=this.width||0;return e=397*e^(this.height||0),e}copyFrom(e){this.width=e.width,this.height=e.height}copyFromFloats(e,t){return this.width=e,this.height=t,this}set(e,t){return this.copyFromFloats(e,t)}multiplyByFloats(e,t){return new n(this.width*e,this.height*t)}clone(){return new n(this.width,this.height)}equals(e){return!!e&&(this.width===e.width&&this.height===e.height)}add(e){return new n(this.width+e.width,this.height+e.height)}subtract(e){return new n(this.width-e.width,this.height-e.height)}}t.Size=n},function(e,t,r){"use strict";r.r(t);r(30);var n=r(25),o=r(26),s=r(1),i=r(0),a=r.n(i);const c={name:"CommunicationsControllerService",fullName:"decentraland.kernel.apis.CommunicationsControllerService",methods:{send:{name:"Send",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.message&&t.uint32(10).string(e.message),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={message:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.message=r.string();break;default:r.skipType(7&e)}}return o},fromJSON(e){return{message:(t=e.message,null!=t?String(e.message):"")};var t},toJSON(e){const t={};return void 0!==e.message&&(t.message=e.message),t},fromPartial(e){var t;const r={message:""};return r.message=null!==(t=e.message)&&void 0!==t?t:"",r}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},responseStream:!1,options:{}}}};var d,u;(u=d||(d={})).create=function(e){return s.loadService(e,c)},u.createLegacy=function(e){const t=s.loadService(e,c);return Object.assign(Object.assign({},t),{async send(e){await t.send({message:e})}})};const l={name:"DevToolsService",fullName:"decentraland.kernel.apis.DevToolsService",methods:{event:{name:"Event",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.type&&t.uint32(10).string(e.type),""!==e.jsonPayload&&t.uint32(18).string(e.jsonPayload),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={type:"",jsonPayload:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.type=r.string();break;case 2:o.jsonPayload=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({type:p(e.type)?String(e.type):"",jsonPayload:p(e.jsonPayload)?String(e.jsonPayload):""}),toJSON(e){const t={};return void 0!==e.type&&(t.type=e.type),void 0!==e.jsonPayload&&(t.jsonPayload=e.jsonPayload),t},fromPartial(e){var t,r;const n={type:"",jsonPayload:""};return n.type=null!==(t=e.type)&&void 0!==t?t:"",n.jsonPayload=null!==(r=e.jsonPayload)&&void 0!==r?r:"",n}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},responseStream:!1,options:{}}}};function p(e){return null!=e}var h,f,m;function y(e){switch(e){case 0:case"QT_INVALID_QUERY_TYPE":return h.QT_INVALID_QUERY_TYPE;case 1:case"QT_HIT_FIRST":return h.QT_HIT_FIRST;case 2:case"QT_HIT_ALL":return h.QT_HIT_ALL;case 3:case"QT_HIT_FIRST_AVATAR":return h.QT_HIT_FIRST_AVATAR;case 4:case"QT_HIT_ALL_AVATARS":return h.QT_HIT_ALL_AVATARS;case-1:case"UNRECOGNIZED":default:return h.UNRECOGNIZED}}function g(e){switch(e){case 0:case"EAT_INVALID_EA_TYPE":return f.EAT_INVALID_EA_TYPE;case 1:case"EAT_OPEN_EXTERNAL_URL":return f.EAT_OPEN_EXTERNAL_URL;case 2:case"EAT_OPEN_NFT_DIALOG":return f.EAT_OPEN_NFT_DIALOG;case 3:case"EAT_CREATE_ENTITY":return f.EAT_CREATE_ENTITY;case 4:case"EAT_REMOVE_ENTITY":return f.EAT_REMOVE_ENTITY;case 5:case"EAT_UPDATE_ENTITY_COMPONENT":return f.EAT_UPDATE_ENTITY_COMPONENT;case 6:case"EAT_ATTACH_ENTITY_COMPONENT":return f.EAT_ATTACH_ENTITY_COMPONENT;case 7:case"EAT_COMPONENT_REMOVED":return f.EAT_COMPONENT_REMOVED;case 8:case"EAT_SET_ENTITY_PARENT":return f.EAT_SET_ENTITY_PARENT;case 9:case"EAT_QUERY":return f.EAT_QUERY;case 10:case"EAT_COMPONENT_CREATED":return f.EAT_COMPONENT_CREATED;case 11:case"EAT_COMPONENT_DISPOSED":return f.EAT_COMPONENT_DISPOSED;case 12:case"EAT_COMPONENT_UPDATED":return f.EAT_COMPONENT_UPDATED;case 13:case"EAT_INIT_MESSAGES_FINISHED":return f.EAT_INIT_MESSAGES_FINISHED;case-1:case"UNRECOGNIZED":default:return f.UNRECOGNIZED}}function v(e){switch(e){case 0:case"EDT_GENERIC":return m.EDT_GENERIC;case 1:case"EDT_POSITION_CHANGED":return m.EDT_POSITION_CHANGED;case 2:case"EDT_ROTATION_CHANGED":return m.EDT_ROTATION_CHANGED;case-1:case"UNRECOGNIZED":default:return m.UNRECOGNIZED}}!function(e){e[e.QT_INVALID_QUERY_TYPE=0]="QT_INVALID_QUERY_TYPE",e[e.QT_HIT_FIRST=1]="QT_HIT_FIRST",e[e.QT_HIT_ALL=2]="QT_HIT_ALL",e[e.QT_HIT_FIRST_AVATAR=3]="QT_HIT_FIRST_AVATAR",e[e.QT_HIT_ALL_AVATARS=4]="QT_HIT_ALL_AVATARS",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(h||(h={})),function(e){e[e.EAT_INVALID_EA_TYPE=0]="EAT_INVALID_EA_TYPE",e[e.EAT_OPEN_EXTERNAL_URL=1]="EAT_OPEN_EXTERNAL_URL",e[e.EAT_OPEN_NFT_DIALOG=2]="EAT_OPEN_NFT_DIALOG",e[e.EAT_CREATE_ENTITY=3]="EAT_CREATE_ENTITY",e[e.EAT_REMOVE_ENTITY=4]="EAT_REMOVE_ENTITY",e[e.EAT_UPDATE_ENTITY_COMPONENT=5]="EAT_UPDATE_ENTITY_COMPONENT",e[e.EAT_ATTACH_ENTITY_COMPONENT=6]="EAT_ATTACH_ENTITY_COMPONENT",e[e.EAT_COMPONENT_REMOVED=7]="EAT_COMPONENT_REMOVED",e[e.EAT_SET_ENTITY_PARENT=8]="EAT_SET_ENTITY_PARENT",e[e.EAT_QUERY=9]="EAT_QUERY",e[e.EAT_COMPONENT_CREATED=10]="EAT_COMPONENT_CREATED",e[e.EAT_COMPONENT_DISPOSED=11]="EAT_COMPONENT_DISPOSED",e[e.EAT_COMPONENT_UPDATED=12]="EAT_COMPONENT_UPDATED",e[e.EAT_INIT_MESSAGES_FINISHED=13]="EAT_INIT_MESSAGES_FINISHED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(f||(f={})),function(e){e[e.EDT_GENERIC=0]="EDT_GENERIC",e[e.EDT_POSITION_CHANGED=1]="EDT_POSITION_CHANGED",e[e.EDT_ROTATION_CHANGED=2]="EDT_ROTATION_CHANGED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(m||(m={}));const b={encode:(e,t=a.a.Writer.create())=>(""!==e.url&&t.uint32(10).string(e.url),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={url:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.url=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({url:B(e.url)?String(e.url):""}),toJSON(e){const t={};return void 0!==e.url&&(t.url=e.url),t},fromPartial(e){var t;const r={url:""};return r.url=null!==(t=e.url)&&void 0!==t?t:"",r}};const T={encode:(e,t=a.a.Writer.create())=>(""!==e.assetContractAddress&&t.uint32(10).string(e.assetContractAddress),""!==e.tokenId&&t.uint32(18).string(e.tokenId),void 0!==e.comment&&t.uint32(26).string(e.comment),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={assetContractAddress:"",tokenId:"",comment:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.assetContractAddress=r.string();break;case 2:o.tokenId=r.string();break;case 3:o.comment=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({assetContractAddress:B(e.assetContractAddress)?String(e.assetContractAddress):"",tokenId:B(e.tokenId)?String(e.tokenId):"",comment:B(e.comment)?String(e.comment):void 0}),toJSON(e){const t={};return void 0!==e.assetContractAddress&&(t.assetContractAddress=e.assetContractAddress),void 0!==e.tokenId&&(t.tokenId=e.tokenId),void 0!==e.comment&&(t.comment=e.comment),t},fromPartial(e){var t,r,n;const o={assetContractAddress:"",tokenId:"",comment:void 0};return o.assetContractAddress=null!==(t=e.assetContractAddress)&&void 0!==t?t:"",o.tokenId=null!==(r=e.tokenId)&&void 0!==r?r:"",o.comment=null!==(n=e.comment)&&void 0!==n?n:void 0,o}};const E={encode:(e,t=a.a.Writer.create())=>(""!==e.id&&t.uint32(10).string(e.id),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={id:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.id=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({id:B(e.id)?String(e.id):""}),toJSON(e){const t={};return void 0!==e.id&&(t.id=e.id),t},fromPartial(e){var t;const r={id:""};return r.id=null!==(t=e.id)&&void 0!==t?t:"",r}};const R={encode:(e,t=a.a.Writer.create())=>(""!==e.id&&t.uint32(10).string(e.id),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={id:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.id=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({id:B(e.id)?String(e.id):""}),toJSON(e){const t={};return void 0!==e.id&&(t.id=e.id),t},fromPartial(e){var t;const r={id:""};return r.id=null!==(t=e.id)&&void 0!==t?t:"",r}};const _={encode:(e,t=a.a.Writer.create())=>(""!==e.entityId&&t.uint32(10).string(e.entityId),0!==e.classId&&t.uint32(16).int32(e.classId),""!==e.name&&t.uint32(26).string(e.name),""!==e.json&&t.uint32(34).string(e.json),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={entityId:"",classId:0,name:"",json:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.entityId=r.string();break;case 2:o.classId=r.int32();break;case 3:o.name=r.string();break;case 4:o.json=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({entityId:B(e.entityId)?String(e.entityId):"",classId:B(e.classId)?Number(e.classId):0,name:B(e.name)?String(e.name):"",json:B(e.json)?String(e.json):""}),toJSON(e){const t={};return void 0!==e.entityId&&(t.entityId=e.entityId),void 0!==e.classId&&(t.classId=Math.round(e.classId)),void 0!==e.name&&(t.name=e.name),void 0!==e.json&&(t.json=e.json),t},fromPartial(e){var t,r,n,o;const s={entityId:"",classId:0,name:"",json:""};return s.entityId=null!==(t=e.entityId)&&void 0!==t?t:"",s.classId=null!==(r=e.classId)&&void 0!==r?r:0,s.name=null!==(n=e.name)&&void 0!==n?n:"",s.json=null!==(o=e.json)&&void 0!==o?o:"",s}};const w={encode:(e,t=a.a.Writer.create())=>(""!==e.entityId&&t.uint32(10).string(e.entityId),""!==e.name&&t.uint32(18).string(e.name),""!==e.id&&t.uint32(26).string(e.id),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={entityId:"",name:"",id:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.entityId=r.string();break;case 2:o.name=r.string();break;case 3:o.id=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({entityId:B(e.entityId)?String(e.entityId):"",name:B(e.name)?String(e.name):"",id:B(e.id)?String(e.id):""}),toJSON(e){const t={};return void 0!==e.entityId&&(t.entityId=e.entityId),void 0!==e.name&&(t.name=e.name),void 0!==e.id&&(t.id=e.id),t},fromPartial(e){var t,r,n;const o={entityId:"",name:"",id:""};return o.entityId=null!==(t=e.entityId)&&void 0!==t?t:"",o.name=null!==(r=e.name)&&void 0!==r?r:"",o.id=null!==(n=e.id)&&void 0!==n?n:"",o}};const S={encode:(e,t=a.a.Writer.create())=>(""!==e.entityId&&t.uint32(10).string(e.entityId),""!==e.name&&t.uint32(18).string(e.name),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={entityId:"",name:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.entityId=r.string();break;case 2:o.name=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({entityId:B(e.entityId)?String(e.entityId):"",name:B(e.name)?String(e.name):""}),toJSON(e){const t={};return void 0!==e.entityId&&(t.entityId=e.entityId),void 0!==e.name&&(t.name=e.name),t},fromPartial(e){var t,r;const n={entityId:"",name:""};return n.entityId=null!==(t=e.entityId)&&void 0!==t?t:"",n.name=null!==(r=e.name)&&void 0!==r?r:"",n}};const I={encode:(e,t=a.a.Writer.create())=>(""!==e.entityId&&t.uint32(10).string(e.entityId),""!==e.parentId&&t.uint32(18).string(e.parentId),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={entityId:"",parentId:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.entityId=r.string();break;case 2:o.parentId=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({entityId:B(e.entityId)?String(e.entityId):"",parentId:B(e.parentId)?String(e.parentId):""}),toJSON(e){const t={};return void 0!==e.entityId&&(t.entityId=e.entityId),void 0!==e.parentId&&(t.parentId=e.parentId),t},fromPartial(e){var t,r;const n={entityId:"",parentId:""};return n.entityId=null!==(t=e.entityId)&&void 0!==t?t:"",n.parentId=null!==(r=e.parentId)&&void 0!==r?r:"",n}};const x={encode:(e,t=a.a.Writer.create())=>(0!==e.queryId&&t.uint32(8).int32(e.queryId),""!==e.payload&&t.uint32(18).string(e.payload),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={queryId:0,payload:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.queryId=r.int32();break;case 2:o.payload=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({queryId:B(e.queryId)?y(e.queryId):0,payload:B(e.payload)?String(e.payload):""}),toJSON(e){const t={};return void 0!==e.queryId&&(t.queryId=function(e){switch(e){case h.QT_INVALID_QUERY_TYPE:return"QT_INVALID_QUERY_TYPE";case h.QT_HIT_FIRST:return"QT_HIT_FIRST";case h.QT_HIT_ALL:return"QT_HIT_ALL";case h.QT_HIT_FIRST_AVATAR:return"QT_HIT_FIRST_AVATAR";case h.QT_HIT_ALL_AVATARS:return"QT_HIT_ALL_AVATARS";case h.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e.queryId)),void 0!==e.payload&&(t.payload=e.payload),t},fromPartial(e){var t,r;const n={queryId:0,payload:""};return n.queryId=null!==(t=e.queryId)&&void 0!==t?t:0,n.payload=null!==(r=e.payload)&&void 0!==r?r:"",n}};const N={encode:(e,t=a.a.Writer.create())=>(""!==e.id&&t.uint32(10).string(e.id),0!==e.classId&&t.uint32(16).int32(e.classId),""!==e.name&&t.uint32(26).string(e.name),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={id:"",classId:0,name:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.id=r.string();break;case 2:o.classId=r.int32();break;case 3:o.name=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({id:B(e.id)?String(e.id):"",classId:B(e.classId)?Number(e.classId):0,name:B(e.name)?String(e.name):""}),toJSON(e){const t={};return void 0!==e.id&&(t.id=e.id),void 0!==e.classId&&(t.classId=Math.round(e.classId)),void 0!==e.name&&(t.name=e.name),t},fromPartial(e){var t,r,n;const o={id:"",classId:0,name:""};return o.id=null!==(t=e.id)&&void 0!==t?t:"",o.classId=null!==(r=e.classId)&&void 0!==r?r:0,o.name=null!==(n=e.name)&&void 0!==n?n:"",o}};const A={encode:(e,t=a.a.Writer.create())=>(""!==e.id&&t.uint32(10).string(e.id),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={id:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.id=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({id:B(e.id)?String(e.id):""}),toJSON(e){const t={};return void 0!==e.id&&(t.id=e.id),t},fromPartial(e){var t;const r={id:""};return r.id=null!==(t=e.id)&&void 0!==t?t:"",r}};const O={encode:(e,t=a.a.Writer.create())=>(""!==e.id&&t.uint32(10).string(e.id),""!==e.json&&t.uint32(18).string(e.json),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={id:"",json:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.id=r.string();break;case 2:o.json=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({id:B(e.id)?String(e.id):"",json:B(e.json)?String(e.json):""}),toJSON(e){const t={};return void 0!==e.id&&(t.id=e.id),void 0!==e.json&&(t.json=e.json),t},fromPartial(e){var t,r;const n={id:"",json:""};return n.id=null!==(t=e.id)&&void 0!==t?t:"",n.json=null!==(r=e.json)&&void 0!==r?r:"",n}};const P={encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})};const M={encode:(e,t=a.a.Writer.create())=>(void 0!==e.openExternalUrl&&b.encode(e.openExternalUrl,t.uint32(10).fork()).ldelim(),void 0!==e.openNftDialog&&T.encode(e.openNftDialog,t.uint32(18).fork()).ldelim(),void 0!==e.createEntity&&E.encode(e.createEntity,t.uint32(26).fork()).ldelim(),void 0!==e.removeEntity&&R.encode(e.removeEntity,t.uint32(34).fork()).ldelim(),void 0!==e.updateEntityComponent&&_.encode(e.updateEntityComponent,t.uint32(42).fork()).ldelim(),void 0!==e.attachEntityComponent&&w.encode(e.attachEntityComponent,t.uint32(50).fork()).ldelim(),void 0!==e.componentRemoved&&S.encode(e.componentRemoved,t.uint32(58).fork()).ldelim(),void 0!==e.setEntityParent&&I.encode(e.setEntityParent,t.uint32(66).fork()).ldelim(),void 0!==e.query&&x.encode(e.query,t.uint32(74).fork()).ldelim(),void 0!==e.componentCreated&&N.encode(e.componentCreated,t.uint32(82).fork()).ldelim(),void 0!==e.componentDisposed&&A.encode(e.componentDisposed,t.uint32(90).fork()).ldelim(),void 0!==e.componentUpdated&&O.encode(e.componentUpdated,t.uint32(98).fork()).ldelim(),void 0!==e.initMessagesFinished&&P.encode(e.initMessagesFinished,t.uint32(106).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={openExternalUrl:void 0,openNftDialog:void 0,createEntity:void 0,removeEntity:void 0,updateEntityComponent:void 0,attachEntityComponent:void 0,componentRemoved:void 0,setEntityParent:void 0,query:void 0,componentCreated:void 0,componentDisposed:void 0,componentUpdated:void 0,initMessagesFinished:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.openExternalUrl=b.decode(r,r.uint32());break;case 2:o.openNftDialog=T.decode(r,r.uint32());break;case 3:o.createEntity=E.decode(r,r.uint32());break;case 4:o.removeEntity=R.decode(r,r.uint32());break;case 5:o.updateEntityComponent=_.decode(r,r.uint32());break;case 6:o.attachEntityComponent=w.decode(r,r.uint32());break;case 7:o.componentRemoved=S.decode(r,r.uint32());break;case 8:o.setEntityParent=I.decode(r,r.uint32());break;case 9:o.query=x.decode(r,r.uint32());break;case 10:o.componentCreated=N.decode(r,r.uint32());break;case 11:o.componentDisposed=A.decode(r,r.uint32());break;case 12:o.componentUpdated=O.decode(r,r.uint32());break;case 13:o.initMessagesFinished=P.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({openExternalUrl:B(e.openExternalUrl)?b.fromJSON(e.openExternalUrl):void 0,openNftDialog:B(e.openNftDialog)?T.fromJSON(e.openNftDialog):void 0,createEntity:B(e.createEntity)?E.fromJSON(e.createEntity):void 0,removeEntity:B(e.removeEntity)?R.fromJSON(e.removeEntity):void 0,updateEntityComponent:B(e.updateEntityComponent)?_.fromJSON(e.updateEntityComponent):void 0,attachEntityComponent:B(e.attachEntityComponent)?w.fromJSON(e.attachEntityComponent):void 0,componentRemoved:B(e.componentRemoved)?S.fromJSON(e.componentRemoved):void 0,setEntityParent:B(e.setEntityParent)?I.fromJSON(e.setEntityParent):void 0,query:B(e.query)?x.fromJSON(e.query):void 0,componentCreated:B(e.componentCreated)?N.fromJSON(e.componentCreated):void 0,componentDisposed:B(e.componentDisposed)?A.fromJSON(e.componentDisposed):void 0,componentUpdated:B(e.componentUpdated)?O.fromJSON(e.componentUpdated):void 0,initMessagesFinished:B(e.initMessagesFinished)?P.fromJSON(e.initMessagesFinished):void 0}),toJSON(e){const t={};return void 0!==e.openExternalUrl&&(t.openExternalUrl=e.openExternalUrl?b.toJSON(e.openExternalUrl):void 0),void 0!==e.openNftDialog&&(t.openNftDialog=e.openNftDialog?T.toJSON(e.openNftDialog):void 0),void 0!==e.createEntity&&(t.createEntity=e.createEntity?E.toJSON(e.createEntity):void 0),void 0!==e.removeEntity&&(t.removeEntity=e.removeEntity?R.toJSON(e.removeEntity):void 0),void 0!==e.updateEntityComponent&&(t.updateEntityComponent=e.updateEntityComponent?_.toJSON(e.updateEntityComponent):void 0),void 0!==e.attachEntityComponent&&(t.attachEntityComponent=e.attachEntityComponent?w.toJSON(e.attachEntityComponent):void 0),void 0!==e.componentRemoved&&(t.componentRemoved=e.componentRemoved?S.toJSON(e.componentRemoved):void 0),void 0!==e.setEntityParent&&(t.setEntityParent=e.setEntityParent?I.toJSON(e.setEntityParent):void 0),void 0!==e.query&&(t.query=e.query?x.toJSON(e.query):void 0),void 0!==e.componentCreated&&(t.componentCreated=e.componentCreated?N.toJSON(e.componentCreated):void 0),void 0!==e.componentDisposed&&(t.componentDisposed=e.componentDisposed?A.toJSON(e.componentDisposed):void 0),void 0!==e.componentUpdated&&(t.componentUpdated=e.componentUpdated?O.toJSON(e.componentUpdated):void 0),void 0!==e.initMessagesFinished&&(t.initMessagesFinished=e.initMessagesFinished?P.toJSON(e.initMessagesFinished):void 0),t},fromPartial(e){const t={openExternalUrl:void 0,openNftDialog:void 0,createEntity:void 0,removeEntity:void 0,updateEntityComponent:void 0,attachEntityComponent:void 0,componentRemoved:void 0,setEntityParent:void 0,query:void 0,componentCreated:void 0,componentDisposed:void 0,componentUpdated:void 0,initMessagesFinished:void 0};return t.openExternalUrl=void 0!==e.openExternalUrl&&null!==e.openExternalUrl?b.fromPartial(e.openExternalUrl):void 0,t.openNftDialog=void 0!==e.openNftDialog&&null!==e.openNftDialog?T.fromPartial(e.openNftDialog):void 0,t.createEntity=void 0!==e.createEntity&&null!==e.createEntity?E.fromPartial(e.createEntity):void 0,t.removeEntity=void 0!==e.removeEntity&&null!==e.removeEntity?R.fromPartial(e.removeEntity):void 0,t.updateEntityComponent=void 0!==e.updateEntityComponent&&null!==e.updateEntityComponent?_.fromPartial(e.updateEntityComponent):void 0,t.attachEntityComponent=void 0!==e.attachEntityComponent&&null!==e.attachEntityComponent?w.fromPartial(e.attachEntityComponent):void 0,t.componentRemoved=void 0!==e.componentRemoved&&null!==e.componentRemoved?S.fromPartial(e.componentRemoved):void 0,t.setEntityParent=void 0!==e.setEntityParent&&null!==e.setEntityParent?I.fromPartial(e.setEntityParent):void 0,t.query=void 0!==e.query&&null!==e.query?x.fromPartial(e.query):void 0,t.componentCreated=void 0!==e.componentCreated&&null!==e.componentCreated?N.fromPartial(e.componentCreated):void 0,t.componentDisposed=void 0!==e.componentDisposed&&null!==e.componentDisposed?A.fromPartial(e.componentDisposed):void 0,t.componentUpdated=void 0!==e.componentUpdated&&null!==e.componentUpdated?O.fromPartial(e.componentUpdated):void 0,t.initMessagesFinished=void 0!==e.initMessagesFinished&&null!==e.initMessagesFinished?P.fromPartial(e.initMessagesFinished):void 0,t}};const C={encode:(e,t=a.a.Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),void 0!==e.tag&&t.uint32(18).string(e.tag),void 0!==e.payload&&M.encode(e.payload,t.uint32(26).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={type:0,tag:void 0,payload:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.type=r.int32();break;case 2:o.tag=r.string();break;case 3:o.payload=M.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({type:B(e.type)?g(e.type):0,tag:B(e.tag)?String(e.tag):void 0,payload:B(e.payload)?M.fromJSON(e.payload):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case f.EAT_INVALID_EA_TYPE:return"EAT_INVALID_EA_TYPE";case f.EAT_OPEN_EXTERNAL_URL:return"EAT_OPEN_EXTERNAL_URL";case f.EAT_OPEN_NFT_DIALOG:return"EAT_OPEN_NFT_DIALOG";case f.EAT_CREATE_ENTITY:return"EAT_CREATE_ENTITY";case f.EAT_REMOVE_ENTITY:return"EAT_REMOVE_ENTITY";case f.EAT_UPDATE_ENTITY_COMPONENT:return"EAT_UPDATE_ENTITY_COMPONENT";case f.EAT_ATTACH_ENTITY_COMPONENT:return"EAT_ATTACH_ENTITY_COMPONENT";case f.EAT_COMPONENT_REMOVED:return"EAT_COMPONENT_REMOVED";case f.EAT_SET_ENTITY_PARENT:return"EAT_SET_ENTITY_PARENT";case f.EAT_QUERY:return"EAT_QUERY";case f.EAT_COMPONENT_CREATED:return"EAT_COMPONENT_CREATED";case f.EAT_COMPONENT_DISPOSED:return"EAT_COMPONENT_DISPOSED";case f.EAT_COMPONENT_UPDATED:return"EAT_COMPONENT_UPDATED";case f.EAT_INIT_MESSAGES_FINISHED:return"EAT_INIT_MESSAGES_FINISHED";case f.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e.type)),void 0!==e.tag&&(t.tag=e.tag),void 0!==e.payload&&(t.payload=e.payload?M.toJSON(e.payload):void 0),t},fromPartial(e){var t,r;const n={type:0,tag:void 0,payload:void 0};return n.type=null!==(t=e.type)&&void 0!==t?t:0,n.tag=null!==(r=e.tag)&&void 0!==r?r:void 0,n.payload=void 0!==e.payload&&null!==e.payload?M.fromPartial(e.payload):void 0,n}};const k={encode(e,t=a.a.Writer.create()){for(const r of e.events)L.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={events:[]};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.events.push(L.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return o},fromJSON:e=>({events:Array.isArray(null==e?void 0:e.events)?e.events.map(e=>L.fromJSON(e)):[]}),toJSON(e){const t={};return e.events?t.events=e.events.map(e=>e?L.toJSON(e):void 0):t.events=[],t},fromPartial(e){var t;const r={events:[]};return r.events=(null===(t=e.events)||void 0===t?void 0:t.map(e=>L.fromPartial(e)))||[],r}};const D={encode:(e,t=a.a.Writer.create())=>(""!==e.eventId&&t.uint32(26).string(e.eventId),""!==e.eventData&&t.uint32(34).string(e.eventData),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={eventId:"",eventData:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 3:o.eventId=r.string();break;case 4:o.eventData=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({eventId:B(e.eventId)?String(e.eventId):"",eventData:B(e.eventData)?String(e.eventData):""}),toJSON(e){const t={};return void 0!==e.eventId&&(t.eventId=e.eventId),void 0!==e.eventData&&(t.eventData=e.eventData),t},fromPartial(e){var t,r;const n={eventId:"",eventData:""};return n.eventId=null!==(t=e.eventId)&&void 0!==t?t:"",n.eventData=null!==(r=e.eventData)&&void 0!==r?r:"",n}};const z={encode:(e,t=a.a.Writer.create())=>(0!==e.x&&t.uint32(13).float(e.x),0!==e.y&&t.uint32(21).float(e.y),0!==e.z&&t.uint32(29).float(e.z),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={x:0,y:0,z:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.x=r.float();break;case 2:o.y=r.float();break;case 3:o.z=r.float();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({x:B(e.x)?Number(e.x):0,y:B(e.y)?Number(e.y):0,z:B(e.z)?Number(e.z):0}),toJSON(e){const t={};return void 0!==e.x&&(t.x=e.x),void 0!==e.y&&(t.y=e.y),void 0!==e.z&&(t.z=e.z),t},fromPartial(e){var t,r,n;const o={x:0,y:0,z:0};return o.x=null!==(t=e.x)&&void 0!==t?t:0,o.y=null!==(r=e.y)&&void 0!==r?r:0,o.z=null!==(n=e.z)&&void 0!==n?n:0,o}};const F={encode:(e,t=a.a.Writer.create())=>(0!==e.x&&t.uint32(13).float(e.x),0!==e.y&&t.uint32(21).float(e.y),0!==e.z&&t.uint32(29).float(e.z),0!==e.w&&t.uint32(37).float(e.w),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={x:0,y:0,z:0,w:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.x=r.float();break;case 2:o.y=r.float();break;case 3:o.z=r.float();break;case 4:o.w=r.float();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({x:B(e.x)?Number(e.x):0,y:B(e.y)?Number(e.y):0,z:B(e.z)?Number(e.z):0,w:B(e.w)?Number(e.w):0}),toJSON(e){const t={};return void 0!==e.x&&(t.x=e.x),void 0!==e.y&&(t.y=e.y),void 0!==e.z&&(t.z=e.z),void 0!==e.w&&(t.w=e.w),t},fromPartial(e){var t,r,n,o;const s={x:0,y:0,z:0,w:0};return s.x=null!==(t=e.x)&&void 0!==t?t:0,s.y=null!==(r=e.y)&&void 0!==r?r:0,s.z=null!==(n=e.z)&&void 0!==n?n:0,s.w=null!==(o=e.w)&&void 0!==o?o:0,s}};const U={encode:(e,t=a.a.Writer.create())=>(void 0!==e.position&&z.encode(e.position,t.uint32(10).fork()).ldelim(),void 0!==e.cameraPosition&&z.encode(e.cameraPosition,t.uint32(18).fork()).ldelim(),0!==e.playerHeight&&t.uint32(29).float(e.playerHeight),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={position:void 0,cameraPosition:void 0,playerHeight:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.position=z.decode(r,r.uint32());break;case 2:o.cameraPosition=z.decode(r,r.uint32());break;case 3:o.playerHeight=r.float();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({position:B(e.position)?z.fromJSON(e.position):void 0,cameraPosition:B(e.cameraPosition)?z.fromJSON(e.cameraPosition):void 0,playerHeight:B(e.playerHeight)?Number(e.playerHeight):0}),toJSON(e){const t={};return void 0!==e.position&&(t.position=e.position?z.toJSON(e.position):void 0),void 0!==e.cameraPosition&&(t.cameraPosition=e.cameraPosition?z.toJSON(e.cameraPosition):void 0),void 0!==e.playerHeight&&(t.playerHeight=e.playerHeight),t},fromPartial(e){var t;const r={position:void 0,cameraPosition:void 0,playerHeight:0};return r.position=void 0!==e.position&&null!==e.position?z.fromPartial(e.position):void 0,r.cameraPosition=void 0!==e.cameraPosition&&null!==e.cameraPosition?z.fromPartial(e.cameraPosition):void 0,r.playerHeight=null!==(t=e.playerHeight)&&void 0!==t?t:0,r}};const J={encode:(e,t=a.a.Writer.create())=>(void 0!==e.rotation&&z.encode(e.rotation,t.uint32(10).fork()).ldelim(),void 0!==e.quaternion&&F.encode(e.quaternion,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={rotation:void 0,quaternion:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.rotation=z.decode(r,r.uint32());break;case 2:o.quaternion=F.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({rotation:B(e.rotation)?z.fromJSON(e.rotation):void 0,quaternion:B(e.quaternion)?F.fromJSON(e.quaternion):void 0}),toJSON(e){const t={};return void 0!==e.rotation&&(t.rotation=e.rotation?z.toJSON(e.rotation):void 0),void 0!==e.quaternion&&(t.quaternion=e.quaternion?F.toJSON(e.quaternion):void 0),t},fromPartial(e){const t={rotation:void 0,quaternion:void 0};return t.rotation=void 0!==e.rotation&&null!==e.rotation?z.fromPartial(e.rotation):void 0,t.quaternion=void 0!==e.quaternion&&null!==e.quaternion?F.fromPartial(e.quaternion):void 0,t}};const L={encode:(e,t=a.a.Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),void 0!==e.generic&&D.encode(e.generic,t.uint32(18).fork()).ldelim(),void 0!==e.positionChanged&&U.encode(e.positionChanged,t.uint32(26).fork()).ldelim(),void 0!==e.rotationChanged&&J.encode(e.rotationChanged,t.uint32(34).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={type:0,generic:void 0,positionChanged:void 0,rotationChanged:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.type=r.int32();break;case 2:o.generic=D.decode(r,r.uint32());break;case 3:o.positionChanged=U.decode(r,r.uint32());break;case 4:o.rotationChanged=J.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({type:B(e.type)?v(e.type):0,generic:B(e.generic)?D.fromJSON(e.generic):void 0,positionChanged:B(e.positionChanged)?U.fromJSON(e.positionChanged):void 0,rotationChanged:B(e.rotationChanged)?J.fromJSON(e.rotationChanged):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case m.EDT_GENERIC:return"EDT_GENERIC";case m.EDT_POSITION_CHANGED:return"EDT_POSITION_CHANGED";case m.EDT_ROTATION_CHANGED:return"EDT_ROTATION_CHANGED";case m.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e.type)),void 0!==e.generic&&(t.generic=e.generic?D.toJSON(e.generic):void 0),void 0!==e.positionChanged&&(t.positionChanged=e.positionChanged?U.toJSON(e.positionChanged):void 0),void 0!==e.rotationChanged&&(t.rotationChanged=e.rotationChanged?J.toJSON(e.rotationChanged):void 0),t},fromPartial(e){var t;const r={type:0,generic:void 0,positionChanged:void 0,rotationChanged:void 0};return r.type=null!==(t=e.type)&&void 0!==t?t:0,r.generic=void 0!==e.generic&&null!==e.generic?D.fromPartial(e.generic):void 0,r.positionChanged=void 0!==e.positionChanged&&null!==e.positionChanged?U.fromPartial(e.positionChanged):void 0,r.rotationChanged=void 0!==e.rotationChanged&&null!==e.rotationChanged?J.fromPartial(e.rotationChanged):void 0,r}},q={name:"EngineApiService",fullName:"decentraland.kernel.apis.EngineApiService",methods:{sendBatch:{name:"SendBatch",requestType:{encode(e,t=a.a.Writer.create()){for(const r of e.actions)C.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={actions:[]};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.actions.push(C.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return o},fromJSON:e=>({actions:Array.isArray(null==e?void 0:e.actions)?e.actions.map(e=>C.fromJSON(e)):[]}),toJSON(e){const t={};return e.actions?t.actions=e.actions.map(e=>e?C.toJSON(e):void 0):t.actions=[],t},fromPartial(e){var t;const r={actions:[]};return r.actions=(null===(t=e.actions)||void 0===t?void 0:t.map(e=>C.fromPartial(e)))||[],r}},requestStream:!1,responseType:k,responseStream:!1,options:{}},subscribe:{name:"Subscribe",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.eventId&&t.uint32(10).string(e.eventId),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={eventId:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.eventId=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({eventId:B(e.eventId)?String(e.eventId):""}),toJSON(e){const t={};return void 0!==e.eventId&&(t.eventId=e.eventId),t},fromPartial(e){var t;const r={eventId:""};return r.eventId=null!==(t=e.eventId)&&void 0!==t?t:"",r}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},responseStream:!1,options:{}},unsubscribe:{name:"Unsubscribe",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.eventId&&t.uint32(10).string(e.eventId),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={eventId:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.eventId=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({eventId:B(e.eventId)?String(e.eventId):""}),toJSON(e){const t={};return void 0!==e.eventId&&(t.eventId=e.eventId),t},fromPartial(e){var t;const r={eventId:""};return r.eventId=null!==(t=e.eventId)&&void 0!==t?t:"",r}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},responseStream:!1,options:{}}}};function B(e){return null!=e}const j={encode:(e,t=a.a.Writer.create())=>(""!==e.file&&t.uint32(10).string(e.file),""!==e.hash&&t.uint32(18).string(e.hash),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={file:"",hash:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.file=r.string();break;case 2:o.hash=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({file:W(e.file)?String(e.file):"",hash:W(e.hash)?String(e.hash):""}),toJSON(e){const t={};return void 0!==e.file&&(t.file=e.file),void 0!==e.hash&&(t.hash=e.hash),t},fromPartial(e){var t,r;const n={file:"",hash:""};return n.file=null!==(t=e.file)&&void 0!==t?t:"",n.hash=null!==(r=e.hash)&&void 0!==r?r:"",n}};function W(e){return null!=e}const V={encode(e,t=a.a.Writer.create()){for(const r of e.content)j.encode(r,t.uint32(10).fork()).ldelim();return""!==e.metadataJson&&t.uint32(18).string(e.metadataJson),t},decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={content:[],metadataJson:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.content.push(j.decode(r,r.uint32()));break;case 2:o.metadataJson=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({content:Array.isArray(null==e?void 0:e.content)?e.content.map(e=>j.fromJSON(e)):[],metadataJson:Z(e.metadataJson)?String(e.metadataJson):""}),toJSON(e){const t={};return e.content?t.content=e.content.map(e=>e?j.toJSON(e):void 0):t.content=[],void 0!==e.metadataJson&&(t.metadataJson=e.metadataJson),t},fromPartial(e){var t,r;const n={content:[],metadataJson:""};return n.content=(null===(t=e.content)||void 0===t?void 0:t.map(e=>j.fromPartial(e)))||[],n.metadataJson=null!==(r=e.metadataJson)&&void 0!==r?r:"",n}};const G={encode:(e,t=a.a.Writer.create())=>(""!==e.domain&&t.uint32(10).string(e.domain),""!==e.layer&&t.uint32(18).string(e.layer),""!==e.room&&t.uint32(26).string(e.room),""!==e.serverName&&t.uint32(34).string(e.serverName),""!==e.displayName&&t.uint32(42).string(e.displayName),""!==e.protocol&&t.uint32(50).string(e.protocol),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={domain:"",layer:"",room:"",serverName:"",displayName:"",protocol:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.domain=r.string();break;case 2:o.layer=r.string();break;case 3:o.room=r.string();break;case 4:o.serverName=r.string();break;case 5:o.displayName=r.string();break;case 6:o.protocol=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({domain:Z(e.domain)?String(e.domain):"",layer:Z(e.layer)?String(e.layer):"",room:Z(e.room)?String(e.room):"",serverName:Z(e.serverName)?String(e.serverName):"",displayName:Z(e.displayName)?String(e.displayName):"",protocol:Z(e.protocol)?String(e.protocol):""}),toJSON(e){const t={};return void 0!==e.domain&&(t.domain=e.domain),void 0!==e.layer&&(t.layer=e.layer),void 0!==e.room&&(t.room=e.room),void 0!==e.serverName&&(t.serverName=e.serverName),void 0!==e.displayName&&(t.displayName=e.displayName),void 0!==e.protocol&&(t.protocol=e.protocol),t},fromPartial(e){var t,r,n,o,s,i;const a={domain:"",layer:"",room:"",serverName:"",displayName:"",protocol:""};return a.domain=null!==(t=e.domain)&&void 0!==t?t:"",a.layer=null!==(r=e.layer)&&void 0!==r?r:"",a.room=null!==(n=e.room)&&void 0!==n?n:"",a.serverName=null!==(o=e.serverName)&&void 0!==o?o:"",a.displayName=null!==(s=e.displayName)&&void 0!==s?s:"",a.protocol=null!==(i=e.protocol)&&void 0!==i?i:"",a}};const H={encode:(e,t=a.a.Writer.create())=>(""!==e.clientUri&&t.uint32(10).string(e.clientUri),Object.entries(e.configurations).forEach(([e,r])=>{Y.encode({key:e,value:r},t.uint32(18).fork()).ldelim()}),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={clientUri:"",configurations:{}};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.clientUri=r.string();break;case 2:const t=Y.decode(r,r.uint32());void 0!==t.value&&(o.configurations[t.key]=t.value);break;default:r.skipType(7&e)}}return o},fromJSON(e){return{clientUri:Z(e.clientUri)?String(e.clientUri):"",configurations:(t=e.configurations,"object"==typeof t&&null!==t?Object.entries(e.configurations).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{})};var t},toJSON(e){const t={};return void 0!==e.clientUri&&(t.clientUri=e.clientUri),t.configurations={},e.configurations&&Object.entries(e.configurations).forEach(([e,r])=>{t.configurations[e]=r}),t},fromPartial(e){var t,r;const n={clientUri:"",configurations:{}};return n.clientUri=null!==(t=e.clientUri)&&void 0!==t?t:"",n.configurations=Object.entries(null!==(r=e.configurations)&&void 0!==r?r:{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=String(r)),e),{}),n}};const Y={encode:(e,t=a.a.Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={key:"",value:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.key=r.string();break;case 2:o.value=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({key:Z(e.key)?String(e.key):"",value:Z(e.value)?String(e.value):""}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,r;const n={key:"",value:""};return n.key=null!==(t=e.key)&&void 0!==t?t:"",n.value=null!==(r=e.value)&&void 0!==r?r:"",n}};const Q={name:"EnvironmentApiService",fullName:"decentraland.kernel.apis.EnvironmentApiService",methods:{getBootstrapData:{name:"GetBootstrapData",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(""!==e.id&&t.uint32(10).string(e.id),""!==e.baseUrl&&t.uint32(34).string(e.baseUrl),void 0!==e.entity&&V.encode(e.entity,t.uint32(18).fork()).ldelim(),!0===e.useFPSThrottling&&t.uint32(40).bool(e.useFPSThrottling),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={id:"",baseUrl:"",entity:void 0,useFPSThrottling:!1};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.id=r.string();break;case 4:o.baseUrl=r.string();break;case 2:o.entity=V.decode(r,r.uint32());break;case 5:o.useFPSThrottling=r.bool();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({id:Z(e.id)?String(e.id):"",baseUrl:Z(e.baseUrl)?String(e.baseUrl):"",entity:Z(e.entity)?V.fromJSON(e.entity):void 0,useFPSThrottling:!!Z(e.useFPSThrottling)&&Boolean(e.useFPSThrottling)}),toJSON(e){const t={};return void 0!==e.id&&(t.id=e.id),void 0!==e.baseUrl&&(t.baseUrl=e.baseUrl),void 0!==e.entity&&(t.entity=e.entity?V.toJSON(e.entity):void 0),void 0!==e.useFPSThrottling&&(t.useFPSThrottling=e.useFPSThrottling),t},fromPartial(e){var t,r,n;const o={id:"",baseUrl:"",entity:void 0,useFPSThrottling:!1};return o.id=null!==(t=e.id)&&void 0!==t?t:"",o.baseUrl=null!==(r=e.baseUrl)&&void 0!==r?r:"",o.entity=void 0!==e.entity&&null!==e.entity?V.fromPartial(e.entity):void 0,o.useFPSThrottling=null!==(n=e.useFPSThrottling)&&void 0!==n&&n,o}},responseStream:!1,options:{}},isPreviewMode:{name:"IsPreviewMode",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(!0===e.isPreview&&t.uint32(8).bool(e.isPreview),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={isPreview:!1};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.isPreview=r.bool();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({isPreview:!!Z(e.isPreview)&&Boolean(e.isPreview)}),toJSON(e){const t={};return void 0!==e.isPreview&&(t.isPreview=e.isPreview),t},fromPartial(e){var t;const r={isPreview:!1};return r.isPreview=null!==(t=e.isPreview)&&void 0!==t&&t,r}},responseStream:!1,options:{}},getPlatform:{name:"GetPlatform",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(""!==e.platform&&t.uint32(10).string(e.platform),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={platform:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.platform=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({platform:Z(e.platform)?String(e.platform):""}),toJSON(e){const t={};return void 0!==e.platform&&(t.platform=e.platform),t},fromPartial(e){var t;const r={platform:""};return r.platform=null!==(t=e.platform)&&void 0!==t?t:"",r}},responseStream:!1,options:{}},areUnsafeRequestAllowed:{name:"AreUnsafeRequestAllowed",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(!0===e.status&&t.uint32(8).bool(e.status),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={status:!1};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.status=r.bool();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({status:!!Z(e.status)&&Boolean(e.status)}),toJSON(e){const t={};return void 0!==e.status&&(t.status=e.status),t},fromPartial(e){var t;const r={status:!1};return r.status=null!==(t=e.status)&&void 0!==t&&t,r}},responseStream:!1,options:{}},getCurrentRealm:{name:"GetCurrentRealm",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(void 0!==e.currentRealm&&G.encode(e.currentRealm,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={currentRealm:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.currentRealm=G.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({currentRealm:Z(e.currentRealm)?G.fromJSON(e.currentRealm):void 0}),toJSON(e){const t={};return void 0!==e.currentRealm&&(t.currentRealm=e.currentRealm?G.toJSON(e.currentRealm):void 0),t},fromPartial(e){const t={currentRealm:void 0};return t.currentRealm=void 0!==e.currentRealm&&null!==e.currentRealm?G.fromPartial(e.currentRealm):void 0,t}},responseStream:!1,options:{}},getExplorerConfiguration:{name:"GetExplorerConfiguration",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:H,responseStream:!1,options:{}},getDecentralandTime:{name:"GetDecentralandTime",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(0!==e.seconds&&t.uint32(8).int32(e.seconds),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={seconds:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.seconds=r.int32();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({seconds:Z(e.seconds)?Number(e.seconds):0}),toJSON(e){const t={};return void 0!==e.seconds&&(t.seconds=Math.round(e.seconds)),t},fromPartial(e){var t;const r={seconds:0};return r.seconds=null!==(t=e.seconds)&&void 0!==t?t:0,r}},responseStream:!1,options:{}}}};function Z(e){return null!=e}var K,$;($=K||(K={})).create=function(e){return s.loadService(e,Q)},$.createLegacy=function(e){const t=s.loadService(e,Q);return Object.assign(Object.assign({},t),{async getBootstrapData(){var e,r,n;const o=await t.getBootstrapData({}),s=JSON.parse((null===(e=o.entity)||void 0===e?void 0:e.metadataJson)||"{}");return{sceneId:o.id,name:(null===(r=s.display)||void 0===r?void 0:r.title)||"Unnamed",main:s.main,baseUrl:o.baseUrl,mappings:(null===(n=o.entity)||void 0===n?void 0:n.content)||[],useFPSThrottling:o.useFPSThrottling,data:s}},areUnsafeRequestAllowed:async()=>(await t.areUnsafeRequestAllowed({})).status,getCurrentRealm:async()=>(await t.getCurrentRealm({})).currentRealm,isPreviewMode:async()=>(await t.isPreviewMode({})).isPreview,getExplorerConfiguration:async()=>await t.getExplorerConfiguration({}),getPlatform:async()=>(await t.getPlatform({})).platform,getDecentralandTime:async()=>await t.getDecentralandTime({})})};const X={encode:(e,t=a.a.Writer.create())=>(Object.entries(e.message).forEach(([e,r])=>{ee.encode({key:e,value:r},t.uint32(10).fork()).ldelim()}),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={message:{}};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:const t=ee.decode(r,r.uint32());void 0!==t.value&&(o.message[t.key]=t.value);break;default:r.skipType(7&e)}}return o},fromJSON:e=>({message:oe(e.message)?Object.entries(e.message).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){const t={message:{}};return e.message&&Object.entries(e.message).forEach(([e,r])=>{t.message[e]=r}),t},fromPartial(e){var t;const r={message:{}};return r.message=Object.entries(null!==(t=e.message)&&void 0!==t?t:{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=String(r)),e),{}),r}};const ee={encode:(e,t=a.a.Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={key:"",value:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.key=r.string();break;case 2:o.value=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({key:se(e.key)?String(e.key):"",value:se(e.value)?String(e.value):""}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,r;const n={key:"",value:""};return n.key=null!==(t=e.key)&&void 0!==t?t:"",n.value=null!==(r=e.value)&&void 0!==r?r:"",n}};const te={encode:(e,t=a.a.Writer.create())=>(Object.entries(e.dict).forEach(([e,r])=>{re.encode({key:e,value:r},t.uint32(10).fork()).ldelim()}),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={dict:{}};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:const t=re.decode(r,r.uint32());void 0!==t.value&&(o.dict[t.key]=t.value);break;default:r.skipType(7&e)}}return o},fromJSON:e=>({dict:oe(e.dict)?Object.entries(e.dict).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){const t={dict:{}};return e.dict&&Object.entries(e.dict).forEach(([e,r])=>{t.dict[e]=r}),t},fromPartial(e){var t;const r={dict:{}};return r.dict=Object.entries(null!==(t=e.dict)&&void 0!==t?t:{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=String(r)),e),{}),r}};const re={encode:(e,t=a.a.Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={key:"",value:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.key=r.string();break;case 2:o.value=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({key:se(e.key)?String(e.key):"",value:se(e.value)?String(e.value):""}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,r;const n={key:"",value:""};return n.key=null!==(t=e.key)&&void 0!==t?t:"",n.value=null!==(r=e.value)&&void 0!==r?r:"",n}};const ne={name:"EthereumControllerService",fullName:"decentraland.kernel.apis.EthereumControllerService",methods:{requirePayment:{name:"RequirePayment",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.toAddress&&t.uint32(10).string(e.toAddress),0!==e.amount&&t.uint32(21).float(e.amount),""!==e.currency&&t.uint32(26).string(e.currency),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={toAddress:"",amount:0,currency:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.toAddress=r.string();break;case 2:o.amount=r.float();break;case 3:o.currency=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({toAddress:se(e.toAddress)?String(e.toAddress):"",amount:se(e.amount)?Number(e.amount):0,currency:se(e.currency)?String(e.currency):""}),toJSON(e){const t={};return void 0!==e.toAddress&&(t.toAddress=e.toAddress),void 0!==e.amount&&(t.amount=e.amount),void 0!==e.currency&&(t.currency=e.currency),t},fromPartial(e){var t,r,n;const o={toAddress:"",amount:0,currency:""};return o.toAddress=null!==(t=e.toAddress)&&void 0!==t?t:"",o.amount=null!==(r=e.amount)&&void 0!==r?r:0,o.currency=null!==(n=e.currency)&&void 0!==n?n:"",o}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(""!==e.jsonAnyResponse&&t.uint32(10).string(e.jsonAnyResponse),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={jsonAnyResponse:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.jsonAnyResponse=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({jsonAnyResponse:se(e.jsonAnyResponse)?String(e.jsonAnyResponse):""}),toJSON(e){const t={};return void 0!==e.jsonAnyResponse&&(t.jsonAnyResponse=e.jsonAnyResponse),t},fromPartial(e){var t;const r={jsonAnyResponse:""};return r.jsonAnyResponse=null!==(t=e.jsonAnyResponse)&&void 0!==t?t:"",r}},responseStream:!1,options:{}},signMessage:{name:"SignMessage",requestType:X,requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(""!==e.message&&t.uint32(10).string(e.message),""!==e.hexEncodedMessage&&t.uint32(18).string(e.hexEncodedMessage),""!==e.signature&&t.uint32(26).string(e.signature),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={message:"",hexEncodedMessage:"",signature:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.message=r.string();break;case 2:o.hexEncodedMessage=r.string();break;case 3:o.signature=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({message:se(e.message)?String(e.message):"",hexEncodedMessage:se(e.hexEncodedMessage)?String(e.hexEncodedMessage):"",signature:se(e.signature)?String(e.signature):""}),toJSON(e){const t={};return void 0!==e.message&&(t.message=e.message),void 0!==e.hexEncodedMessage&&(t.hexEncodedMessage=e.hexEncodedMessage),void 0!==e.signature&&(t.signature=e.signature),t},fromPartial(e){var t,r,n;const o={message:"",hexEncodedMessage:"",signature:""};return o.message=null!==(t=e.message)&&void 0!==t?t:"",o.hexEncodedMessage=null!==(r=e.hexEncodedMessage)&&void 0!==r?r:"",o.signature=null!==(n=e.signature)&&void 0!==n?n:"",o}},responseStream:!1,options:{}},convertMessageToObject:{name:"ConvertMessageToObject",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.message&&t.uint32(10).string(e.message),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={message:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.message=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({message:se(e.message)?String(e.message):""}),toJSON(e){const t={};return void 0!==e.message&&(t.message=e.message),t},fromPartial(e){var t;const r={message:""};return r.message=null!==(t=e.message)&&void 0!==t?t:"",r}},requestStream:!1,responseType:te,responseStream:!1,options:{}},sendAsync:{name:"SendAsync",requestType:{encode:(e,t=a.a.Writer.create())=>(0!==e.id&&t.uint32(8).int32(e.id),""!==e.method&&t.uint32(18).string(e.method),""!==e.jsonParams&&t.uint32(26).string(e.jsonParams),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={id:0,method:"",jsonParams:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.id=r.int32();break;case 2:o.method=r.string();break;case 3:o.jsonParams=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({id:se(e.id)?Number(e.id):0,method:se(e.method)?String(e.method):"",jsonParams:se(e.jsonParams)?String(e.jsonParams):""}),toJSON(e){const t={};return void 0!==e.id&&(t.id=Math.round(e.id)),void 0!==e.method&&(t.method=e.method),void 0!==e.jsonParams&&(t.jsonParams=e.jsonParams),t},fromPartial(e){var t,r,n;const o={id:0,method:"",jsonParams:""};return o.id=null!==(t=e.id)&&void 0!==t?t:0,o.method=null!==(r=e.method)&&void 0!==r?r:"",o.jsonParams=null!==(n=e.jsonParams)&&void 0!==n?n:"",o}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(""!==e.jsonAnyResponse&&t.uint32(10).string(e.jsonAnyResponse),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={jsonAnyResponse:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.jsonAnyResponse=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({jsonAnyResponse:se(e.jsonAnyResponse)?String(e.jsonAnyResponse):""}),toJSON(e){const t={};return void 0!==e.jsonAnyResponse&&(t.jsonAnyResponse=e.jsonAnyResponse),t},fromPartial(e){var t;const r={jsonAnyResponse:""};return r.jsonAnyResponse=null!==(t=e.jsonAnyResponse)&&void 0!==t?t:"",r}},responseStream:!1,options:{}},getUserAccount:{name:"GetUserAccount",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(void 0!==e.address&&t.uint32(10).string(e.address),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={address:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.address=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({address:se(e.address)?String(e.address):void 0}),toJSON(e){const t={};return void 0!==e.address&&(t.address=e.address),t},fromPartial(e){var t;const r={address:void 0};return r.address=null!==(t=e.address)&&void 0!==t?t:void 0,r}},responseStream:!1,options:{}}}};function oe(e){return"object"==typeof e&&null!==e}function se(e){return null!=e}var ie,ae;(ae=ie||(ie={})).create=function(e){return s.loadService(e,ne)},ae.createLegacy=function(e){const t=s.loadService(e,ne);return Object.assign(Object.assign({},t),{async requirePayment(e,r,n){const o=await t.requirePayment({toAddress:e,amount:r,currency:n});return JSON.parse(o.jsonAnyResponse)},signMessage:async e=>await t.signMessage({message:e}),convertMessageToObject:async e=>(await t.convertMessageToObject({message:e})).dict,sendAsync:async e=>JSON.parse((await t.sendAsync({id:e.id,method:e.method,jsonParams:JSON.stringify(e.params)})).jsonAnyResponse),getUserAccount:async()=>(await t.getUserAccount({})).address})};var ce=r(27);const de={encode(e,t=a.a.Writer.create()){""!==e.parcelId&&t.uint32(10).string(e.parcelId),""!==e.rootCid&&t.uint32(18).string(e.rootCid);for(const r of e.contents)j.encode(r,t.uint32(26).fork()).ldelim();return t},decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={parcelId:"",rootCid:"",contents:[]};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.parcelId=r.string();break;case 2:o.rootCid=r.string();break;case 3:o.contents.push(j.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return o},fromJSON:e=>({parcelId:pe(e.parcelId)?String(e.parcelId):"",rootCid:pe(e.rootCid)?String(e.rootCid):"",contents:Array.isArray(null==e?void 0:e.contents)?e.contents.map(e=>j.fromJSON(e)):[]}),toJSON(e){const t={};return void 0!==e.parcelId&&(t.parcelId=e.parcelId),void 0!==e.rootCid&&(t.rootCid=e.rootCid),e.contents?t.contents=e.contents.map(e=>e?j.toJSON(e):void 0):t.contents=[],t},fromPartial(e){var t,r,n;const o={parcelId:"",rootCid:"",contents:[]};return o.parcelId=null!==(t=e.parcelId)&&void 0!==t?t:"",o.rootCid=null!==(r=e.rootCid)&&void 0!==r?r:"",o.contents=(null===(n=e.contents)||void 0===n?void 0:n.map(e=>j.fromPartial(e)))||[],o}};const ue={encode:(e,t=a.a.Writer.create())=>(""!==e.sceneId&&t.uint32(10).string(e.sceneId),""!==e.sceneJsonData&&t.uint32(18).string(e.sceneJsonData),""!==e.baseUrl&&t.uint32(26).string(e.baseUrl),""!==e.baseUrlBundles&&t.uint32(34).string(e.baseUrlBundles),void 0!==e.mappingsResponse&&de.encode(e.mappingsResponse,t.uint32(42).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={sceneId:"",sceneJsonData:"",baseUrl:"",baseUrlBundles:"",mappingsResponse:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.sceneId=r.string();break;case 2:o.sceneJsonData=r.string();break;case 3:o.baseUrl=r.string();break;case 4:o.baseUrlBundles=r.string();break;case 5:o.mappingsResponse=de.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({sceneId:pe(e.sceneId)?String(e.sceneId):"",sceneJsonData:pe(e.sceneJsonData)?String(e.sceneJsonData):"",baseUrl:pe(e.baseUrl)?String(e.baseUrl):"",baseUrlBundles:pe(e.baseUrlBundles)?String(e.baseUrlBundles):"",mappingsResponse:pe(e.mappingsResponse)?de.fromJSON(e.mappingsResponse):void 0}),toJSON(e){const t={};return void 0!==e.sceneId&&(t.sceneId=e.sceneId),void 0!==e.sceneJsonData&&(t.sceneJsonData=e.sceneJsonData),void 0!==e.baseUrl&&(t.baseUrl=e.baseUrl),void 0!==e.baseUrlBundles&&(t.baseUrlBundles=e.baseUrlBundles),void 0!==e.mappingsResponse&&(t.mappingsResponse=e.mappingsResponse?de.toJSON(e.mappingsResponse):void 0),t},fromPartial(e){var t,r,n,o;const s={sceneId:"",sceneJsonData:"",baseUrl:"",baseUrlBundles:"",mappingsResponse:void 0};return s.sceneId=null!==(t=e.sceneId)&&void 0!==t?t:"",s.sceneJsonData=null!==(r=e.sceneJsonData)&&void 0!==r?r:"",s.baseUrl=null!==(n=e.baseUrl)&&void 0!==n?n:"",s.baseUrlBundles=null!==(o=e.baseUrlBundles)&&void 0!==o?o:"",s.mappingsResponse=void 0!==e.mappingsResponse&&null!==e.mappingsResponse?de.fromPartial(e.mappingsResponse):void 0,s}};const le={name:"ParcelIdentityService",fullName:"decentraland.kernel.apis.ParcelIdentityService",methods:{getParcel:{name:"GetParcel",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(void 0!==e.land&&ue.encode(e.land,t.uint32(10).fork()).ldelim(),""!==e.cid&&t.uint32(18).string(e.cid),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={land:void 0,cid:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.land=ue.decode(r,r.uint32());break;case 2:o.cid=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({land:pe(e.land)?ue.fromJSON(e.land):void 0,cid:pe(e.cid)?String(e.cid):""}),toJSON(e){const t={};return void 0!==e.land&&(t.land=e.land?ue.toJSON(e.land):void 0),void 0!==e.cid&&(t.cid=e.cid),t},fromPartial(e){var t;const r={land:void 0,cid:""};return r.land=void 0!==e.land&&null!==e.land?ue.fromPartial(e.land):void 0,r.cid=null!==(t=e.cid)&&void 0!==t?t:"",r}},responseStream:!1,options:{}},getSceneId:{name:"GetSceneId",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(""!==e.sceneId&&t.uint32(10).string(e.sceneId),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={sceneId:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.sceneId=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({sceneId:pe(e.sceneId)?String(e.sceneId):""}),toJSON(e){const t={};return void 0!==e.sceneId&&(t.sceneId=e.sceneId),t},fromPartial(e){var t;const r={sceneId:""};return r.sceneId=null!==(t=e.sceneId)&&void 0!==t?t:"",r}},responseStream:!1,options:{}},getIsEmpty:{name:"GetIsEmpty",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(!0===e.isEmpty&&t.uint32(8).bool(e.isEmpty),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={isEmpty:!1};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.isEmpty=r.bool();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({isEmpty:!!pe(e.isEmpty)&&Boolean(e.isEmpty)}),toJSON(e){const t={};return void 0!==e.isEmpty&&(t.isEmpty=e.isEmpty),t},fromPartial(e){var t;const r={isEmpty:!1};return r.isEmpty=null!==(t=e.isEmpty)&&void 0!==t&&t,r}},responseStream:!1,options:{}}}};function pe(e){return null!=e}var he,fe;(fe=he||(he={})).create=function(e){return s.loadService(e,le)},fe.createLegacy=function(e){const t=s.loadService(e,le);return Object.assign(Object.assign({},t),{async getParcel(){var e,r,n,o,s,i,a,c,d,u;const l=await t.getParcel({});return{land:{sceneId:(null===(e=l.land)||void 0===e?void 0:e.sceneId)||"",sceneJsonData:JSON.parse((null===(r=l.land)||void 0===r?void 0:r.sceneJsonData)||"{}"),baseUrl:(null===(n=l.land)||void 0===n?void 0:n.baseUrl)||"",baseUrlBundles:(null===(o=l.land)||void 0===o?void 0:o.baseUrlBundles)||"",mappingsResponse:{root_cid:(null===(i=null===(s=l.land)||void 0===s?void 0:s.mappingsResponse)||void 0===i?void 0:i.rootCid)||"",parcel_id:(null===(c=null===(a=l.land)||void 0===a?void 0:a.mappingsResponse)||void 0===c?void 0:c.parcelId)||"",contents:(null===(u=null===(d=l.land)||void 0===d?void 0:d.mappingsResponse)||void 0===u?void 0:u.contents)||[]}},cid:l.cid}},getSceneId:async()=>(await t.getSceneId({})).sceneId})};var me;function ye(e){switch(e){case 0:case"PI_ALLOW_TO_MOVE_PLAYER_INSIDE_SCENE":return me.PI_ALLOW_TO_MOVE_PLAYER_INSIDE_SCENE;case 1:case"PI_ALLOW_TO_TRIGGER_AVATAR_EMOTE":return me.PI_ALLOW_TO_TRIGGER_AVATAR_EMOTE;case 2:case"PI_USE_WEB3_API":return me.PI_USE_WEB3_API;case 3:case"PI_USE_WEBSOCKET":return me.PI_USE_WEBSOCKET;case 4:case"PI_USE_FETCH":return me.PI_USE_FETCH;case-1:case"UNRECOGNIZED":default:return me.UNRECOGNIZED}}function ge(e){switch(e){case me.PI_ALLOW_TO_MOVE_PLAYER_INSIDE_SCENE:return"PI_ALLOW_TO_MOVE_PLAYER_INSIDE_SCENE";case me.PI_ALLOW_TO_TRIGGER_AVATAR_EMOTE:return"PI_ALLOW_TO_TRIGGER_AVATAR_EMOTE";case me.PI_USE_WEB3_API:return"PI_USE_WEB3_API";case me.PI_USE_WEBSOCKET:return"PI_USE_WEBSOCKET";case me.PI_USE_FETCH:return"PI_USE_FETCH";case me.UNRECOGNIZED:default:return"UNRECOGNIZED"}}!function(e){e[e.PI_ALLOW_TO_MOVE_PLAYER_INSIDE_SCENE=0]="PI_ALLOW_TO_MOVE_PLAYER_INSIDE_SCENE",e[e.PI_ALLOW_TO_TRIGGER_AVATAR_EMOTE=1]="PI_ALLOW_TO_TRIGGER_AVATAR_EMOTE",e[e.PI_USE_WEB3_API=2]="PI_USE_WEB3_API",e[e.PI_USE_WEBSOCKET=3]="PI_USE_WEBSOCKET",e[e.PI_USE_FETCH=4]="PI_USE_FETCH",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(me||(me={}));const ve={name:"PermissionsService",fullName:"decentraland.kernel.apis.PermissionsService",methods:{hasPermission:{name:"HasPermission",requestType:{encode:(e,t=a.a.Writer.create())=>(0!==e.permission&&t.uint32(8).int32(e.permission),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={permission:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.permission=r.int32();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({permission:be(e.permission)?ye(e.permission):0}),toJSON(e){const t={};return void 0!==e.permission&&(t.permission=ge(e.permission)),t},fromPartial(e){var t;const r={permission:0};return r.permission=null!==(t=e.permission)&&void 0!==t?t:0,r}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(!0===e.hasPermission&&t.uint32(8).bool(e.hasPermission),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={hasPermission:!1};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.hasPermission=r.bool();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({hasPermission:!!be(e.hasPermission)&&Boolean(e.hasPermission)}),toJSON(e){const t={};return void 0!==e.hasPermission&&(t.hasPermission=e.hasPermission),t},fromPartial(e){var t;const r={hasPermission:!1};return r.hasPermission=null!==(t=e.hasPermission)&&void 0!==t&&t,r}},responseStream:!1,options:{}},hasManyPermissions:{name:"HasManyPermissions",requestType:{encode(e,t=a.a.Writer.create()){t.uint32(10).fork();for(const r of e.permissions)t.int32(r);return t.ldelim(),t},decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={permissions:[]};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:if(2==(7&e)){const e=r.uint32()+r.pos;for(;r.pos<e;)o.permissions.push(r.int32())}else o.permissions.push(r.int32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({permissions:Array.isArray(null==e?void 0:e.permissions)?e.permissions.map(e=>ye(e)):[]}),toJSON(e){const t={};return e.permissions?t.permissions=e.permissions.map(e=>ge(e)):t.permissions=[],t},fromPartial(e){var t;const r={permissions:[]};return r.permissions=(null===(t=e.permissions)||void 0===t?void 0:t.map(e=>e))||[],r}},requestStream:!1,responseType:{encode(e,t=a.a.Writer.create()){t.uint32(10).fork();for(const r of e.hasManyPermission)t.bool(r);return t.ldelim(),t},decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={hasManyPermission:[]};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:if(2==(7&e)){const e=r.uint32()+r.pos;for(;r.pos<e;)o.hasManyPermission.push(r.bool())}else o.hasManyPermission.push(r.bool());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({hasManyPermission:Array.isArray(null==e?void 0:e.hasManyPermission)?e.hasManyPermission.map(e=>Boolean(e)):[]}),toJSON(e){const t={};return e.hasManyPermission?t.hasManyPermission=e.hasManyPermission.map(e=>e):t.hasManyPermission=[],t},fromPartial(e){var t;const r={hasManyPermission:[]};return r.hasManyPermission=(null===(t=e.hasManyPermission)||void 0===t?void 0:t.map(e=>e))||[],r}},responseStream:!1,options:{}}}};function be(e){return null!=e}const Te={encode:(e,t=a.a.Writer.create())=>(""!==e.face256&&t.uint32(10).string(e.face256),""!==e.body&&t.uint32(18).string(e.body),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={face256:"",body:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.face256=r.string();break;case 2:o.body=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({face256:_e(e.face256)?String(e.face256):"",body:_e(e.body)?String(e.body):""}),toJSON(e){const t={};return void 0!==e.face256&&(t.face256=e.face256),void 0!==e.body&&(t.body=e.body),t},fromPartial(e){var t,r;const n={face256:"",body:""};return n.face256=null!==(t=e.face256)&&void 0!==t?t:"",n.body=null!==(r=e.body)&&void 0!==r?r:"",n}};const Ee={encode(e,t=a.a.Writer.create()){""!==e.bodyShape&&t.uint32(10).string(e.bodyShape),""!==e.skinColor&&t.uint32(18).string(e.skinColor),""!==e.hairColor&&t.uint32(26).string(e.hairColor),""!==e.eyeColor&&t.uint32(34).string(e.eyeColor);for(const r of e.wearables)t.uint32(42).string(r);return void 0!==e.snapshots&&Te.encode(e.snapshots,t.uint32(50).fork()).ldelim(),t},decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={bodyShape:"",skinColor:"",hairColor:"",eyeColor:"",wearables:[],snapshots:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.bodyShape=r.string();break;case 2:o.skinColor=r.string();break;case 3:o.hairColor=r.string();break;case 4:o.eyeColor=r.string();break;case 5:o.wearables.push(r.string());break;case 6:o.snapshots=Te.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({bodyShape:_e(e.bodyShape)?String(e.bodyShape):"",skinColor:_e(e.skinColor)?String(e.skinColor):"",hairColor:_e(e.hairColor)?String(e.hairColor):"",eyeColor:_e(e.eyeColor)?String(e.eyeColor):"",wearables:Array.isArray(null==e?void 0:e.wearables)?e.wearables.map(e=>String(e)):[],snapshots:_e(e.snapshots)?Te.fromJSON(e.snapshots):void 0}),toJSON(e){const t={};return void 0!==e.bodyShape&&(t.bodyShape=e.bodyShape),void 0!==e.skinColor&&(t.skinColor=e.skinColor),void 0!==e.hairColor&&(t.hairColor=e.hairColor),void 0!==e.eyeColor&&(t.eyeColor=e.eyeColor),e.wearables?t.wearables=e.wearables.map(e=>e):t.wearables=[],void 0!==e.snapshots&&(t.snapshots=e.snapshots?Te.toJSON(e.snapshots):void 0),t},fromPartial(e){var t,r,n,o,s;const i={bodyShape:"",skinColor:"",hairColor:"",eyeColor:"",wearables:[],snapshots:void 0};return i.bodyShape=null!==(t=e.bodyShape)&&void 0!==t?t:"",i.skinColor=null!==(r=e.skinColor)&&void 0!==r?r:"",i.hairColor=null!==(n=e.hairColor)&&void 0!==n?n:"",i.eyeColor=null!==(o=e.eyeColor)&&void 0!==o?o:"",i.wearables=(null===(s=e.wearables)||void 0===s?void 0:s.map(e=>e))||[],i.snapshots=void 0!==e.snapshots&&null!==e.snapshots?Te.fromPartial(e.snapshots):void 0,i}};const Re={encode:(e,t=a.a.Writer.create())=>(""!==e.displayName&&t.uint32(10).string(e.displayName),void 0!==e.publicKey&&t.uint32(18).string(e.publicKey),!0===e.hasConnectedWeb3&&t.uint32(24).bool(e.hasConnectedWeb3),""!==e.userId&&t.uint32(34).string(e.userId),0!==e.version&&t.uint32(40).int32(e.version),void 0!==e.avatar&&Ee.encode(e.avatar,t.uint32(50).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={displayName:"",publicKey:void 0,hasConnectedWeb3:!1,userId:"",version:0,avatar:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.displayName=r.string();break;case 2:o.publicKey=r.string();break;case 3:o.hasConnectedWeb3=r.bool();break;case 4:o.userId=r.string();break;case 5:o.version=r.int32();break;case 6:o.avatar=Ee.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({displayName:_e(e.displayName)?String(e.displayName):"",publicKey:_e(e.publicKey)?String(e.publicKey):void 0,hasConnectedWeb3:!!_e(e.hasConnectedWeb3)&&Boolean(e.hasConnectedWeb3),userId:_e(e.userId)?String(e.userId):"",version:_e(e.version)?Number(e.version):0,avatar:_e(e.avatar)?Ee.fromJSON(e.avatar):void 0}),toJSON(e){const t={};return void 0!==e.displayName&&(t.displayName=e.displayName),void 0!==e.publicKey&&(t.publicKey=e.publicKey),void 0!==e.hasConnectedWeb3&&(t.hasConnectedWeb3=e.hasConnectedWeb3),void 0!==e.userId&&(t.userId=e.userId),void 0!==e.version&&(t.version=Math.round(e.version)),void 0!==e.avatar&&(t.avatar=e.avatar?Ee.toJSON(e.avatar):void 0),t},fromPartial(e){var t,r,n,o,s;const i={displayName:"",publicKey:void 0,hasConnectedWeb3:!1,userId:"",version:0,avatar:void 0};return i.displayName=null!==(t=e.displayName)&&void 0!==t?t:"",i.publicKey=null!==(r=e.publicKey)&&void 0!==r?r:void 0,i.hasConnectedWeb3=null!==(n=e.hasConnectedWeb3)&&void 0!==n&&n,i.userId=null!==(o=e.userId)&&void 0!==o?o:"",i.version=null!==(s=e.version)&&void 0!==s?s:0,i.avatar=void 0!==e.avatar&&null!==e.avatar?Ee.fromPartial(e.avatar):void 0,i}};function _e(e){return null!=e}const we={encode:(e,t=a.a.Writer.create())=>(""!==e.userId&&t.uint32(10).string(e.userId),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={userId:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.userId=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({userId:xe(e.userId)?String(e.userId):""}),toJSON(e){const t={};return void 0!==e.userId&&(t.userId=e.userId),t},fromPartial(e){var t;const r={userId:""};return r.userId=null!==(t=e.userId)&&void 0!==t?t:"",r}};const Se={encode(e,t=a.a.Writer.create()){for(const r of e.players)we.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={players:[]};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.players.push(we.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return o},fromJSON:e=>({players:Array.isArray(null==e?void 0:e.players)?e.players.map(e=>we.fromJSON(e)):[]}),toJSON(e){const t={};return e.players?t.players=e.players.map(e=>e?we.toJSON(e):void 0):t.players=[],t},fromPartial(e){var t;const r={players:[]};return r.players=(null===(t=e.players)||void 0===t?void 0:t.map(e=>we.fromPartial(e)))||[],r}};const Ie={name:"PlayersService",fullName:"decentraland.kernel.apis.PlayersService",methods:{getPlayerData:{name:"GetPlayerData",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.userId&&t.uint32(10).string(e.userId),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={userId:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.userId=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({userId:xe(e.userId)?String(e.userId):""}),toJSON(e){const t={};return void 0!==e.userId&&(t.userId=e.userId),t},fromPartial(e){var t;const r={userId:""};return r.userId=null!==(t=e.userId)&&void 0!==t?t:"",r}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(void 0!==e.data&&Re.encode(e.data,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={data:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.data=Re.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({data:xe(e.data)?Re.fromJSON(e.data):void 0}),toJSON(e){const t={};return void 0!==e.data&&(t.data=e.data?Re.toJSON(e.data):void 0),t},fromPartial(e){const t={data:void 0};return t.data=void 0!==e.data&&null!==e.data?Re.fromPartial(e.data):void 0,t}},responseStream:!1,options:{}},getPlayersInScene:{name:"GetPlayersInScene",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:Se,responseStream:!1,options:{}},getConnectedPlayers:{name:"GetConnectedPlayers",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:Se,responseStream:!1,options:{}}}};function xe(e){return null!=e}var Ne,Ae;(Ae=Ne||(Ne={})).create=function(e){return s.loadService(e,Ie)},Ae.createLegacy=function(e){const t=s.loadService(e,Ie);return Object.assign(Object.assign({},t),{async getPlayerData(e){const r=await t.getPlayerData({userId:e.userId});return r.data?Object.assign(Object.assign({},r.data),{avatar:Object.assign(Object.assign({},r.data.avatar),{snapshots:r.data.avatar.snapshots}),publicKey:r.data.publicKey||null}):null},getConnectedPlayers:async()=>(await t.getConnectedPlayers({})).players,getPlayersInScene:async()=>(await t.getPlayersInScene({})).players})};const Oe={encode:(e,t=a.a.Writer.create())=>(""!==e.pid&&t.uint32(10).string(e.pid),""!==e.parentCid&&t.uint32(18).string(e.parentCid),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={pid:"",parentCid:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.pid=r.string();break;case 2:o.parentCid=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({pid:Ce(e.pid)?String(e.pid):"",parentCid:Ce(e.parentCid)?String(e.parentCid):""}),toJSON(e){const t={};return void 0!==e.pid&&(t.pid=e.pid),void 0!==e.parentCid&&(t.parentCid=e.parentCid),t},fromPartial(e){var t,r;const n={pid:"",parentCid:""};return n.pid=null!==(t=e.pid)&&void 0!==t?t:"",n.parentCid=null!==(r=e.parentCid)&&void 0!==r?r:"",n}};const Pe={encode(e,t=a.a.Writer.create()){for(const r of e.loaded)Oe.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={loaded:[]};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.loaded.push(Oe.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return o},fromJSON:e=>({loaded:Array.isArray(null==e?void 0:e.loaded)?e.loaded.map(e=>Oe.fromJSON(e)):[]}),toJSON(e){const t={};return e.loaded?t.loaded=e.loaded.map(e=>e?Oe.toJSON(e):void 0):t.loaded=[],t},fromPartial(e){var t;const r={loaded:[]};return r.loaded=(null===(t=e.loaded)||void 0===t?void 0:t.map(e=>Oe.fromPartial(e)))||[],r}};const Me={name:"PortableExperiencesService",fullName:"decentraland.kernel.apis.PortableExperiencesService",methods:{spawn:{name:"Spawn",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.pid&&t.uint32(10).string(e.pid),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={pid:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.pid=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({pid:Ce(e.pid)?String(e.pid):""}),toJSON(e){const t={};return void 0!==e.pid&&(t.pid=e.pid),t},fromPartial(e){var t;const r={pid:""};return r.pid=null!==(t=e.pid)&&void 0!==t?t:"",r}},requestStream:!1,responseType:Oe,responseStream:!1,options:{}},kill:{name:"Kill",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.pid&&t.uint32(10).string(e.pid),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={pid:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.pid=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({pid:Ce(e.pid)?String(e.pid):""}),toJSON(e){const t={};return void 0!==e.pid&&(t.pid=e.pid),t},fromPartial(e){var t;const r={pid:""};return r.pid=null!==(t=e.pid)&&void 0!==t?t:"",r}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(!0===e.status&&t.uint32(8).bool(e.status),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={status:!1};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.status=r.bool();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({status:!!Ce(e.status)&&Boolean(e.status)}),toJSON(e){const t={};return void 0!==e.status&&(t.status=e.status),t},fromPartial(e){var t;const r={status:!1};return r.status=null!==(t=e.status)&&void 0!==t&&t,r}},responseStream:!1,options:{}},exit:{name:"Exit",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(!0===e.status&&t.uint32(8).bool(e.status),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={status:!1};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.status=r.bool();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({status:!!Ce(e.status)&&Boolean(e.status)}),toJSON(e){const t={};return void 0!==e.status&&(t.status=e.status),t},fromPartial(e){var t;const r={status:!1};return r.status=null!==(t=e.status)&&void 0!==t&&t,r}},responseStream:!1,options:{}},getPortableExperiencesLoaded:{name:"GetPortableExperiencesLoaded",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:Pe,responseStream:!1,options:{}}}};function Ce(e){return null!=e}var ke,De;(De=ke||(ke={})).create=function(e){return s.loadService(e,Me)},De.createLegacy=function(e){const t=s.loadService(e,Me);return Object.assign(Object.assign({},t),{spawn:async e=>await t.spawn({pid:e}),kill:async e=>(await t.kill({pid:e})).status,exit:async()=>(await t.exit({})).status,getPortableExperiencesLoaded:async()=>({portableExperiences:(await t.getPortableExperiencesLoaded({})).loaded})})};const ze={encode:(e,t=a.a.Writer.create())=>(0!==e.x&&t.uint32(13).float(e.x),0!==e.y&&t.uint32(21).float(e.y),0!==e.z&&t.uint32(29).float(e.z),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={x:0,y:0,z:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.x=r.float();break;case 2:o.y=r.float();break;case 3:o.z=r.float();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({x:Ue(e.x)?Number(e.x):0,y:Ue(e.y)?Number(e.y):0,z:Ue(e.z)?Number(e.z):0}),toJSON(e){const t={};return void 0!==e.x&&(t.x=e.x),void 0!==e.y&&(t.y=e.y),void 0!==e.z&&(t.z=e.z),t},fromPartial(e){var t,r,n;const o={x:0,y:0,z:0};return o.x=null!==(t=e.x)&&void 0!==t?t:0,o.y=null!==(r=e.y)&&void 0!==r?r:0,o.z=null!==(n=e.z)&&void 0!==n?n:0,o}};const Fe={name:"RestrictedActionsService",fullName:"decentraland.kernel.apis.RestrictedActionsService",methods:{movePlayerTo:{name:"MovePlayerTo",requestType:{encode:(e,t=a.a.Writer.create())=>(void 0!==e.newRelativePosition&&ze.encode(e.newRelativePosition,t.uint32(10).fork()).ldelim(),void 0!==e.cameraTarget&&ze.encode(e.cameraTarget,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={newRelativePosition:void 0,cameraTarget:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.newRelativePosition=ze.decode(r,r.uint32());break;case 2:o.cameraTarget=ze.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({newRelativePosition:Ue(e.newRelativePosition)?ze.fromJSON(e.newRelativePosition):void 0,cameraTarget:Ue(e.cameraTarget)?ze.fromJSON(e.cameraTarget):void 0}),toJSON(e){const t={};return void 0!==e.newRelativePosition&&(t.newRelativePosition=e.newRelativePosition?ze.toJSON(e.newRelativePosition):void 0),void 0!==e.cameraTarget&&(t.cameraTarget=e.cameraTarget?ze.toJSON(e.cameraTarget):void 0),t},fromPartial(e){const t={newRelativePosition:void 0,cameraTarget:void 0};return t.newRelativePosition=void 0!==e.newRelativePosition&&null!==e.newRelativePosition?ze.fromPartial(e.newRelativePosition):void 0,t.cameraTarget=void 0!==e.cameraTarget&&null!==e.cameraTarget?ze.fromPartial(e.cameraTarget):void 0,t}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},responseStream:!1,options:{}},triggerEmote:{name:"TriggerEmote",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.predefinedEmote&&t.uint32(10).string(e.predefinedEmote),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={predefinedEmote:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.predefinedEmote=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({predefinedEmote:Ue(e.predefinedEmote)?String(e.predefinedEmote):""}),toJSON(e){const t={};return void 0!==e.predefinedEmote&&(t.predefinedEmote=e.predefinedEmote),t},fromPartial(e){var t;const r={predefinedEmote:""};return r.predefinedEmote=null!==(t=e.predefinedEmote)&&void 0!==t?t:"",r}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},responseStream:!1,options:{}}}};function Ue(e){return null!=e}var Je,Le;(Le=Je||(Je={})).create=function(e){return s.loadService(e,Fe)},Le.createLegacy=function(e){const t=s.loadService(e,Fe);return Object.assign(Object.assign({},t),{async movePlayerTo(e,r){await t.movePlayerTo({newRelativePosition:e,cameraTarget:r||void 0})},async triggerEmote(e){await t.triggerEmote({predefinedEmote:e.predefined})}})};const qe={encode:(e,t=a.a.Writer.create())=>(void 0!==e.method&&t.uint32(10).string(e.method),void 0!==e.body&&t.uint32(18).string(e.body),Object.entries(e.headers).forEach(([e,r])=>{Be.encode({key:e,value:r},t.uint32(26).fork()).ldelim()}),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={method:void 0,body:void 0,headers:{}};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.method=r.string();break;case 2:o.body=r.string();break;case 3:const t=Be.decode(r,r.uint32());void 0!==t.value&&(o.headers[t.key]=t.value);break;default:r.skipType(7&e)}}return o},fromJSON:e=>({method:He(e.method)?String(e.method):void 0,body:He(e.body)?String(e.body):void 0,headers:Ge(e.headers)?Object.entries(e.headers).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){const t={};return void 0!==e.method&&(t.method=e.method),void 0!==e.body&&(t.body=e.body),t.headers={},e.headers&&Object.entries(e.headers).forEach(([e,r])=>{t.headers[e]=r}),t},fromPartial(e){var t,r,n;const o={method:void 0,body:void 0,headers:{}};return o.method=null!==(t=e.method)&&void 0!==t?t:void 0,o.body=null!==(r=e.body)&&void 0!==r?r:void 0,o.headers=Object.entries(null!==(n=e.headers)&&void 0!==n?n:{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=String(r)),e),{}),o}};const Be={encode:(e,t=a.a.Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={key:"",value:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.key=r.string();break;case 2:o.value=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({key:He(e.key)?String(e.key):"",value:He(e.value)?String(e.value):""}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,r;const n={key:"",value:""};return n.key=null!==(t=e.key)&&void 0!==t?t:"",n.value=null!==(r=e.value)&&void 0!==r?r:"",n}};const je={encode:(e,t=a.a.Writer.create())=>(!0===e.ok&&t.uint32(8).bool(e.ok),0!==e.status&&t.uint32(16).int32(e.status),""!==e.statusText&&t.uint32(26).string(e.statusText),Object.entries(e.headers).forEach(([e,r])=>{We.encode({key:e,value:r},t.uint32(34).fork()).ldelim()}),""!==e.body&&t.uint32(42).string(e.body),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={ok:!1,status:0,statusText:"",headers:{},body:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.ok=r.bool();break;case 2:o.status=r.int32();break;case 3:o.statusText=r.string();break;case 4:const t=We.decode(r,r.uint32());void 0!==t.value&&(o.headers[t.key]=t.value);break;case 5:o.body=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({ok:!!He(e.ok)&&Boolean(e.ok),status:He(e.status)?Number(e.status):0,statusText:He(e.statusText)?String(e.statusText):"",headers:Ge(e.headers)?Object.entries(e.headers).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{},body:He(e.body)?String(e.body):""}),toJSON(e){const t={};return void 0!==e.ok&&(t.ok=e.ok),void 0!==e.status&&(t.status=Math.round(e.status)),void 0!==e.statusText&&(t.statusText=e.statusText),t.headers={},e.headers&&Object.entries(e.headers).forEach(([e,r])=>{t.headers[e]=r}),void 0!==e.body&&(t.body=e.body),t},fromPartial(e){var t,r,n,o,s;const i={ok:!1,status:0,statusText:"",headers:{},body:""};return i.ok=null!==(t=e.ok)&&void 0!==t&&t,i.status=null!==(r=e.status)&&void 0!==r?r:0,i.statusText=null!==(n=e.statusText)&&void 0!==n?n:"",i.headers=Object.entries(null!==(o=e.headers)&&void 0!==o?o:{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=String(r)),e),{}),i.body=null!==(s=e.body)&&void 0!==s?s:"",i}};const We={encode:(e,t=a.a.Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={key:"",value:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.key=r.string();break;case 2:o.value=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({key:He(e.key)?String(e.key):"",value:He(e.value)?String(e.value):""}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,r;const n={key:"",value:""};return n.key=null!==(t=e.key)&&void 0!==t?t:"",n.value=null!==(r=e.value)&&void 0!==r?r:"",n}};const Ve={name:"SignedFetchService",fullName:"decentraland.kernel.apis.SignedFetchService",methods:{signedFetch:{name:"SignedFetch",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.url&&t.uint32(10).string(e.url),void 0!==e.init&&qe.encode(e.init,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={url:"",init:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.url=r.string();break;case 2:o.init=qe.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({url:He(e.url)?String(e.url):"",init:He(e.init)?qe.fromJSON(e.init):void 0}),toJSON(e){const t={};return void 0!==e.url&&(t.url=e.url),void 0!==e.init&&(t.init=e.init?qe.toJSON(e.init):void 0),t},fromPartial(e){var t;const r={url:"",init:void 0};return r.url=null!==(t=e.url)&&void 0!==t?t:"",r.init=void 0!==e.init&&null!==e.init?qe.fromPartial(e.init):void 0,r}},requestStream:!1,responseType:je,responseStream:!1,options:{}}}};function Ge(e){return"object"==typeof e&&null!==e}function He(e){return null!=e}var Ye,Qe;(Qe=Ye||(Ye={})).create=function(e){return s.loadService(e,Ve)},Qe.createLegacy=function(e){const t=s.loadService(e,Ve);return Object.assign(Object.assign({},t),{async signedFetch(e,r){let n=void 0;r&&(n={headers:{}},r.headers&&"object"==typeof r.headers&&(n.headers=r.headers),r.body&&"string"==typeof r.body&&(n.body=r.body),r.method&&"string"==typeof r.method&&(n.method=r.method));const o=(null==r?void 0:r.responseBodyType)||"text",s=await t.signedFetch({url:e,init:n});return{ok:s.ok,status:s.status,statusText:s.statusText,headers:s.headers,json:"json"===o?JSON.parse(s.body):void 0,text:"text"===o?s.body:void 0}}})};const Ze={encode:(e,t=a.a.Writer.create())=>(""!==e.event&&t.uint32(10).string(e.event),""!==e.payload&&t.uint32(18).string(e.payload),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={event:"",payload:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.event=r.string();break;case 2:o.payload=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({event:$e(e.event)?String(e.event):"",payload:$e(e.payload)?String(e.payload):""}),toJSON(e){const t={};return void 0!==e.event&&(t.event=e.event),void 0!==e.payload&&(t.payload=e.payload),t},fromPartial(e){var t,r;const n={event:"",payload:""};return n.event=null!==(t=e.event)&&void 0!==t?t:"",n.payload=null!==(r=e.payload)&&void 0!==r?r:"",n}};const Ke={name:"SocialControllerService",fullName:"decentraland.kernel.apis.SocialControllerService",methods:{pullAvatarEvents:{name:"PullAvatarEvents",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode(e,t=a.a.Writer.create()){for(const r of e.events)Ze.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={events:[]};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.events.push(Ze.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return o},fromJSON:e=>({events:Array.isArray(null==e?void 0:e.events)?e.events.map(e=>Ze.fromJSON(e)):[]}),toJSON(e){const t={};return e.events?t.events=e.events.map(e=>e?Ze.toJSON(e):void 0):t.events=[],t},fromPartial(e){var t;const r={events:[]};return r.events=(null===(t=e.events)||void 0===t?void 0:t.map(e=>Ze.fromPartial(e)))||[],r}},responseStream:!1,options:{}}}};function $e(e){return null!=e}const Xe={name:"UserActionModuleService",fullName:"decentraland.kernel.apis.UserActionModuleService",methods:{requestTeleport:{name:"RequestTeleport",requestType:{encode:(e,t=a.a.Writer.create())=>(""!==e.destination&&t.uint32(10).string(e.destination),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={destination:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.destination=r.string();break;default:r.skipType(7&e)}}return o},fromJSON(e){return{destination:(t=e.destination,null!=t?String(e.destination):"")};var t},toJSON(e){const t={};return void 0!==e.destination&&(t.destination=e.destination),t},fromPartial(e){var t;const r={destination:""};return r.destination=null!==(t=e.destination)&&void 0!==t?t:"",r}},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},responseStream:!1,options:{}}}};var et,tt;(tt=et||(et={})).create=function(e){return s.loadService(e,Xe)},tt.createLegacy=function(e){const t=s.loadService(e,Xe);return Object.assign(Object.assign({},t),{async requestTeleport(e){await t.requestTeleport({destination:e})}})};const rt={name:"UserIdentityService",fullName:"decentraland.kernel.apis.UserIdentityService",methods:{getUserPublicKey:{name:"GetUserPublicKey",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(void 0!==e.address&&t.uint32(10).string(e.address),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={address:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.address=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({address:nt(e.address)?String(e.address):void 0}),toJSON(e){const t={};return void 0!==e.address&&(t.address=e.address),t},fromPartial(e){var t;const r={address:void 0};return r.address=null!==(t=e.address)&&void 0!==t?t:void 0,r}},responseStream:!1,options:{}},getUserData:{name:"GetUserData",requestType:{encode:(e,t=a.a.Writer.create())=>t,decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return o},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},requestStream:!1,responseType:{encode:(e,t=a.a.Writer.create())=>(void 0!==e.data&&Re.encode(e.data,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.a.Reader?e:new a.a.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={data:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.data=Re.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({data:nt(e.data)?Re.fromJSON(e.data):void 0}),toJSON(e){const t={};return void 0!==e.data&&(t.data=e.data?Re.toJSON(e.data):void 0),t},fromPartial(e){const t={data:void 0};return t.data=void 0!==e.data&&null!==e.data?Re.fromPartial(e.data):void 0,t}},responseStream:!1,options:{}}}};function nt(e){return null!=e}var ot,st;(st=ot||(ot={})).create=function(e){return s.loadService(e,rt)},st.createLegacy=function(e){const t=s.loadService(e,rt);return Object.assign(Object.assign({},t),{getUserPublicKey:async()=>(await t.getUserPublicKey({})).address||null,async getUserData(){const e=await t.getUserData({});return e.data?Object.assign(Object.assign({},e.data),{avatar:Object.assign(Object.assign({},e.data.avatar),{snapshots:e.data.avatar.snapshots}),publicKey:e.data.publicKey||null}):null}})};const it={DevTools:function(e){return s.loadService(e,l)},EngineApi:function(e){return s.loadService(e,q)},ExperimentalApi:function(e){return s.loadService(e,ce.a)},Permissions:function(e){return s.loadService(e,ve)},SignedFetch:Ye.create,CommunicationsController:d.create,EnvironmentApi:K.create,EthereumController:ie.create,ParcelIdentity:he.create,Players:Ne.create,PortableExperience:ke.create,RestrictedActions:Je.create,UserActionModule:et.create,UserIdentity:ot.create,LegacySignedFetch:Ye.createLegacy,LegacyCommunicationsController:d.createLegacy,LegacyEnvironmentAPI:K.createLegacy,LegacyEthereumController:ie.createLegacy,LegacyParcelIdentity:he.createLegacy,LegacyPlayers:Ne.createLegacy,LegacyPortableExperience:ke.createLegacy,LegacyRestrictedActions:Je.createLegacy,LegacyRestrictedActionModule:Je.createLegacy,LegacyUserActionModule:et.createLegacy,LegacyIdentity:ot.createLegacy,"Legacyweb3-provider":function(e){const t=s.loadService(e,ne);async function r(e){const r=await t.sendAsync({id:e.id,method:e.method,jsonParams:JSON.stringify(e.params)});return JSON.parse(r.jsonAnyResponse)}return{getProvider:async()=>({send(e,t){if(!(e&&t&&t instanceof Function))throw new Error("Decentraland provider only allows async calls");r(e).then(e=>t(null,e)).catch(t)},sendAsync(e,t){r(e).then(e=>t(null,e)).catch(t)}})}},LegacySocialController:function(e){return s.loadService(e,Ke)}};var at=r(2),ct=r(28);const dt={position:new at.Vector3,rotation:new at.Quaternion,scale:new at.Vector3},ut=new ArrayBuffer(40),lt=new DataView(ut),pt={useBinaryTransform:!0};function ht(e,t){if(1===e){const e=JSON.parse(t);return pt.useBinaryTransform?function(e){const t=new at.Vector3(Math.fround(e.position.x),Math.fround(e.position.y),Math.fround(e.position.z));ft(t,1e6);let r=0;lt.setFloat32(r,t.x,!0),lt.setFloat32(r+=4,t.y,!0),lt.setFloat32(r+=4,t.z,!0),lt.setFloat32(r+=4,e.rotation.x,!0),lt.setFloat32(r+=4,e.rotation.y,!0),lt.setFloat32(r+=4,e.rotation.z,!0),lt.setFloat32(r+=4,e.rotation.w,!0),t.set(Math.fround(e.scale.x),Math.fround(e.scale.y),Math.fround(e.scale.z)),ft(t,1e6),lt.setFloat32(r+=4,t.x,!0),lt.setFloat32(r+=4,t.y,!0),lt.setFloat32(r+=4,t.z,!0);const n=new Uint8Array(ut);return btoa(String.fromCharCode(...n))}(e):function(e){dt.position.set(Math.fround(e.position.x),Math.fround(e.position.y),Math.fround(e.position.z)),ft(dt.position,1e6),dt.rotation.copyFrom(e.rotation),dt.scale.set(Math.fround(e.scale.x),Math.fround(e.scale.y),Math.fround(e.scale.z)),ft(dt.scale,1e6);const t=ct.a.encode(dt).finish();return btoa(String.fromCharCode(...t))}(e)}return t}function ft(e,t){Math.abs(e.x)>t&&(e.x=t*Math.sign(e.x)),Math.abs(e.y)>t&&(e.y=t*Math.sign(e.y)),Math.abs(e.z)>t&&(e.z=t*Math.sign(e.z))}const mt=/^data:[^/]+\/[^;]+;base64,/,yt=/^blob:http/,gt=/^(engine\.)/;const vt={},bt={};let Tt=10;function Et(e){return vt.hasOwnProperty(e)?vt[e]:(Tt++,function(e,t){vt[e]=t,bt[t]=e}(e,Tt),Tt)}function Rt(){return{type:f.EAT_INIT_MESSAGES_FINISHED,tag:"scene",payload:{initMessagesFinished:{}}}}var _t=r(29),wt=r.n(_t);class St extends Error{constructor(e){super(e),this.name="TimeoutError"}}class It{constructor(){Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:[]})}enqueue(e,t){var r;const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&(null===(r=this._queue[this.size-1])||void 0===r?void 0:r.priority)>=t.priority)return void this._queue.push(n);const o=function(e,t,r){let n=0,o=e.length;for(;o>0;){const s=Math.trunc(o/2);let i=n+s;r(e[i],t)<=0?(n=++i,o-=s+1):o=s}return n}(this._queue,n,(e,t)=>t.priority-e.priority);this._queue.splice(o,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}const xt=()=>{},Nt=new St;class At extends wt.a{constructor(e){var t,r,n,o;if(super(),Object.defineProperty(this,"_carryoverConcurrencyCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isIntervalIgnored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalCap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalEnd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_timeoutId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queueClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pendingCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_concurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isPaused",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_resolveEmpty",{enumerable:!0,configurable:!0,writable:!0,value:xt}),Object.defineProperty(this,"_resolveIdle",{enumerable:!0,configurable:!0,writable:!0,value:xt}),Object.defineProperty(this,"_timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_throwOnTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:It,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(o=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==o?o:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=xt,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=xt,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((r,n)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{const o=void 0===this._timeout&&void 0===t.timeout?e():function(e,t,r,n){let o;const s=new Promise((s,i)=>{if("number"!=typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);t!==Number.POSITIVE_INFINITY?(n={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...n},o=n.customTimers.setTimeout.call(void 0,()=>{if("function"==typeof r){try{s(r())}catch(e){i(e)}return}const n=r instanceof Error?r:new St("string"==typeof r?r:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),i(n)},t),(async()=>{try{s(await e)}catch(e){i(e)}finally{n.customTimers.clearTimeout.call(void 0,o)}})()):s(e)});return s.clear=()=>{clearTimeout(o),o=void 0},s}(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&n(Nt)}),s=await o;r(s),this.emit("completed",s)}catch(e){n(e),this.emit("error",e)}this._next()},t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onSizeLessThan(e){if(!(this._queue.size<e))return new Promise(t=>{const r=()=>{this._queue.size<e&&(this.removeListener("next",r),t())};this.on("next",r)})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}const Ot=["eval","parseInt","parseFloat","isNaN","isFinite","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape","Object","Function","String","Boolean","Number","Math","Date","RegExp","Error","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","JSON","Array","Promise","NaN","Infinity"],Pt=Promise.resolve().then.bind(Promise.resolve());function Mt(e){const t=globalThis.fetch,r=function({canUseWebsocket:e,previewMode:t,log:r}){return class extends WebSocket{constructor(n,o){if("wss:"!==n.toString().toLowerCase().substr(0,4)){if(!t)throw new Error("Can't connect to unsafe WebSocket server");r(" Warning: can't connect to unsafe WebSocket (ws) server in deployed scenes, consider upgrading to wss.")}if(!e)throw new Error("This scene doesn't have allowed to use WebSocket");super(n.toString(),o)}}}(e),n=function({canUseFetch:e,previewMode:t,log:r,originalFetch:n}){const o=new At({concurrency:1});return async(s,i)=>{const a=s instanceof Request?s.url:s;if("https://"!==a.toLowerCase().substr(0,8)){if(!t)return Promise.reject(new Error("Can't make an unsafe http request, please upgrade to https. url="+a));r(" Warning: Can't make an unsafe http request in deployed scenes, please consider upgrading to https. url="+a)}if(!e)return Promise.reject(new Error("This scene is not allowed to use fetch."));return o.add((async function(){const e=new AbortController,t=setTimeout(()=>{e.abort()},Math.max((null==i?void 0:i.timeout)||29e3,1));try{return await n(s,Object.assign({signal:e.signal},i))}finally{clearTimeout(t)}}))}}(Object.assign(Object.assign({},e),{originalFetch:t}));globalThis.fetch=n,globalThis.WebSocket=r;const o={dcl:e.dcl,WebSocket:r,fetch:n};return s=o,Ot.forEach(e=>s[e]=globalThis[e]),s;var s}function Ct(e){const{batchEvents:t,onError:r,onLog:n,sceneId:o,onEventFunctions:s,clientPort:i,eventState:a}=e,c={};return{DEBUG:!0,log(...e){n(...e)},openExternalUrl(e){try{if("https:"!==new URL(e).protocol)throw new Error("Only https: external links are allowed")}catch(e){return void r(e)}JSON.stringify(e).length>49e3?r(new Error("URL payload cannot exceed 49.000 bytes")):a.allowOpenExternalUrl?t.events.push({type:f.EAT_OPEN_EXTERNAL_URL,tag:"",payload:{openExternalUrl:{url:e}}}):this.error("openExternalUrl can only be used inside a pointerEvent")},openNFTDialog(e,n,o){if(a.allowOpenExternalUrl){if(e.length+n.length+((null==o?void 0:o.length)||0)>49e3)return void r(new Error("OpenNFT payload cannot exceed 49.000 bytes"));t.events.push({type:f.EAT_OPEN_NFT_DIALOG,tag:"",payload:{openNftDialog:{assetContractAddress:e,tokenId:n,comment:o||""}}})}else this.error("openNFTDialog can only be used inside a pointerEvent")},addEntity(e){"0"!==e&&t.events.push({type:f.EAT_CREATE_ENTITY,payload:{createEntity:{id:e}}})},removeEntity(e){t.events.push({type:f.EAT_REMOVE_ENTITY,payload:{removeEntity:{id:e}}})},onUpdate(t){"function"!=typeof t?r(new Error("onUpdate must be called with only a function argument")):e.onUpdateFunctions.push(t)},onEvent(e){"function"!=typeof e?r(new Error("onEvent must be called with only a function argument")):s.push(e)},updateEntityComponent(e,n,s,i){i.length>49e3?r(new Error("Component payload cannot exceed 49.000 bytes")):gt.test(n)&&t.events.push({type:f.EAT_UPDATE_ENTITY_COMPONENT,tag:o+"_"+e+"_"+s,payload:{updateEntityComponent:{entityId:e,classId:s,name:n.replace(gt,""),json:ht(s,i)}}})},attachEntityComponent(e,r,n){gt.test(r)&&t.events.push({type:f.EAT_ATTACH_ENTITY_COMPONENT,tag:e,payload:{attachEntityComponent:{entityId:e,name:r.replace(gt,""),id:n}}})},removeEntityComponent(e,r){gt.test(r)&&t.events.push({type:f.EAT_COMPONENT_REMOVED,tag:e,payload:{componentRemoved:{entityId:e,name:r.replace(gt,"")}}})},setParent(e,r){t.events.push({type:f.EAT_SET_ENTITY_PARENT,tag:e,payload:{setEntityParent:{entityId:e,parentId:r}}})},query(e,r){r.queryId=Et(r.queryId).toString(),t.events.push({type:f.EAT_QUERY,tag:o+"_"+r.queryId,payload:{query:{queryId:y(e),payload:JSON.stringify(r)}}})},subscribe(t){e.EngineApi.subscribe({eventId:t}).catch(e=>r(e))},unsubscribe(t){e.EngineApi.unsubscribe({eventId:t}).catch(e=>r(e))},componentCreated(e,r,n){gt.test(r)&&t.events.push({type:f.EAT_COMPONENT_CREATED,tag:e,payload:{componentCreated:{id:e,classId:n,name:r.replace(gt,"")}}})},componentDisposed(e){t.events.push({type:f.EAT_COMPONENT_DISPOSED,tag:e,payload:{componentDisposed:{id:e}}})},componentUpdated(e,r){t.events.push({type:f.EAT_COMPONENT_UPDATED,tag:e,payload:{componentUpdated:{id:e,json:r}}})},loadModule:async e=>{if(!(e in c)){const t=function(e,t){const r=t.replace(/^@decentraland\//,"Legacy").replace(/^~system\//,"");try{if(r in it)return it[r](e);throw new Error("The module is not available in the list!")}catch(e){throw Object.assign(new Error(`Error getting the methods of ${r}: `+e.message),{original:e})}}(i,e);c[e]={rpcHandle:e,__INTERNAL_UNSAFE_loadedModule:t,methods:Object.keys(t).map(e=>({name:e}))}}return c[e]},callRpc:async(e,t,r)=>{const n=c[e];if(!n)throw new Error(`RPCHandle: ${e} is not loaded`);return n.__INTERNAL_UNSAFE_loadedModule[t].apply(n,r)},onStart(t){e.onStartFunctions.push(t)},error(e,t){r(Object.assign(new Error(e),{data:t}))}}}class kt{constructor(e){this.devTools=e,this.exceptions=[],this.catchHandler=(...e)=>console.log(...e)}log(...e){const t={type:"log",timestamp:performance.now(),executionContextId:0,args:e.map(e=>{let t=void 0,r=void 0;const n=typeof e;if("object"===n&&null!==e)try{JSON.stringify(e),t=e}catch(t){r=Object.prototype.toString.apply(e)}else"number"!==n||!isNaN(e)&&isFinite(e)?t=e:r=Object.prototype.toString.apply(e);return{type:typeof e,value:t,unserializableValue:r}})};this.devTools.event({type:"Runtime.consoleAPICalled",jsonPayload:JSON.stringify([t])}).catch(this.catchHandler)}error(e){const t=this.exceptions.push(e)-1;let r=void 0,n=void 0;try{r=JSON.stringify(e),"{}"===r&&e instanceof Error&&(r=JSON.stringify({message:e.message,name:e.name,stack:e.stack}))}catch(t){n=e.toString()}const o={type:typeof e,value:r,unserializableValue:n},s={timestamp:performance.now(),exceptionDetails:{text:e.toString()+"\n"+e.stack,exceptionId:t,columnNumber:0,lineNumber:0,exception:o}};this.devTools.event({type:"Runtime.exceptionThrown",jsonPayload:JSON.stringify([s])}).catch(this.catchHandler)}}function Dt(e){var t;switch(e.type){case m.EDT_GENERIC:return{type:(null===(t=e.generic)||void 0===t?void 0:t.eventId)||"",data:JSON.parse(e.generic.eventData||"{}")};case m.EDT_POSITION_CHANGED:return{type:"positionChanged",data:e.positionChanged};case m.EDT_ROTATION_CHANGED:return{type:"rotationChanged",data:e.rotationChanged}}return{type:"",data:"{}"}}var zt=r(5);var Ft;var Ut,Jt,Lt;!function(e){e.clickDistance=10}(Ut||(Ut={})),function(e){e.entities=200,e.triangles=1e4,e.bodies=300,e.textures=10,e.materials=20,e.height=20,e.geometries=200,e.parcelSize=16,e.halfParcelSize=e.parcelSize/2,e.centimeter=.01,e.visibleRadius=4,e.maxParcelX=150,e.maxParcelZ=150,e.minParcelX=-150,e.minParcelZ=-150}(Jt||(Jt={})),function(e){e.gravity=-.2,e.height=1.6,e.handFromBodyDistance=.5,e.speed=2,e.runningSpeed=8,e.inertia=.01,e.angularSensibility=500}(Lt||(Lt={}));const qt=!!globalThis.preview,Bt=!!globalThis.isEditor,jt=!Bt&&!qt,Wt=(location.search.includes("ws"),location.search.includes("OPEN_AVATAR_EDITOR"),location.search.includes("ENV"),location.search.includes("GIF_WORKERS"),new URLSearchParams(location.search));function Vt(e){return e?rr("string"==typeof e?e:e[0]):null}function Gt(e){return e?"string"==typeof e?e:e[0]:null}const Ht=location.search.includes("LOCAL_COMMS")||qt,Yt=(!Wt.has("COMMS")&&Ht||Wt.get("COMMS")&&Gt(Wt.get("COMMS")),!Wt.get("SPACE")||Wt.has("DISABLE_PARCEL_LOADING"),Vt(Wt.get("UPDATE_CONTENT_SERVICE")),Vt(Wt.get("FETCH_CONTENT_SERVICE")),Gt(Wt.get("COMMS_SERVICE")),Gt(Wt.get("HOTSCENES_SERVICE")),Gt(Wt.get("POI_SERVICE")),Gt(Wt.get("island")),Gt(Wt.get("TRACE_RENDERER")),Gt(Wt.get("LOS")),location.search.includes("DEBUG_MODE")||!!globalThis.mocha||qt||Bt),Qt=(Wt.has("DEBUG_COMMS"),location.search.includes("DEBUG_ANALYTICS"),location.search.includes("DEBUG_MOBILE"),location.search.includes("DEBUG_MESSAGES"),location.search.includes("DEBUG_MESSAGES_QUEUE_PERF"),location.search.includes("DEBUG_WS_MESSAGES"),location.search.includes("DEBUG_REDUX"),location.search.includes("DEBUG_LOGIN"),location.search.includes("DEBUG_PM"),Yt||location.search.includes("DEBUG_SCENE_LOG"),!qt||location.search.includes("DEBUG_KERNEL_LOG"),Gt(Wt.get("DEBUG_PREFIX")),location.search.includes("RESET_TUTORIAL"),location.search.includes("ENGINE_DEBUG_PANEL"));location.search.includes("SCENE_DEBUG_PANEL"),location.search.includes("SHOW_FPS_COUNTER"),location.search.includes("position"),Gt(Wt.get("ws")),location.search.includes("FORCE_SEND_MESSAGE"),Gt(Wt.get("ASSET_BUNDLES_DOMAIN")),"string"==typeof Wt.get("MAX_VISIBLE_PEERS")&&parseInt(Wt.get("MAX_VISIBLE_PEERS"),10),Ft=Gt(Wt.get("BUILDER_SERVER_URL")),qt?"string"==typeof Wt.get("CATALYST")&&0!==(null===(Zt=Wt.get("CATALYST"))||void 0===Zt?void 0:Zt.length)?rr(Wt.get("CATALYST")):`${location.origin}${location.pathname}`.replace(/\/$/,""):"string"==typeof Wt.get("CATALYST")&&rr(Wt.get("CATALYST"));var Zt;Gt(Wt.get("FORCE_RENDERING_STYLE")),Gt(Wt.get("META_CONFIG_URL"));var Kt,$t;!function(e){e.debug=!0,e.commRadius=4,e.sendAnalytics=!0,e.peerTtlMs=6e4,e.autoChangeRealmInterval="string"==typeof Wt.get("AUTO_CHANGE_INTERVAL")?1e3*parseInt(Wt.get("AUTO_CHANGE_INTERVAL"),10):4e4,e.defaultIceServers=[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:coturn-raw.decentraland.services:3478",credential:"passworddcl",username:"usernamedcl"}],e.voiceChatUseHRTF=location.search.includes("VOICE_CHAT_USE_HRTF")}(Kt||(Kt={})),function(e){e.MAINNET="mainnet",e.GOERLI="goerli"}($t||($t={}));Wt.get("WITH_ITEMS")&&Gt(Wt.get("WITH_ITEMS")),Wt.get("WITH_COLLECTIONS")&&Gt(Wt.get("WITH_COLLECTIONS")),location.search.includes("DISABLE_EMPTY_SCENES");function Xt(e){if(!e)throw new Error("Value is missing");return e}var er,tr;(tr=er||(er={})).mainnet={wss:"wss://rpc.decentraland.org/mainnet",http:"https://rpc.decentraland.org/mainnet",etherscan:"https://etherscan.io",names:"https://api.thegraph.com/subgraphs/name/decentraland/marketplace",LANDProxy:Xt(zt.mainnet.LANDProxy),EstateProxy:Xt(zt.mainnet.EstateProxy),CatalystProxy:Xt(zt.mainnet.CatalystProxy),MANAToken:Xt(zt.mainnet.MANAToken)},tr.goerli={wss:"wss://rpc.decentraland.org/goerli",http:"https://rpc.decentraland.org/goerli",etherscan:"https://goerli.etherscan.io",names:"https://api.thegraph.com/subgraphs/name/decentraland/marketplace-goerli",LANDProxy:Xt(zt.goerli.LANDProxy),EstateProxy:Xt(zt.goerli.EstateProxy),CatalystProxy:Xt(zt.goerli.CatalystProxy||zt.goerli.Catalyst),MANAToken:Xt(zt.goerli.MANAToken)};globalThis.isRunningTests;function rr(e){return null==e||e.startsWith("http")?e:"https://"+e}Jt.parcelSize,Jt.centimeter,Jt.centimeter;function nr(e){const[t,r]=e.trim().split(/\s*,\s*/).map(e=>parseInt(e,10));return{x:t,y:r}}async function or(e){return await new Promise(t=>setTimeout(t,Math.max(0|e,0))),!0}Object(n.createRpcClient)(Object(o.WebWorkerTransport)(self)).then((async function(e){var t,r;const n=self.name,o=await e.createPort("scene-"+n),[s,i,a,c]=await Promise.all([it.EngineApi(o),it.EnvironmentApi(o),it.Permissions(o),it.DevTools(o)]),[d,u]=(await a.hasManyPermissions({permissions:[me.PI_USE_WEBSOCKET,me.PI_USE_FETCH]})).hasManyPermission,l=new kt(c),p={allowOpenExternalUrl:!1},h=[],f=[],m=[],y={events:[]},g=await i.getBootstrapData({}),v=JSON.parse((null===(t=g.entity)||void 0===t?void 0:t.metadataJson)||"{}"),b=await i.isPreviewMode({}),T=await i.areUnsafeRequestAllowed({}),E=await i.getExplorerConfiguration({});if(!v||!v.main)throw new Error("No boostrap data");const R=v.main,_=null===(r=g.entity)||void 0===r?void 0:r.content.find(e=>e.file===R);if(!_)throw await s.sendBatch({actions:[Rt()]}),new Error("SDK: Error while loading scene. Main file missing.");const w=function(e,t,r){let n=t;return e&&(n=e),mt.test(n)||yt.test(n)?n:(r.endsWith("/")?r:r+"/")+n}(_.hash,R,g.baseUrl),S=await fetch(w);if(!S.ok)throw await s.sendBatch({actions:[Rt()]}),new Error(`SDK: Error while loading ${w} (${R} -> ${null==_?void 0:_.file}:${null==_?void 0:_.hash}) the mapping was not found`);pt.useBinaryTransform="true"===E.configurations.enableBinaryTransform;let I=!1,x=1e3/30;async function N(){const e=y.events;e.length&&(y.events=[]);const t=await s.sendBatch({actions:e});for(const e of t.events)A(Dt(e))}function A(e){if("raycastResponse"===e.type){const t=parseInt(e.data.queryId,10);bt[t]&&(e.data.queryId=bt[t].toString())}if(!I&&"sceneStart"===e.type){I=!0;for(const e of m)try{e()}catch(e){l.error(e)}}(function(e){var t,r;switch(e.type){case"uuidEvent":return void 0!==(null===(r=null===(t=e.data)||void 0===t?void 0:t.payload)||void 0===r?void 0:r.buttonId)}return!1})(e)&&(p.allowOpenExternalUrl=!0);for(const t of h)try{t(e)}catch(e){l.error(e)}p.allowOpenExternalUrl=!1}let O=performance.now();function P(){const e=Math.max(x-(performance.now()-O)|0,0);setTimeout(M,e)}function M(){const e=performance.now(),t=e-O;O=e;const r=t/1e3;for(const e of f)try{e(r)}catch(e){l.error(e)}N().catch(l.error).finally(P)}try{const e=await S.text(),t=Ct({clientPort:o,onError:e=>l.error(e),onLog:(...e)=>l.log(...e),sceneId:g.id,eventState:p,batchEvents:y,EngineApi:s,onEventFunctions:h,onStartFunctions:m,onUpdateFunctions:f}),r=Mt({dcl:t,canUseFetch:u,canUseWebsocket:d,log:t.log,previewMode:b.isPreview||T.status});!0===g.useFPSThrottling&&function(e,t,r){e.subscribe("positionChanged"),e.onEvent(e=>{if("positionChanged"!==e.type)return;const n=e.data,o=new at.Vector2(Math.floor(n.cameraPosition.x/16),Math.floor(n.cameraPosition.z/16));if(void 0===o)return;const s=o;let i=100,a=!1;for(const e of t)i=Math.min(i,at.Vector2.DistanceSquared(s,e)),e.x===s.x&&e.y===s.y&&(a=!0);let c=1;a?c=30:i<=4?c=20:i<=9?c=10:i<=16&&(c=5),r(1e3/c)})}(t,v.scene.parcels.map(nr),e=>{x=e}),await async function(e,t){const r={},n="SAFE_EVAL_"+Math.floor(1e6*Math.random());return r[n]={},Object.keys(t).forEach((function(e){r[e]=t[e]})),r.window=r,r.self=r,Pt(()=>new Function("code",`with (this) { ${e} }`).call(r,e))}(e,r)}catch(e){throw await s.sendBatch({actions:[Rt()]}),l.error(new Error("SceneRuntime: Error while evaluating the scene "+n)),await or(100),e}y.events.push(Rt());do{await N()}while(!I&&await or(100));M()})).catch(e=>console.error(e))},function(e,t,r){"use strict";r.r(t);const n=r(60);var o;n&&n.__esModule&&n.default&&new n.default((o=self,{onConnect(e){o.addEventListener("message",()=>e(),{once:!0})},onError(e){o.addEventListener("error",t=>{t.error?e(t.error):t.message&&e(Object.assign(new Error(t.message),{colno:t.colno,error:t.error,filename:t.filename,lineno:t.lineno,message:t.message}))})},onMessage(e){o.addEventListener("message",t=>{e(t.data)})},sendMessage(e){o.postMessage(e)},close(){"terminate"in o?o.terminate():"close"in o&&o.close()}}))}]));